!function(define){Nui[define]('src/core/util',{regex:{mobile:/^0?(13|14|15|17|18)[0-9]{9}$/,tel:/^[0-9-()（）]{7,18}$/,email:/^\w+((-w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,idcard:/^\d{17}[\d|x]|\d{15}$/,cn:/^[\u4e00-\u9fa5]+$/,taxnum:/^[a-zA-Z0-9]{15,20}$/},toFixed:function(t,e,n){if(isNaN(t)||''===t)return t;void 0===n&&(n=2),e=e||0;var i=t.toString(),o=function(t){for(var e='';t>0;)e+='0',t--;return e},r='';i<0&&(i=i.replace('-',''),r='-');var a=i.indexOf('.');if(-1!==a&&e>=0){var s=parseInt(i.substr(0,a)),c='0'+i.substr(a),l='1'+o(e);c=(Math.round(c*l)/l).toFixed(e),c>=1&&(s=(s+1).toString()),i=r+s+c.substr(1)}else e>0&&(i=r+i+'.'+o(e));if(null!==n&&n>=0&&n<e){i=i.replace(/0+$/,'');var a=i.indexOf('.'),u=0;for(-1!==a&&(u=i.substr(a+1).length);u<n;)i+='0',u++;i=i.replace(/\.$/,'')}return i},getParam:function(t,e){var n=decodeURI(e||location.href),i={};if(startIndex=n.indexOf('?'),startIndex++>0){var o,r=n.substr(startIndex).split('&');Nui.each(r,function(t){o=t.split('='),i[o[0]]=o[1]})}return'string'==typeof t&&t&&(i=void 0!==(o=i[t])?o:''),i},setParam:function(t,e,n){var i,o=this;if(Nui.type(t,'Object'))i=e||location.href,Nui.each(t,function(t,e){t&&(i=o.setParam(e,t,i))});else if(i=n||location.href,-1===i.indexOf('?')&&(i+='?'),-1!==i.indexOf(t+'=')){var r=new RegExp('('+t+'=)[^&]*');i=i.replace(r,'$1'+e)}else{var a='';-1!==i.indexOf('=')&&(a='&'),i+=a+t+'='+e}return i},supportCss3:function(t){var e,n=['webkit','Moz','ms','o'],i=[],o=document.documentElement.style,r=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};for(e in n)i.push(r(n[e]+'-'+t));i.push(r(t));for(e in i)if(i[e]in o)return!0;return!1},supportHtml5:function(t,e){return t in document.createElement(e)},location:function(t,e){t&&jQuery('<a href="'+t+'"'+(e?'target="'+(e||'_self')+'"':'')+'><span></span></a>').appendTo('body').children().click().end().remove()},formatDate:function(t,e){if(t=parseInt(t)){if(!e)return t;var n=new Date(t),i={'M':n.getMonth()+1,'d':n.getDate(),'h':n.getHours(),'m':n.getMinutes(),'s':n.getSeconds()};return e=e.replace(/([yMdhms])+/g,function(t,e){var o=i[e];return void 0!==o?(t.length>1&&(o='0'+o,o=o.substr(o.length-2)),o):'y'===e?(n.getFullYear()+'').substr(4-t.length):t})}return'-'},getData:function(t,e,n){var i=this,o={'result':{},'voids':0,'total':0};if(t.length){var r=t.serializeArray();r.length||(r=t.find('[name]').serializeArray());var a=',';if(e&&'string'==typeof e&&!n&&(a=e),Nui.each(r,function(t,e){var n=Nui.trim(t.value);o.total++,n||o.voids++;var i=t.name;Nui.isArray(o.result[i])||(o.result[i]=[]),o.result[i].push(n)}),Nui.each(o.result,function(t,e){o.result[e]=t.join(a)}),e&&n){var s=!1;o.result[n]=[],t.find(e).each(function(){var t=i.getData($(this).find('[name]')).result;!0===e||s||(Nui.each(t,function(t,e){delete o.result[e]}),s=!0),o.result[n].push(t)})}}return o},getFocusIndex:function(t){var e=Nui.trim(t.value),n=e.length;if(t.setSelectionRange)n=t.selectionStart;else try{var i=document.selection.createRange(),o=t.createTextRange();o.setEndPoint('endtoend',i),n=o.text.length}catch(t){}return n},isTextSelect:function(){var t='';if(document.selection)t=document.selection.createRange().text;else if(-1!==navigator.userAgent.toLowerCase().indexOf('gecko')){var e=document.activeElement;t=e.value.substring(e.selectionStart,e.selectionEnd)}else window.getSelection?t=window.getSelection().toString():document.getSelection&&(t=document.getSelection().toString());return!!t},isInstallPDF:function(){var i,len,flag=!0;if((Nui.browser.webkit||Nui.browser.mozilla&&Nui.browser.version>19)&&(flag=!1),navigator.plugins&&(len=navigator.plugins.length))for(i=0;i<len;i++)if(/Adobe Reader|Adobe PDF|Acrobat|Chrome PDF Viewer/.test(navigator.plugins[i].name)){flag=!1;break}try{if(window.ActiveXObject||window.ActiveXObject.prototype){for(i=1;i<10;i++)try{if(eval('new ActiveXObject(\'PDF.PdfCtrl.'+i+'\');')){flag=!1;break}}catch(t){flag=!0}var arr=['PDF.PdfCtrl','AcroPDF.PDF.1','FoxitReader.Document','Adobe Acrobat','Adobe PDF Plug-in'];for(len=arr.length,i=0;i<len;i++)try{if(new ActiveXObject(arr[i])){flag=!1;break}}catch(t){flag=!0}}}catch(t){}return flag},isInstallFlash:function(){if(void 0!==window.ActiveXObject)try{if(new ActiveXObject('ShockwaveFlash.ShockwaveFlash'))return!1}catch(t){}else if(navigator.plugins['Shockwave Flash'])return!1;return Nui.browser.msie?'http://rj.baidu.com/soft/detail/17153.html':'http://rj.baidu.com/soft/detail/15432.html'},formatNumber:function(t){var e=parseInt(t);if(!isNaN(e)&&e&&(t=t.toString())){var n=t.indexOf('.'),i='';return n>0&&(i=t.substr(n)),e.toLocaleString().replace(/\.\d+$/,'')+i}return t},numberToCN:function(t){var e,n,i,o=new Array('零','壹','贰','叁','肆','伍','陆','柒','捌','玖'),r=new Array('','拾','佰','仟'),a=new Array('','万','亿','兆'),s=new Array('角','分','毫','厘'),c='';if(''==t)return'';var l=t<0;if((t=Math.abs(parseFloat(t)))>=1e15)return'';if(0==t)return c=o[0]+'元整';if(t=t.toString(),-1==t.indexOf('.')?(e=t,n=''):(i=t.split('.'),e=i[0],n=i[1].substr(0,4)),parseInt(e,10)>0){for(var u=0,f=e.length,d=0;d<f;d++){var h=e.substr(d,1),p=f-d-1,_=p/4,m=p%4;'0'==h?u++:(u>0&&(c+=o[0]),u=0,c+=o[parseInt(h)]+r[m]),0==m&&u<4&&(c+=a[_])}c+='元'}if(''!=n)for(var v=n.length,d=0;d<v;d++){var h=n.substr(d,1);'0'!=h&&(c+=o[Number(h)]+s[d])}return''==c?c+=o[0]+'元整':''==n&&(c+='整'),l&&(c='负'+c),c}}),Nui[define]('src/core/template',['src/core/util'],function(t){var e=function(t,e,i){if(this.tplid=t){if(n[t])return h.call(this,n[t],e,i);var o=document.getElementById(t);if(o&&'SCRIPT'===o.nodeName&&'text/html'===o.type)return h.call(this,n[t]=o.innerHTML,e,i)}return''},n={},i={openTag:'<%',closeTag:'%>'},o={trim:Nui.trim,formatDate:t.formatDate,formatNumber:t.formatNumber,setParam:t.setParam,toFixed:t.toFixed,numberToCN:t.numberToCN},r=!!''.trim,a=';$that.out = function(){return $that.code';a=(r?'""'+a:'[]'+a+'.join("")')+'}';var s=function(t){return r?t?function(t){return'$that.code += '+t+';'}:function(t,e){return t+=e}:t?function(t){return'$that.code.push('+t+');'}:function(t,e){return t.push(e),t}},c=s(!0),l=s(),u=function(t,n,i,o){var r=this,a=n.replace(/([^\s])/g,'\\$1'),s=i.replace(/([^\s])/g,'\\$1');return t.replace(new RegExp(a+'\\s*include\\s+[\'"]([^\'"]*)[\'"]\\s*'+s,'g'),function(t,n){if(n){var i=r[n];return'function'==typeof i&&(i=i()),'string'==typeof i?h.call(r,i,null,o):e(n,null,o)}return''})},f='object'==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return 1===t.nodeType&&'string'==typeof t.nodeName},d=function(t){if(t&&'object'==typeof t){var e=t[0];return f(e?e:t)}},h=function(t,e,n){var s=this;if('string'==typeof t){n=n||{};var c=n.openTag||i.openTag,f=n.closeTag||i.closeTag;if(t=u.call(s,t,c,f),e&&'object'==typeof e){Nui.isArray(e)&&(e={$list:e});var h=r?'':[];t=t.replace(/\s+/g,' '),Nui.each(t.split(c),function(t,e){t=t.split(f),e>=1?h=l(h,_(Nui.trim(t[0]),!0)):t[1]=t[0],h=l(h,_(t[1].replace(/'/g,'\\\'').replace(/"/g,'\\"')))});var m=r?'':[];for(var v in e)m=l(m,v+'=$data.'+v+',');r||(h=h.join(''),m=m.join('')),h='var '+m+'$that=this,$method=$that.methods; $that.line=4; $that.code='+a+';\ntry{\n'+h+';}\ncatch(e){\n$that.error(e, $that.line)\n};';try{var g=new Function('$data',h);g.prototype.methods=o,g.prototype.error=p(h,e,s.tplid),g.prototype.dom=d,t=new g(e).out(),g=null}catch(t){p(h,e,s.tplid)(t)}}return t}return''},p=function(t,e,n){return function(i,o){var r='\n',a=[];t='function anonymous($data){\n'+t+'\n}',t=t.split('\n'),Nui.each(t,function(t,e){a.push(e+1+'      '+t.replace('$that.line++;',''))}),r+='code\n',r+=a.join('\n')+'\n\n',void 0!==typeof JSON&&(r+='data\n',r+=JSON.stringify(e)+'\n\n'),n&&(r+='templateid\n',r+=n+'\n\n'),o&&(r+='line\n',r+=o+'\n\n'),r+='message\n',r+=i.message,console.error(r)}},_=function(t,e){if(!t)return'';var n,i;if(e)if(void 0!==(i=v(t,'if')))n='if('+m(i)+'){';else if(void 0!==(i=v(t,'elseif')))n='\n}\nelse if('+m(i)+'){';else if('else'===t)n='\n}\nelse{';else if('/if'===t)n='}';else if(void 0!==(i=v(t,'each ',/\s+/)))n='Nui.each('+i[0]+', function('+(i[1]||'$value')+','+(i[2]||'$index')+'){';else if('/each'===t)n='});';else if(void 0!==(i=v(t,' | ',/\s*,\s*/))){var o=i[0],r=o.lastIndexOf('('),a='('+m(i.slice(1).toString())+')';if(-1!==r){var s=o.substr(0,r),l=Nui.trimLeft(o.substr(r+1));n=c(s+'($that.methods.'+l+a)}else n=c('$that.methods.'+o+a)}else n=/^(var|let|const|return|delete)\s+/.test(t)?m(t)+';':c(m(t,!0));else n=c('\''+t+'\'');return n+'\n$that.line++;'},m=function(t,e){return t.replace(/([\.\$\w]+\s*(\[[\'\"\[\]\w\.\$\s]+\])?)\?\?/g,function(t,n){var i='(typeof '+n+'!=="undefined"&&'+n+'!==null&&'+n+'!==undefined&&!$that.dom('+n+')';return e&&(i+='?'+n+':""'),i+')'})},v=function(t,e,n){var i;if(0===t.indexOf(e)?i='':' | '===e&&t.indexOf(e)>0&&(i=','),void 0!==i)return t=Nui.trimLeft(t.replace(e,i)),n?t.split(n):t};return e.method=function(t,e){o[t]||(o[t]=e)},e.config=function(){var t=arguments;Nui.type(t[0],'Object')?Nui.each(t[0],function(t,e){i[e]=t}):t.length>1&&'string'==typeof t[0]&&(i[t[0]]=t[1])},e.render=h,e}),Nui[define]('src/core/events',function(){return function(t){var e=this,n=t||e,i=n.constructor,o=i&&i.__component_name,r=e.element||n.element||Nui.doc,a=o?n._events:n.events;if(!r||!a)return n;'function'==typeof a&&(a=a.call(n)),r instanceof jQuery||(r=jQuery(r));var s,c,l,u=function(t,i,o){if('function'==typeof o)o.call(n,t,i);else{var r,a;Nui.each(o,function(o,s){if('function'==typeof(r=n[o])?a=n:'function'==typeof(r=e[o])&&(a=e),a)return l=r.call(a,t,i,l)})}};return Nui.each(a,function(t,e){!t||'string'!=typeof t&&'function'!=typeof t||('string'==typeof t&&(t=Nui.trim(t).split(/\s+/)),e=Nui.trim(e).split(/\s+/),s=e.shift().replace(/:/g,' '),c=e.join(' '),o?n._on(s,r,c,function(e,n){u(e,n,t)}):r.on(s,c,function(e){u(e,jQuery(this),t)}))}),n}}),Nui[define]('src/core/component',['src/core/template','src/core/events'],function(tpl,events){var module=this,require=this.require,extend=this.extend,callMethod=function(t,e,n){if(e.length>t.length){var i=e[e.length-1];if(i&&Nui.type(i,['String','Number'])&&n._options.id!==i&&n.__id!==i)return}t.apply(n,e)};Nui.bsie7&&Nui.doc.on('focus','button, input[type="button"]',function(){this.blur()});var statics={__id:0,__instances:{},__setMethod:function(apis,components){var self=this;return Nui.each(apis,function(val,methodName){void 0===self[methodName]&&(self[methodName]=function(){var self=this,args=arguments,container=args[0],name=self.__component_name;if(name&&'component'!==name)if(container&&container instanceof jQuery)if('init'===methodName){var mod=components[name];mod&&container.find('[data-'+name+'-options]').each(function(){if(!this.nui||!this.nui[name]){var elem=jQuery(this),options=elem.data(name+'Options'),_mod;options&&'string'==typeof options&&(/^{[\s\S]*}$/.test(options)?options=eval('('+options+')'):(_mod=require(options,!0))&&(options='function'==typeof _mod.exports?_mod.exports(elem):_mod.exports)),'object'!=typeof options&&(options={}),mod(extend(options,{target:elem}))}})}else container.find('[nui_component_'+name+']').each(function(){var t,e;this.nui&&(t=this.nui[name])&&'function'==typeof(e=t[methodName])&&callMethod(e,Array.prototype.slice.call(args,1),t)});else Nui.each(self.__instances,function(t){var e=t[methodName];'function'==typeof e&&callMethod(e,args,t)});else Nui.each(components,function(t,e){'component'!==e&&'function'==typeof t[methodName]&&t[methodName].apply(t,args)})})}),self},_options:{},_init:jQuery.noop,_jquery:function(t){return t instanceof jQuery?t:jQuery(t)},_getSize:function(t,e,n){var i=0;if(n=n||'border',e=e||'tb','all'===n)return this._getSize(t,e)+this._getSize(t,e,'padding')+this._getSize(t,e,'margin');var o={l:['Left'],r:['Right'],lr:['Left','Right'],t:['Top'],b:['Bottom'],tb:['Top','Bottom']},r=[{border:{l:['LeftWidth'],r:['RightWidth'],lr:['LeftWidth','RightWidth'],t:['TopWidth'],b:['BottomWidth'],tb:['TopWidth','BottomWidth']}},{padding:o},{margin:o}];return Nui.each(r,function(o){o[n]&&Nui.each(o[n][e],function(e){var o=parseFloat(t.css(n+e));i+=isNaN(o)?0:o})}),i},_$fn:function(t,e){jQuery.fn[t]=function(){var n=arguments,i=n[0];return this.each(function(){if('string'!=typeof i)Nui.type(i,'Object')?i.target=this:i={target:this},e(i);else if(i){var o;if(this.nui&&(o=this.nui[t])&&0!==i.indexOf('_'))if('options'===i)o.option(n[1],n[2]);else{var r=o[i];'function'==typeof r&&r.apply(o,Array.prototype.slice.call(n,1))}}})}},_$ready:function(t,e){'function'==typeof this.init&&this.init(Nui.doc)},config:function(){var t=arguments,e=(t.length,t[0]);return Nui.type(e,'Object')?this._options=jQuery.extend(!0,this._options,e):Nui.type(e,'String')?1===t.length?this._options[e]:this._options[e]=t[1]:void 0},hasInstance:function(t){var e=!1,n=this.__instances;if(t)Nui.each(n,function(n){if(n._options.id===t)return e=!0,!1});else for(i in n)return!0;return e}};return{_static:statics,_options:{target:null,id:'',skin:'',className:'',onInit:null,onReset:null,onDestroy:null},_template:{},_init:function(){this._exec()},_exec:jQuery.noop,_getTarget:function(){var t=this;if(!t.target){var e=t._options.target,n=t.constructor;if(!e)return null;e=n._jquery(e),t.target=t._bindComponentName(e)}return t.target},_bindComponentName:function(t){var e=this,n=e.constructor,i='nui_component_'+n.__component_name;return t.attr(i,'').each(function(){this.nui||(this.nui={}),this.nui[n.__component_name]=e}),t},_tplData:function(t){var e=this._options,n=this.constructor,i='nui-'+n.__component_name,o=Nui.trim(e.skin),r=function(t,e){if(t.__parent){var n=t.__parent.constructor,i=n.__component_name;if('component'!==i)return o&&e.unshift('nui-'+i+'-'+o),e.unshift('nui-'+i),r(n,e)}return e},a=r(n,[]);return a.push(i),o&&a.push(i+'-'+o),e.id&&a.push(n.__component_name+'-'+e.id),t||(t={}),e.className&&a.push(e.className),t.className=a.join(' '),t},_event:function(){var t=this,e=t._options;return t.element&&e.events&&(e.element=t.element,events.call(t,e)),events.call(t)},_on:function(t,e,n,i,o){var r=this;'function'==typeof n&&(o=i,i=n,n=e,e=null,n=r.constructor._jquery(n));var a=function(t){return i.call(this,t,jQuery(this))};return e?('string'!=typeof n&&((n=n.selector)||(n=r._options.target)),e.on(t,n,a),o&&e.find(n).trigger(t)):(n.on(t,a),o&&n.trigger(t)),r.__eventList.push({dalegate:e,selector:n,type:t,callback:a}),r},_off:function(){var t=this,e=t.__eventList;return Nui.each(e,function(t,n){t.dalegate?t.dalegate.off(t.type,t.selector,t.callback):t.selector.off(t.type,t.callback),e[n]=null,delete e[n]}),t.__eventList=[],t},_delete:function(){var t=this,e=t.constructor;if(t.target){var n='nui_component_'+e.__component_name;t.target.removeAttr(n).each(function(){this.nui&&(this.nui[e.__component_name]=null,delete this.nui[e.__component_name])})}e.__instances[t.__id]=null,delete e.__instances[t.__id]},_reset:function(){return this._off(),this.element&&(this.element.remove(),this.element=null),this},_tpl2html:function(t,e){var n={openTag:'<%',closeTag:'%>'};return 1===arguments.length?tpl.render(this._template,t,n):tpl.render.call(this._template,this._template[t],e,n)},_callback:function(t,e){var n=this,i=n._options,o=i['on'+t];if('function'==typeof o)return e?(Array.prototype.unshift.call(e,n),o.apply(i,e)):o.call(i,n)},option:function(t,e){var n,i=arguments,o=!1;return!0===i[0]?o=!0:jQuery.isPlainObject(i[0])?(n=i[0],o=i[1]):i.length>1&&'string'==typeof i[0]&&(n={},n[i[0]]=i[1],o=i[2]),(n||o)&&(this._options=jQuery.extend(!0,{},this[!0===o?'_defaultOptions':'_options'],n),this._reset(),this._exec()),this},reset:function(){return this.option(!0),this._callback('Reset'),this},destroy:function(){this._delete(),this._reset(),this._callback('Destroy')}}}),Nui[define]('src/components/layer/layer',['src/core/component','src/core/util','src/core/template'],function(t,e,n){var i={_maskzIndex:1e4,_zIndex:1e4,_init:function(){var t=this,e=null;Nui.win.on('resize',function(){clearTimeout(e),e=setTimeout(function(){Nui.each(t.__instances,function(t){var e=t._options;(e.position||!0===e.isCenter)&&t.resize()})})})},_$fn:null,_$ready:null,init:null},o={content:'',template:'',data:{},width:320,height:'auto',zIndex:null,maxWidth:0,maxHeight:0,timer:0,edge:0,container:'body',title:'温馨提示',isMove:!1,isMask:!0,isInnerMove:!1,isClickMask:!1,isMoveMask:!1,isHide:!0,isCenter:!0,isFull:!1,isTop:!1,isTips:!1,isFixed:!0,scrollbar:!0,isStopProp:!1,align:'center',bubble:{enable:!1,dir:'top'},iframe:{enable:!1,cache:!1,src:''},close:{enable:!0,text:'×'},confirm:{enable:!1,name:'normal',text:'确定',callback:function(){return!0}},cancel:{enable:!0,text:'取消'},position:null,under:null,button:null,onMove:null,onResize:null,onScroll:null,onHideBefore:null,onDestroyBefore:null,onTimer:null};return this.extend(t,{_static:i,_options:o,_template:{layout:'<div class="<% className %>" style="<% include \'style\' %>"><div class="layer-box"><%if close%><% var btn = close %><% include "button" %><%/if%><%if bubble%><span class="layer-bubble layer-bubble-<%bubble.dir||"top"%>"<%if bubble.style%> style="<%each bubble.style v n%><%n%>:<%v%>;<%/each%>"<%/if%>><b></b><i></i></span><%/if%><%if title%><div class="layer-head"><span class="layer-title"><%title%></span></div><%/if%><div class="layer-body"><div class="layer-main"><%content%></div></div><%if button && button.length%><div class="layer-foot" style="text-align:<%align%>"><div class="layer-inner"><%each button btn%><%include "button"%><%/each%></div></div><%/if%></div></div>',button:'<button class="ui-button<%if btn.name%><%each [].concat(btn.name) name%> ui-button-<%name%><%/each%><%/if%> layer-button-<%btn.id%>"<%if btn.style%> style="<%each btn.style v n%><%n%>:<%v%>;<%/each%>"<%/if%>><%btn.text || "按钮"%></button>',iframe:'<iframe<%each attr%> <%$index%>="<%$value%>"<%/each%>></iframe>',mask:'<div class="nui-layer-mask<%if skin%> nui-layer-mask-<%skin%><%/if%>" style="<%include \'style\'%>"><div class="layer-mask"></div></div>',movemask:'<div class="nui-layer-movemask<%if skin%> nui-layer-movemask-<%skin%><%/if%>" style="<%include \'style\'%>"></div>',style:'<%each style%><%$index%>:<%$value%>;<%/each%>'},data:{},_init:function(){this._zIndex=++this.constructor._zIndex,this._exec()},_exec:function(){var t=this,e=t._options,n=t.constructor;if(t._container=n._jquery(e.container),t._container.length){if(t._containerDOM=t._container.get(0),'BODY'!==t._containerDOM.tagName){t._window=t._container,t._isWindow=!1;-1==='absolute relative fixed'.indexOf(t._container.css('position'))&&t._container.css('position','relative')}else t._window=Nui.win,t._isWindow=!0;t._isFixed=e.isFixed&&!Nui.bsie6&&t._isWindow,t._create()}},_create:function(){var t=this,e=t._options,n=t._createButton(),i=!1;!0!==e.isTips&&(i='string'==typeof e.title);var o=t._tplData({content:t._getContent(),close:n.close,button:n.button,title:i?e.title||'温馨提示':null,bubble:!0===e.bubble.enable?e.bubble:null,align:e.align||'center',style:{'z-index':isNaN(parseInt(e.zIndex))?t._zIndex:e.zIndex,'position':'absolute','display':'block'}});t._isFixed&&(o.style.position='fixed'),t._setTop(),t.element=t._bindComponentName($(t._tpl2html('layout',o)).appendTo(t._container)),t._box=t.element.children('.layer-box'),t.head=t._box.children('.layer-head'),t._body=t._box.children('.layer-body'),t.main=t._body.children('.layer-main'),t.foot=t._box.children('.layer-foot'),!0!==e.isTips&&(!0===e.iframe.enable&&(t._iframe=t.main.children('iframe'),t._iframeOnload()),!0===e.isMove&&i&&t._bindMove(),!0===e.isStopProp&&t._stopProp(),!0===e.isTop&&t._bindTop()),t._button.length&&t._buttonEvent(),!0===e.isFixed&&!0==!t._isFixed&&t._bindScroll(),t._event(),t._show()},_getContent:function(){var t=this,e=t._options,i='',o=e.template;return!0!==e.isTips&&!0===e.iframe.enable?i=t._createIframe():o?'string'==typeof o?i=n.render(o,e.data):Nui.type(e.template,'Object')&&(i=n.render.call(o,o.main,e.data)):'string'==typeof e.content?i=e.content:e.content instanceof jQuery&&(i=e.content.prop('outerHTML')),i},_createIframe:function(){var t=this,n=t._options,i='layer-iframe'+t.__id,o=n.iframe.src;return!1===n.iframe.cache&&(o=e.setParam('_',(new Date).getTime(),o)),t._tpl2html('iframe',{attr:{frameborder:'0',name:i,id:i,src:o,scroll:'hidden',style:'width:100%;'}})},_iframeOnload:function(){var t=this;t._iframe.load(function(){t._iframeDocument=t._iframe.contents(),t._resize()})},_createButton:function(){var t=this,e=t._options,n={},i={},o={},r=function(e,n){t._button['close'===e?'unshift':'push'](n)};return t._button=[],!0!==e.isTips&&(Nui.each(['close','confirm','cancel'],function(t){var i=e[t];i&&!0===i.enable&&(n[t]={id:t,name:i.name,style:i.style,text:i.text,callback:i.callback})}),e.button&&e.button.length&&Nui.each(e.button,function(t){var e,i=t.id,a=t;o[i]||(o[i]=!0,(e=n[i])&&(a=$.extend(!0,{},e,t),delete n[i]),r(i,a))}),Nui.each(n,function(t,e){r(e,t)})),t._button[0]&&'close'===t._button[0].id?(i.close=t._button[0],i.button=t._button.slice(1)):i.button=t._button,i},_buttonEvent:function(){var t=this,e=t._options;Nui.each(t._button,function(n){t._on('click',t.element,'.layer-button-'+n.id,function(i,o){if(!o.hasClass('nui-button-disabled')){var r=n.id,a=n.callback,s='function'==typeof a?a.call(e,t,i,o):null;('confirm'===r&&!0===s||'confirm'!==r&&!1!==s)&&t.destroy()}})})},_stopProp:function(){this._on('click',this.element,function(t){t.stopPropagation()})},_bindTop:function(){var t=this;t._on('click',t.element,function(){t._setzIndex()})},_bindMove:function(){var t,e,n,i,o=this,r=o._options,a=o.element,s=o.constructor,c=a,l=!1;o._on('mousedown',o.head,function(n,i){l=!0,o._setzIndex(),!0===r.isMoveMask&&(c=o._moveMask=$(o._tpl2html('movemask',{skin:r.skin,style:{'z-index':o._zIndex+1,'cursor':'move','position':o._isFixed?'fixed':'absolute'}})).appendTo(o._container),c.css({width:o.data.outerWidth-s._getSize(c,'lr','all'),height:o.data.outerHeight-s._getSize(c,'tb','all'),top:o.data.top,left:o.data.left})),i.css('cursor','move'),t=n.pageX-o.data.left,e=n.pageY-o.data.top,n.stopPropagation()}),o._on('mousemove',Nui.doc,function(a){var s=o._container.outerWidth(),u=o._container.outerHeight();if(l)return n=a.pageX-t,i=a.pageY-e,n<0&&(n=0),i<0&&(i=0),!0===r.isInnerMove&&(n+o.data.outerWidth>s&&(n=s-o.data.outerWidth),i+o.data.outerHeight>u&&(i=u-o.data.outerHeight)),o.data.top=i,o.data.left=n,c.css({top:i,left:n}),!l}),o._on('mouseup',Nui.doc,function(t){l&&(l=!1,o.head.css('cursor','default'),!0===r.isMoveMask&&(a.css(o.data),o._moveMask.remove(),o._moveMask=null),o._callback('Move'),o.data.offsetTop=o.data.top-o._window.scrollTop(),o.data.offsetLeft=o.data.left-o._window.scrollLeft())})},_bindScroll:function(){var t=this;t._options;t._on('scroll',t._window,function(e,n){var i=t.data.offsetTop+t._window.scrollTop(),o=t.data.offsetLeft+t._window.scrollLeft();t.data.top=i,t.data.left=o,t.element.css(t.data),t._callback('Scroll',[e,n,{top:i,left:o}])})},_setzIndex:function(){var t=this,e=t.constructor;t._isTop&&t.element&&(t._isTop=!1,t._zIndex=++e._zIndex,t.element.css('zIndex',t._zIndex),t._setTop())},_setLower:function(t){var e=this,n=e.constructor,i=e._options,o=[];i.under&&(o=o.concat(i.under),o.length&&Nui.each(o,function(e,i){e&&e.element&&e.element.css('z-index',t?isNaN(parseInt(e._options.zIndex))?e._zIndex:e._options.zIndex:n._maskzIndex-1)}))},_setTop:function(){var t=this,e=t.constructor;Nui.each(e.__instances,function(e){e&&e!==t&&!0===e._options.isTop&&(e._isTop=!0)})},_position:function(){var t,e=this,n=e.data,i=e._options.position,o={top:i.top,left:i.left,right:i.right,bottom:i.bottom};return void 0!==o.top&&void 0!==o.bottom&&delete o.bottom,void 0!==o.left&&void 0!==o.right&&delete o.right,Nui.each(o,function(e,i){if(void 0===e)return delete o[i],!0;t=e,'string'==typeof e&&(e?'top'===i||'bottom'===i?'self'===e?t=n.outerHeight:/[\+\-\*\/]/.test(e)&&(t=new Function('var self = '+n.outerHeight+'; return '+e)()):'self'===e?t=n.outerWidth:/[\+\-\*\/]/.test(e)&&(t=new Function('var self = '+n.outerWidth+'; return '+e)()):t=0),o[i]='auto'===t?'auto':parseFloat(t)+'px'}),o},_resize:function(t){var e=this,n=(e.constructor,e._options),i=e.element,o=e._window.outerWidth(),r=e._window.outerHeight(),a=0,s=0;if(e._isFixed||(s=e._window.scrollLeft(),a=e._window.scrollTop()),e._setSize(),n.position){var c=i.css(e._position()).position();Nui.bsie6&&(s=0,a=0),e.data.left=c.left+s,e.data.top=c.top+a}else if('init'===t||!0===n.isCenter){var l=(o-e.data.outerWidth)/2+s,u=(r-e.data.outerHeight)/2+a,f=n.edge>0?n.edge:0;e.data.left=l>0?l:f,e.data.top=u>0?u:f}e.data.offsetTop=e.data.top-e._window.scrollTop(),e.data.offsetLeft=e.data.left-e._window.scrollLeft(),i.css(e.data)},_setSize:function(){var t=this,e=t.constructor,n=t._options,i=t.element,o=n.edge>0?2*n.edge:0,r=t._window.outerWidth()-o,a=t._window.outerHeight()-o,s=n.scrollbar;t._body.css({height:'auto',overflow:'visible'}),i.css({top:'auto',left:'auto',width:'auto',height:'auto'});var c=e._getSize(t._box,'tb','all')+t.head.outerHeight()+e._getSize(t.head,'tb','margin')+e._getSize(t._body,'tb','all')+t.foot.outerHeight()+e._getSize(t.foot,'tb','margin'),l=i.outerWidth();!0!==n.isFull?(n.width>0?l=n.width:('100%'===n.width||!0===n.scrollbar&&l>r)&&(l=r),n.maxWidth>0&&l>=n.maxWidth&&(s=!0,l=n.maxWidth)):l=r;var u='nowrap';(n.width>0||l==n.maxWidth||l==r)&&(u='normal'),t.data.width=l-e._getSize(i,'lr','all'),t.main.css('white-space',u),i.width(t.data.width);var f=i.outerHeight();t._iframeDocument&&(t._iframeDocument[0].layer=t,f=c+t._iframeDocument.find('body').outerHeight()),!0!==n.isFull?(n.height>0?f=n.height:('100%'===n.height||(!0===n.scrollbar||t._iframeDocument)&&f>a)&&(f=a),n.maxHeight>0&&f>=n.maxHeight&&(s=!0,f=n.maxHeight)):f=a,t.data.outerWidth=l,t.data.outerHeight=f,t.data.height=f-e._getSize(i,'tb','all'),i.height(t.data.height);var d=t.data.height-c;t.main.outerHeight()>d&&!t._iframe&&!0===s&&t._body.css('overflow','auto'),t._iframe&&t._iframe.height(d),t._body.height(t.data.contentHeight=d)},_showMask:function(){var t=this,e=t.constructor,n=t._options;t._containerDOM.__layermask__||(t._containerDOM.__layermask__=$(t._tpl2html('mask',{skin:n.skin,style:{'z-index':e._maskzIndex,'position':t._isFixed?'fixed':'absolute','top':'0px','left':'0px','width':'100%','height':t._isFixed?'100%':t._container.outerHeight()+'px'}})).appendTo(t._container)),!0===n.isStopProp&&t._on('click',t._containerDOM.__layermask__,function(t){t.stopPropagation()}),!0===n.isClickMask&&t._on('click',t._containerDOM.__layermask__,function(){t.hide()})},_show:function(){var e=this,n=e._options;return t.init(e.main),e._resize('init'),e._setLower(),!0===n.isMask&&e._showMask(),n.timer>0&&(e._time=n.timer,e._timer()),e._callback('Init'),e},_timer:function(){var t=this;t._options;t._time>0?(t._callback('Timer',[t._time]),t._timerid=setTimeout(function(){t._time-=1e3,t._timer()},t._time>1e3?1e3:t._time)):t.hide()},_reset:function(){var e=this,n=e.constructor,i=!0;t.exports._reset.call(this),t('destroy',e.main),Nui.each(n.__instances,function(t){if(t&&!0===t._options.isMask&&t!==e&&t._containerDOM===e._containerDOM)return i=!1}),i&&e._containerDOM.__layermask__&&(e._containerDOM.__layermask__.remove(),e._containerDOM.__layermask__=null),e._options.timer>0&&(e.timer=0,clearTimeout(e._timerid))},resize:function(){var t=this;t._options,t.element;return t._resize(),t._callback('Resize'),t},hide:function(){if(!0===this._options.isHide){if(!1===this._callback('HideBefore'))return;this.destroy()}},destroy:function(){var t=this,e=t.constructor;t._options;!1!==t._callback('DestroyBefore')&&(t._delete(),t._reset(),t._setLower(!0),t._isdestroy||(e._zIndex--,t._isdestroy=!0),t._callback('Destroy'))}})}),Nui[define]('src/components/layer/confirm',['src/components/layer/layer'],function(t){return function(e,n,i,o,r,a){var s;return'object'==typeof e&&(s=e,e=s.content,delete s.content),t(Nui.extend(!0,{content:'<div style="padding:10px; line-height:20px;">'+(e||'')+'</div>',title:i,width:o,height:r,align:a||'right',button:[{id:'cancel',text:'取消',enable:!0}],confirm:{callback:n||function(){return!0}}},s||{},{confirm:{enable:!0}}))}}),Nui[define]('./script/events/page',['src/core/template','src/core/events','src/components/layer/confirm'],function(t,e,n){e({elem:$('#data'),data:['蔬菜','水果','苹果'],template:this.renders('<%each $list%><li class="e-mt5"><label><input type="checkbox" value="<%$index%>"><span><%$value%></span></label></li><%/each%>'),events:{'click .j-add':'add render','click .j-del':'checks del remove render','click .j-update':'checks update'},checks:function(){var t=[];this.elem.find(':checked');return!!this.elem.find(':checked').length&&(this.elem.find(':checked').each(function(){t.push($(this).val())}),t)},render:function(){this.elem.html(t.render(this.template,this.data))},add:function(t,e,n){this.data.push('自定义')},remove:function(){var t=[];Nui.each(this.data,function(e){void 0!==e&&t.push(e)}),this.data=t},del:function(t,e,n){var i=this;Nui.each(n,function(t){delete i.data[t]})},update:function(t,e,i){var o=this;n('<input type="text" style="border:1px solid #ccc; width:180px; height:24px;" />',function(t,e){var n=Nui.trim(e.main.find('input').val());if(n)return Nui.each(i,function(t){o.data[t]=n}),o.render(),!0},'',210)}}).render()})}('_module_2_define');
//# sourceMappingURL=page-min.js.map?v=4230396