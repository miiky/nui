{"version":3,"sources":["page-debug.js"],"names":["Nui","define","component","util","template","statics","_maskzIndex","_zIndex","_init","_class","this","timer","win","on","clearTimeout","setTimeout","each","__instances","val","opts","_options","position","isCenter","resize","_$fn","_$ready","init","options","content","data","width","height","zIndex","maxWidth","maxHeight","edge","container","title","isMove","isMask","isInnerMove","isClickMask","isMoveMask","isHide","isFull","isTop","isTips","isFixed","scrollbar","isStopProp","align","bubble","enable","dir","iframe","cache","src","close","text","confirm","name","callback","cancel","under","button","onMove","onResize","onScroll","onHideBefore","onDestroyBefore","onTimer","extend","_static","_template","layout","mask","movemask","style","constructor","_exec","self","_container","_jquery","length","_containerDOM","get","tagName","_window","_isWindow","indexOf","css","_isFixed","bsie6","_create","buttons","_createButton","isTitle","_tplData","_getContent","z-index","isNaN","parseInt","display","_setTop","element","_bindComponentName","$","_tpl2html","appendTo","_box","children","head","_body","main","foot","_iframe","_iframeOnload","_bindMove","_stopProp","_bindTop","_button","_buttonEvent","_bindScroll","_event","_show","tpl","_createIframe","render","type","call","jQuery","prop","__id","setParam","Date","getTime","attr","frameborder","id","scroll","load","_iframeDocument","contents","_resize","defaults","caches","add","btn","def","slice","_on","e","hasClass","isCall","destroy","stopPropagation","_setzIndex","x","y","_x","_y","elem","ele","_moveMask","skin","cursor","outerWidth","_getSize","outerHeight","top","left","pageX","pageY","doc","remove","_callback","offsetTop","scrollTop","offsetLeft","scrollLeft","_isTop","_setLower","unders","concat","obj","k","_position","_v","pos","_pos","right","bottom","undefined","v","test","Function","parseFloat","wWidth","wHeight","stop","sleft","_setSize","overflow","edgeSize","ws","layer","find","_height","contentHeight","_showMask","__layermask__","hide","_time","_timer","_timerid","_reset","noMask","exports","_delete","_isdestroy","events","renders","document","click .j-demo","console","log","click .j-position","onInit","animate"],"mappings":"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","file":"page-min.js.map?v=55efc13","sourcesContent":["/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer弹出层\r\n */\r\n\r\nNui.define('src/components/layer/layer',['component', 'util', 'template'], function(component, util, template){\r\n    var module = this;\r\n\r\n    var statics = {\r\n        _maskzIndex:10000,\r\n        _zIndex:10000,\r\n        _init:function(){\r\n            var _class = this;\r\n            var timer = null;\r\n            Nui.win.on('resize', function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    Nui.each(_class.__instances, function(val){\r\n                        var opts = val._options;\r\n                        if(opts.position || opts.isCenter === true){\r\n                            val.resize()\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        },\r\n        _$fn:null,\r\n        _$ready:null,\r\n        init:null\r\n    }\r\n\r\n    var options = {\r\n        //内容\r\n        content:'',\r\n        //内容模版\r\n        template:'',\r\n        //模版数据\r\n        data:{},\r\n        //高度\r\n        width:320,\r\n        //宽度\r\n        height:'auto',\r\n        //弹出层层级\r\n        zIndex:null,\r\n        //最大宽度\r\n        maxWidth:0,\r\n        //最大高度\r\n        maxHeight:0,\r\n        //定时器，N毫秒后自动关闭\r\n        timer:0,\r\n        //弹窗四周距离窗口边缘距离\r\n        edge:0,\r\n        //弹窗容器\r\n        container:'body',\r\n        //弹窗标题\r\n        title:'温馨提示',\r\n        //是否可以拖动\r\n        isMove:false,\r\n        //是否有遮罩\r\n        isMask:true,\r\n        //是否只能在窗口内拖动\r\n        isInnerMove:false,\r\n        //点击遮罩是否关闭弹窗\r\n        isClickMask:false,\r\n        //是否使用遮罩拖动\r\n        isMoveMask:false,\r\n        //是否能用hide方法关闭遮罩\r\n        isHide:true,\r\n        //弹窗是否浏览器改变大小时显示在窗口中央\r\n        isCenter:true,\r\n        //是否全屏显示\r\n        isFull:false,\r\n        //是否在点击弹窗时将其置顶\r\n        isTop:false,\r\n        //是否以提示框展示，没有标题，按钮\r\n        isTips:false,\r\n        //是否拖动滚动条固定位置\r\n        isFixed:true,\r\n        //当内容超过弹出层容器，是否显示滚动条\r\n        scrollbar:true,\r\n        //是否点击弹窗或者点击遮罩层是否阻止事件冒泡\r\n        isStopProp:false,\r\n        //按钮对齐方式\r\n        align:'center',\r\n        //是否以气泡形式展示，弹出层边缘会多出箭头\r\n        bubble:{\r\n            enable:false,\r\n            dir:'top'\r\n        },\r\n        //弹出层内容展示iframe，不建议跨域使用\r\n        iframe:{\r\n            enable:false,\r\n            cache:false,\r\n            src:''\r\n        },\r\n        //关闭按钮\r\n        close:{\r\n            enable:true,\r\n            text:'×'\r\n        },\r\n        //确定按钮\r\n        confirm:{\r\n            enable:false,\r\n            name:'normal',\r\n            text:'确定',\r\n            callback:function(){\r\n                return true\r\n            }\r\n        },\r\n        //取消按钮\r\n        cancel:{\r\n            enable:true,\r\n            text:'取消'\r\n        },\r\n        /*弹出层定位 top/left/right/bottom\r\n        position:{\r\n            top:10,\r\n            left:10\r\n        }\r\n        */\r\n        position:null,\r\n        /*将弹出层置于遮罩层底部\r\n        under:[layer1, layer2]\r\n        */\r\n        under:null,\r\n        /*配置按钮，若id为confirm/cancel/close将会覆盖内置按钮参数\r\n        button:[{\r\n            id:'confirm',\r\n            text:'确定',\r\n            name:'normal',\r\n            callback:function(){\r\n\r\n            }\r\n        }]\r\n        */\r\n        button:null,\r\n        //onInit：弹出层显示时回调\r\n        //onDestroy：弹出层注销时回调\r\n        //当拖动弹出层移动后回调\r\n        onMove:null,\r\n        //窗口改变大小位置时回调\r\n        onResize:null,\r\n        //容器滚动时回调\r\n        onScroll:null,\r\n        //弹窗隐藏前回调，若返回false则不能隐藏\r\n        onHideBefore:null,\r\n        //弹窗销毁前回调，若返回false则不能销毁\r\n        onDestroyBefore:null,\r\n        //定时关闭弹窗回调\r\n        onTimer:null\r\n    }\r\n\r\n    return this.extend(component, {\r\n        _static:statics,\r\n        _options:options,\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\" style=\"<% include \\'style\\' %>\">'+\r\n                    '<div class=\"layer-box\">'+\r\n                        '<%if close%>'+\r\n                            '<% var btn = close %>'+\r\n                            '<% include \"button\" %>'+\r\n                        '<%/if%>'+\r\n                        '<%if bubble%>'+\r\n                        '<span class=\"layer-bubble layer-bubble-<%bubble.dir||\"top\"%>\"'+\r\n                        '<%if bubble.style%>'+\r\n                        ' style=\"<%each bubble.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                        '<%/if%>'+\r\n                        '><b></b><i></i></span>'+\r\n                        '<%/if%>'+\r\n                        '<%if title%>'+\r\n                        '<div class=\"layer-head\">'+\r\n                            '<span class=\"layer-title\"><%title%></span>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                        '<div class=\"layer-body\">'+\r\n                            '<div class=\"layer-main\">'+\r\n                            '<%content%>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<%if button && button.length%>'+\r\n                        '<div class=\"layer-foot\" style=\"text-align:<%align%>\">'+\r\n                        '<div class=\"layer-inner\">'+\r\n                        '<%each button btn%>'+\r\n                            '<%include \"button\"%>'+\r\n                        '<%/each%>'+\r\n                        '</div>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            button:\r\n                '<button class=\"ui-button'+\r\n                    '<%if btn.name%>'+\r\n                    '<%each [].concat(btn.name) name%> ui-button-<%name%><%/each%>'+\r\n                    '<%/if%> layer-button-<%btn.id%>\"'+\r\n                    '<%if btn.style%>'+\r\n                    ' style=\"<%each btn.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                    '<%/if%>><%btn.text || \"按钮\"%></button>',\r\n            iframe:\r\n                '<iframe<%each attr%> <%$index%>=\"<%$value%>\"<%/each%>></iframe>',\r\n            mask:\r\n                '<div class=\"nui-layer-mask'+\r\n                    '<%if skin%> nui-layer-mask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                    '<div class=\"layer-mask\"></div>'+\r\n                '</div>',\r\n            movemask:\r\n                '<div class=\"nui-layer-movemask'+\r\n                    '<%if skin%> nui-layer-movemask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                '</div>',\r\n            style:\r\n                '<%each style%><%$index%>:<%$value%>;<%/each%>'\r\n        },\r\n        /*\r\n        top:弹窗距离窗口顶部距离\r\n        left:弹窗距离窗口左边距离\r\n        width:弹窗宽度\r\n        height:弹窗高度\r\n        */\r\n        data:{},\r\n        _init:function(){\r\n            this._zIndex = ++this.constructor._zIndex;\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._container = _class._jquery(opts.container);\r\n            if(self._container.length){\r\n                self._containerDOM = self._container.get(0);\r\n                if(self._containerDOM.tagName !== 'BODY'){\r\n                    self._window = self._container;\r\n                    self._isWindow = false;\r\n                    var pos = self._container.css('position');\r\n                    if('absolute relative fixed'.indexOf(pos) === -1){\r\n                        self._container.css('position', 'relative')\r\n                    }\r\n                }\r\n                else{\r\n                    self._window = Nui.win;\r\n                    self._isWindow = true;\r\n                }\r\n                self._isFixed = opts.isFixed && !Nui.bsie6 && self._isWindow;\r\n                self._create();\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options;\r\n            var buttons = self._createButton(), isTitle = false;\r\n            if(opts.isTips !== true){\r\n                isTitle = typeof opts.title === 'string';\r\n            }\r\n            var data = self._tplData({\r\n                content:self._getContent(),\r\n                close:buttons.close,\r\n                button:buttons.button,\r\n                title:isTitle ? (opts.title||'温馨提示') : null,\r\n                bubble:opts.bubble.enable === true ? opts.bubble : null,\r\n                align:opts.align || 'center',\r\n                style:{\r\n                    'z-index':isNaN(parseInt(opts.zIndex)) ? self._zIndex : opts.zIndex,\r\n                    'position':'absolute',\r\n                    'display':'block'\r\n                }\r\n            });\r\n            if(self._isFixed){\r\n                data.style.position = 'fixed';\r\n            }\r\n            self._setTop();\r\n            self.element = self._bindComponentName($(self._tpl2html('layout', data)).appendTo(self._container));\r\n            self._box = self.element.children('.layer-box');\r\n\t\t\tself.head = self._box.children('.layer-head');\r\n\t\t\tself._body = self._box.children('.layer-body');\r\n\t\t\tself.main = self._body.children('.layer-main');\r\n\t\t\tself.foot = self._box.children('.layer-foot');\r\n            if(opts.isTips !== true){\r\n                if(opts.iframe.enable === true){\r\n                    self._iframe = self.main.children('iframe');\r\n                    self._iframeOnload()\r\n                }\r\n                if(opts.isMove === true && isTitle){\r\n                    self._bindMove();\r\n                }\r\n                if(opts.isStopProp === true){\r\n                    self._stopProp();\r\n                }\r\n                if(opts.isTop === true){\r\n                    self._bindTop();\r\n                }\r\n            }\r\n            if(self._button.length){\r\n                self._buttonEvent();\r\n            }\r\n            if(opts.isFixed === true && !self._isFixed === true){\r\n                self._bindScroll()\r\n            }\r\n            self._event();\r\n            self._show()\r\n        },\r\n        _getContent:function(){\r\n            var self = this, opts = self._options, content = '', tpl = opts.template;\r\n            if(opts.isTips !== true && opts.iframe.enable === true){\r\n                content = self._createIframe();\r\n            }\r\n            else{\r\n                if(tpl){\r\n                    if(typeof tpl === 'string'){\r\n                        content = template.render(tpl, opts.data)\r\n                    }\r\n                    else if(Nui.type(opts.template, 'Object')){\r\n                        content = template.render.call(tpl, tpl.main, opts.data)\r\n                    }\r\n                }\r\n                else if(typeof opts.content === 'string'){\r\n                    content = opts.content\r\n                }\r\n                else if(opts.content instanceof jQuery){\r\n                    content = opts.content.prop('outerHTML')\r\n                }\r\n            }\r\n            return content\r\n        },\r\n        _createIframe:function(){\r\n            var self = this, opts = self._options, name = 'layer-iframe'+self.__id, src = opts.iframe.src;\r\n            if(opts.iframe.cache === false){\r\n                src = util.setParam('_', new Date().getTime(), src)\r\n            }\r\n            return self._tpl2html('iframe', {\r\n                attr:{\r\n                    frameborder:'0',\r\n                    name:name,\r\n                    id:name,\r\n                    src:src,\r\n                    scroll:'hidden',\r\n                    style:'width:100%;'\r\n                }\r\n            })\r\n        },\r\n        _iframeOnload:function(){\r\n            var self = this;\r\n            self._iframe.load(function(){\r\n                self._iframeDocument = self._iframe.contents();\r\n                self._resize()\r\n            })\r\n        },\r\n        _createButton:function(){\r\n            var self = this, opts = self._options, defaults = {}, buttons = {}, caches = {};\r\n            var add = function(id, btn){\r\n                self._button[id === 'close' ? 'unshift' : 'push'](btn)\r\n            }\r\n            self._button = [];\r\n            if(opts.isTips !== true){\r\n                Nui.each(['close', 'confirm', 'cancel'], function(id){\r\n                    var btn = opts[id];\r\n                    if(btn && btn.enable === true){\r\n                        defaults[id] = {\r\n                            id:id,\r\n                            name:btn.name,\r\n                            style:btn.style,\r\n                            text:btn.text,\r\n                            callback:btn.callback\r\n                        }\r\n                    }\r\n                });\r\n                if(opts.button && opts.button.length){\r\n                    Nui.each(opts.button, function(val){\r\n                        var id = val.id, btn = val, def;\r\n                        if(!caches[id]){\r\n                            caches[id] = true;\r\n                            if(def = defaults[id]){\r\n                                btn = $.extend(true, {}, def, val);\r\n                                delete defaults[id]\r\n                            }\r\n                            add(id, btn)\r\n                        }\r\n                    })\r\n                }\r\n                Nui.each(defaults, function(val, id){\r\n                    add(id, val)\r\n                });\r\n            }\r\n            if(self._button[0] && self._button[0].id === 'close'){\r\n                buttons.close = self._button[0],\r\n                buttons.button = self._button.slice(1);\r\n            }\r\n            else{\r\n                buttons.button = self._button\r\n            }\r\n            return buttons\r\n        },\r\n        _buttonEvent:function(){\r\n            var self = this, opts = self._options;\r\n            Nui.each(self._button, function(val){\r\n                self._on('click', self.element, '.layer-button-'+val.id, function(e, button){\r\n                    if(!button.hasClass('nui-button-disabled')){\r\n                        var id = val.id, callback = val.callback;\r\n                        var isCall = typeof callback === 'function' ? callback.call(opts, self, e, button) : null;\r\n                        if((id === 'confirm' && isCall === true) || (id !== 'confirm' && isCall !== false)){\r\n                            self.destroy()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        _stopProp:function(){\r\n            this._on('click', this.element, function(e){\r\n                e.stopPropagation()\r\n            });\r\n        },\r\n        _bindTop:function(){\r\n            var self = this;\r\n            self._on('click', self.element, function(){\r\n                self._setzIndex();\r\n            });\r\n        },\r\n        _bindMove:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            var _class = self.constructor, elem = element, isMove = false, x, y, _x, _y;\r\n            self._on('mousedown', self.head, function(e, ele){\r\n                isMove = true;\r\n                self._setzIndex();\r\n                if(opts.isMoveMask === true){\r\n                    elem = self._moveMask = $(self._tpl2html('movemask', {\r\n                        skin:opts.skin,\r\n                        style:{\r\n                            'z-index':self._zIndex+1,\r\n                            'cursor':'move',\r\n                            'position':self._isFixed ? 'fixed' : 'absolute'\r\n                        }\r\n                    })).appendTo(self._container);\r\n                    elem.css({\r\n                        width:self.data.outerWidth - _class._getSize(elem, 'lr', 'all'),\r\n                        height:self.data.outerHeight - _class._getSize(elem, 'tb', 'all'),\r\n                        top:self.data.top,\r\n                        left:self.data.left\r\n                    });\r\n                }\r\n                ele.css('cursor','move');\r\n                x = e.pageX - self.data.left;\r\n                y = e.pageY - self.data.top;\r\n                e.stopPropagation();\r\n            });\r\n            self._on('mousemove', Nui.doc, function(e){\r\n                var width = self._container.outerWidth(), height = self._container.outerHeight();\r\n                if(isMove){\r\n                    _x = e.pageX - x;\r\n                    _y = e.pageY - y;\r\n                    _x < 0 && (_x = 0);\r\n                    _y < 0 && (_y = 0);\r\n                    if(opts.isInnerMove === true){\r\n                        _x + self.data.outerWidth > width && (_x = width - self.data.outerWidth);\r\n                        _y + self.data.outerHeight > height && (_y = height - self.data.outerHeight);\r\n                    }\r\n                    self.data.top = _y;\r\n                    self.data.left = _x;\r\n                    elem.css({top:_y, left:_x});\r\n                    return !isMove;\r\n                }\r\n            });\r\n            self._on('mouseup', Nui.doc, function(e){\r\n                if(isMove){\r\n                    isMove = false;\r\n                    self.head.css('cursor','default');\r\n                    if(opts.isMoveMask === true){\r\n                        element.css(self.data);\r\n                        self._moveMask.remove();\r\n                        self._moveMask = null;\r\n                    }\r\n                    self._callback('Move');\r\n                    self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n                    self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n                }\r\n            });\r\n        },\r\n        _bindScroll:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('scroll', self._window, function(e, elem){\r\n                var top = self.data.offsetTop + self._window.scrollTop();\r\n                var left = self.data.offsetLeft + self._window.scrollLeft();\r\n                self.data.top = top;\r\n                self.data.left = left;\r\n                self.element.css(self.data);\r\n                self._callback('Scroll', [e, elem, {top:top, left:left}]);\r\n            })\r\n        },\r\n        //鼠标点击弹出层将弹出层层级设置最大\r\n        _setzIndex:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self._isTop && self.element){\r\n                self._isTop = false;\r\n                self._zIndex = ++_class._zIndex;\r\n                self.element.css('zIndex', self._zIndex);\r\n                self._setTop();\r\n            }\r\n        },\r\n        _setLower:function(destroy){\r\n            var self = this, _class = self.constructor, opts = self._options, unders = [];\r\n            if(opts.under){\r\n                unders = unders.concat(opts.under);\r\n                if(unders.length){\r\n                    Nui.each(unders, function(obj, k){\r\n                        if(obj && obj.element){\r\n                            obj.element.css('z-index', destroy ? (isNaN(parseInt(obj._options.zIndex)) ? obj._zIndex : obj._options.zIndex) : _class._maskzIndex-1)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _setTop:function(){\r\n            var self = this, _class = self.constructor;\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val !== self && val._options.isTop === true){\r\n                    val._isTop = true;\r\n                }\r\n            });\r\n        },\r\n        _position:function(){\r\n            var self = this, data = self.data, pos = self._options.position;\r\n            var _pos = {\r\n                top:pos.top,\r\n                left:pos.left,\r\n                right:pos.right,\r\n                bottom:pos.bottom\r\n            }, _v;\r\n\r\n            if(_pos.top !== undefined && _pos.bottom !== undefined){\r\n                delete _pos.bottom\r\n            }\r\n\r\n            if(_pos.left !== undefined && _pos.right !== undefined){\r\n                delete _pos.right\r\n            }\r\n\r\n            Nui.each(_pos, function(v, k){\r\n                if(v === undefined){\r\n                    delete _pos[k];\r\n                    return true;\r\n                }\r\n                _v = v;\r\n                if(typeof v === 'string'){\r\n                    if(!v){\r\n                        _v = 0\r\n                    }\r\n                    else{\r\n                        if(k === 'top' || k === 'bottom'){\r\n                            if(v === 'self'){\r\n                                _v = data.outerHeight\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerHeight+'; return '+v))()\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(v === 'self'){\r\n                                _v = data.outerWidth\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerWidth+'; return '+v))()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                _pos[k] = _v === 'auto' ? 'auto' : parseFloat(_v)+'px'\r\n            })\r\n\r\n            return _pos\r\n        },\r\n        _resize:function(type){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var wWidth = self._window.outerWidth();\r\n            var wHeight = self._window.outerHeight();\r\n            var stop = 0;\r\n            var sleft = 0;\r\n            if(!self._isFixed){\r\n                sleft = self._window.scrollLeft();\r\n                stop = self._window.scrollTop();\r\n            }\r\n            self._setSize();\r\n            if(opts.position){\r\n                var pos = element.css(self._position()).position();\r\n                if(Nui.bsie6){\r\n                    sleft = 0;\r\n                    stop = 0;\r\n                }\r\n                self.data.left = pos.left + sleft;\r\n                self.data.top = pos.top + stop;\r\n            }\r\n            else{\r\n                if(type === 'init' || opts.isCenter === true){\r\n                    var left = (wWidth - self.data.outerWidth) / 2 + sleft;\r\n                    var top = (wHeight - self.data.outerHeight) / 2 + stop;\r\n                    var edge = opts.edge > 0 ? opts.edge : 0;\r\n                    self.data.left = left > 0 ? left : edge;\r\n                    self.data.top = top > 0 ? top : edge;\r\n                }\r\n            }\r\n            self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n            self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n            element.css(self.data);\r\n        },\r\n        _setSize:function(){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var edge = opts.edge > 0 ? opts.edge*2 : 0;\r\n            var wWidth = self._window.outerWidth() - edge;\r\n            var wHeight = self._window.outerHeight() - edge;\r\n            var scrollbar = opts.scrollbar;\r\n\r\n            self._body.css({height:'auto', overflow:'visible'});\r\n            element.css({top:'auto', left:'auto', width:'auto', height:'auto'});\r\n            \r\n            var edgeSize = _class._getSize(self._box, 'tb', 'all') +\r\n                self.head.outerHeight() + \r\n                _class._getSize(self.head, 'tb', 'margin') + \r\n                _class._getSize(self._body, 'tb', 'all') + \r\n                self.foot.outerHeight() + \r\n                _class._getSize(self.foot, 'tb', 'margin');\r\n\r\n            var width = element.outerWidth();\r\n            if(opts.isFull !== true){\r\n                if(opts.width > 0){\r\n                    width = opts.width\r\n                }\r\n                else if(opts.width === '100%' || (opts.scrollbar === true && width > wWidth)){\r\n                    width = wWidth;\r\n                }\r\n                if(opts.maxWidth > 0 && width >= opts.maxWidth){\r\n                    scrollbar = true;\r\n                    width = opts.maxWidth\r\n                }\r\n            }\r\n            else{\r\n                width = wWidth;\r\n            }\r\n\r\n            var ws = 'nowrap';\r\n            if(opts.width > 0 || width == opts.maxWidth || width == wWidth){\r\n                ws = 'normal';\r\n            }\r\n\r\n            self.data.width = width - _class._getSize(element, 'lr', 'all');\r\n            self.main.css('white-space', ws);\r\n            element.width(self.data.width);\r\n\r\n            var height = element.outerHeight();\r\n            if(self._iframeDocument){\r\n                self._iframeDocument[0].layer = self;\r\n                height = edgeSize + self._iframeDocument.find('body').outerHeight();\r\n            }\r\n\r\n            if(opts.isFull !== true){\r\n                if(opts.height > 0){\r\n                    height = opts.height\r\n                }\r\n                else if(opts.height === '100%' || ((opts.scrollbar === true || self._iframeDocument) && height > wHeight)){\r\n                    height = wHeight\r\n                }\r\n                if(opts.maxHeight > 0 && height >= opts.maxHeight){\r\n                    scrollbar = true;\r\n                    height = opts.maxHeight\r\n                }\r\n            }\r\n            else{\r\n                height = wHeight\r\n            }\r\n\r\n            self.data.outerWidth = width;\r\n            self.data.outerHeight = height;\r\n            self.data.height = height - _class._getSize(element, 'tb', 'all');\r\n            element.height(self.data.height);\r\n            var _height = self.data.height - edgeSize;\r\n\r\n            if(self.main.outerHeight() > _height && !self._iframe && scrollbar === true){\r\n                self._body.css('overflow', 'auto')\r\n            }\r\n            if(self._iframe){\r\n                self._iframe.height(_height);\r\n            }\r\n            self._body.height(self.data.contentHeight = _height)\r\n        },\r\n        _showMask:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(!self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__ = $(self._tpl2html('mask', {\r\n                    skin:opts.skin,\r\n                    style:{\r\n                        'z-index':_class._maskzIndex,\r\n                        'position':self._isFixed ? 'fixed' : 'absolute',\r\n                        'top':'0px',\r\n                        'left':'0px',\r\n                        'width':'100%',\r\n                        'height':self._isFixed ? '100%' : self._container.outerHeight()+'px'\r\n                    }\r\n                })).appendTo(self._container);\r\n            }\r\n            if(opts.isStopProp === true){\r\n                self._on('click', self._containerDOM.__layermask__, function(e){\r\n                    e.stopPropagation()\r\n                })\r\n            }\r\n            if(opts.isClickMask === true){\r\n                self._on('click', self._containerDOM.__layermask__, function(){\r\n                    self.hide()\r\n                })\r\n            }\r\n        },\r\n        _show:function(){\r\n            var self = this, opts = self._options;\r\n            component.init(self.main);\r\n            self._resize('init');\r\n            self._setLower();\r\n            if(opts.isMask === true){\r\n                self._showMask()\r\n            }\r\n            if(opts.timer > 0){\r\n                self._time = opts.timer;\r\n                self._timer();\r\n            }\r\n            self._callback('Init');\r\n            return self\r\n        },\r\n        _timer:function(){\r\n            var self = this, opts = self._options;\r\n            if(self._time > 0){\r\n                self._callback('Timer', [self._time]);\r\n                self._timerid = setTimeout(function(){\r\n                    self._time -= 1000;\r\n                    self._timer();\r\n                }, self._time > 1000 ? 1000 : self._time)\r\n            }\r\n            else{\r\n                self.hide()\r\n            }\r\n        },\r\n        _reset:function(){\r\n            var self = this, _class = self.constructor, noMask = true;\r\n            component.exports._reset.call(this);\r\n            component('destroy', self.main);\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val._options.isMask === true && val !== self && val._containerDOM === self._containerDOM){\r\n                    return (noMask = false);\r\n                }\r\n            });\r\n            if(noMask && self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__.remove();\r\n                self._containerDOM.__layermask__  = null;\r\n            }\r\n            if(self._options.timer > 0){\r\n                self.timer = 0;\r\n                clearTimeout(self._timerid);\r\n            }\r\n        },\r\n        resize:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            self._resize();\r\n            self._callback('Resize');\r\n            return self\r\n        },\r\n        hide:function(){\r\n            if(this._options.isHide === true){\r\n                if(this._callback('HideBefore') === false){\r\n                    return\r\n                }\r\n                this.destroy()\r\n            }\r\n        },\r\n        destroy:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(self._callback('DestroyBefore') === false){\r\n                return\r\n            }\r\n            self._delete();\r\n            self._reset();\r\n            self._setLower(true);\r\n            if(!self._isdestroy){\r\n                _class._zIndex--;\r\n                self._isdestroy = true;\r\n            }\r\n            self._callback('Destroy');\r\n        }\r\n    })\r\n});\nNui.define('./script/page',['src/components/layer/layer', 'events'], function(layer, events){\r\n    var renders = this.renders;\r\n    return events({\r\n        element:document,\r\n        events:{\r\n            'click .j-demo':function(){\r\n                layer({\r\n                    content:'<p style=\"padding:10px; text-align:center;\">hello world</p>',\r\n                    width:280,\r\n                    height:150,\r\n                    cancel:{\r\n                        text:'关闭',\r\n                        callback:function(self){\r\n                            console.log(self)\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            'click .j-position':function(){\r\n                layer({\r\n                    content:renders(''+''\r\n                        +'<div style=\"padding:15px 20px; line-height:20px;\">'+''\r\n                            +'<p>消息标题1</p>'+''\r\n                            +'<p>消息标题2</p>'+''\r\n                            +'<p>消息标题3</p>'+''\r\n                        +'</div>'+''\r\n                    +''),\r\n                    title:'系统消息',\r\n                    width:280,\r\n                    isMask:false,\r\n                    cancel:{\r\n                        enable:false\r\n                    },\r\n                    position:{\r\n                        bottom:'self*-1',\r\n                        right:0\r\n                    },\r\n                    onInit:function(self){\r\n                        this.position.bottom = 0;\r\n                        self.element.animate({top:self.data.top - self.data.outerHeight})\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    })\r\n})\n"]}