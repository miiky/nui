{"version":3,"sources":["page-debug.js"],"names":["define","Nui","opts","self","this","that","constr","constructor","isComponent","__component_name","elem","element","doc","events","_events","call","jQuery","evt","ele","ret","callback","e","cbs","_cb","_that","each","cb","i","evts","trim","split","shift","replace","join","_on","on","regex","mobile","tel","email","idcard","cn","taxnum","toFixed","digit","decimal","number","isNaN","undefined","value","toString","mend","num","zero","pre","indexOf","integer","parseInt","substr","_decimal","Math","round","len","length","getParam","name","urls","url","decodeURI","location","href","startIndex","temp","param","val","setParam","type","key","reg","RegExp","and","supportCss3","style","prefix","humpString","htmlStyle","document","documentElement","_toHumb","string","$0","$1","toUpperCase","push","supportHtml5","attr","createElement","target","appendTo","children","click","end","remove","formatDate","timestamp","format","date","Date","map","M","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","all","single","getFullYear","getData","item","field","data","result","voids","total","arr","serializeArray","find","div","v","isArray","k","once","$","getFocusIndex","index","setSelectionRange","selectionStart","selection","createRange","textRange","createTextRange","setEndPoint","text","isTextSelect","navigator","userAgent","toLowerCase","textArea","activeElement","substring","selectionEnd","window","getSelection","isInstallPDF","flag","browser","webkit","mozilla","version","plugins","test","ActiveXObject","prototype","eval","isInstallFlash","msie","formatNumber","dot","toLocaleString","numberToCN","integerNum","decimalNum","parts","cnNums","Array","cnIntRadice","cnIntUnits","cnDecUnits","chineseStr","isMinus","abs","parseFloat","zeroCount","IntLen","n","p","q","decLen","Number","util","template","tplid","caches","render","getElementById","nodeName","innerHTML","options","openTag","closeTag","methods","isstr","snippet","iscode","code","joinCode","joinSnippet","replaceInclude","tpl","regs","rege","str","tid","tmp","isNode","HTMLElement","obj","nodeType","isDom","$list","compile","variables","Rander","Function","error","dom","out","line","msg","codes","JSON","stringify","message","console","logic","res","match","exists","lastIndexOf","_call","slice","start","trimLeft","isVal","a","b","rep","syntax","regexp","method","config","args","arguments","module","require","extend","callMethod","id","_options","__id","apply","bsie7","blur","statics","__instances","__setMethod","apis","components","methodName","container","mod","nui","_mod","exports","_init","noop","_jquery","_getSize","selector","dir","size","group","l","r","lr","t","tb","border","padding","margin","css","_$fn","fn","object","option","_$ready","init","hasInstance","exist","instances","_static","skin","className","onInit","onReset","onDestroy","_template","_exec","_getTarget","_class","_bindComponentName","_tplData","getName","arrs","__parent","_pclass","_name","unshift","_event","dalegate","trigger","_callback","__eventList","_off","_eventList","off","_delete","removeAttr","_reset","_tpl2html","isOriginal","isdef","isPlainObject","reset","destroy","component","_maskzIndex","_zIndex","timer","win","clearTimeout","setTimeout","position","isCenter","resize","content","width","height","zIndex","maxWidth","maxHeight","edge","title","isMove","isMask","isInnerMove","isClickMask","isMoveMask","isHide","isFull","isTop","isTips","isFixed","scrollbar","isStopProp","align","bubble","enable","iframe","cache","src","close","confirm","cancel","under","button","onMove","onResize","onScroll","onHideBefore","onDestroyBefore","onTimer","layout","mask","movemask","_container","_containerDOM","get","tagName","_window","_isWindow","_isFixed","bsie6","_create","buttons","_createButton","isTitle","_getContent","z-index","display","_setTop","_box","head","_body","main","foot","_iframe","_iframeOnload","_bindMove","_stopProp","_bindTop","_button","_buttonEvent","_bindScroll","_show","_createIframe","prop","getTime","frameborder","scroll","load","_iframeDocument","contents","_resize","defaults","add","btn","def","hasClass","isCall","stopPropagation","_setzIndex","x","y","_x","_y","_moveMask","cursor","outerWidth","outerHeight","top","left","pageX","pageY","offsetTop","scrollTop","offsetLeft","scrollLeft","_isTop","_setLower","unders","concat","_position","_v","pos","_pos","right","bottom","wWidth","wHeight","stop","sleft","_setSize","overflow","edgeSize","ws","layer","_height","contentHeight","_showMask","__layermask__","hide","_time","_timer","_timerid","noMask","_isdestroy","renders","click .j-demo","log","click .j-position","animate"],"mappings":"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","file":"page-min.js.map?v=b3e4b4c","sourcesContent":[";(function(define){\nNui[define]('src/core/events', function(){\r\n    return function(opts){\r\n        var self = this, that = opts || self,\r\n            constr = that.constructor,\r\n            isComponent = constr && constr.__component_name,\r\n            elem = self.element || that.element || Nui.doc, \r\n            events = isComponent ? that._events : that.events;\r\n            \r\n        if(!elem || !events){\r\n            return that\r\n        }\r\n\r\n        if(typeof events === 'function'){\r\n            events = events.call(that)\r\n        }\r\n\r\n        if(!(elem instanceof jQuery)){\r\n            elem = jQuery(elem)\r\n        }\r\n\r\n        var evt, ele, ret;\r\n        var callback = function(e, elem, cbs){\r\n            if(typeof cbs === 'function'){\r\n                cbs.call(that, e, elem);\r\n            }\r\n            else{\r\n                var _cb, _that;\r\n                Nui.each(cbs, function(cb, i){\r\n                    if(typeof (_cb = that[cb]) === 'function'){\r\n                        _that = that;\r\n                    }\r\n                    else if(typeof (_cb = self[cb]) === 'function'){\r\n                        _that = self;\r\n                    }\r\n                    if(_that){\r\n                        return ret = _cb.call(_that, e, elem, ret);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        Nui.each(events, function(cbs, evts){\r\n            if(cbs && (typeof cbs === 'string' || typeof cbs === 'function')){\r\n                if(typeof cbs === 'string'){\r\n                    cbs = Nui.trim(cbs).split(/\\s+/);\r\n                }\r\n                evts = Nui.trim(evts).split(/\\s+/);\r\n                // keyup:kupdown:focus a => elem.on('keyup kupdown focus', 'a', callback)\r\n                evt = evts.shift().replace(/:/g, ' ');\r\n                ele = evts.join(' ');\r\n                //组件内部处理\r\n                if(isComponent){\r\n                    that._on(evt, elem, ele, function(e, elem){\r\n                        callback(e, elem, cbs)\r\n                    })\r\n                }\r\n                else{\r\n                    elem.on(evt, ele, function(e){\r\n                        callback(e, jQuery(this), cbs)\r\n                    })\r\n                }\r\n            }\r\n        })\r\n        return that\r\n    }\r\n})\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 实用工具集\r\n */\r\n\r\nNui[define]('src/core/util', {\r\n    \r\n    /**\r\n     * @func 常用正则表达式\r\n     */\r\n    regex:{\r\n        //手机\r\n        mobile:/^0?(13|14|15|17|18)[0-9]{9}$/,\r\n        //电话\r\n        tel:/^[0-9-()（）]{7,18}$/,\r\n        //邮箱\r\n        email:/^\\w+((-w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/,\r\n        //身份证\r\n        idcard:/^\\d{17}[\\d|x]|\\d{15}$/,\r\n        //中文\r\n        cn:/^[\\u4e00-\\u9fa5]+$/,\r\n        //税号\r\n        taxnum:/^[a-zA-Z0-9]{15,20}$/\r\n    },\r\n\r\n    /**\r\n     * @func 四舍五入保留小数，原生toFixed会有精度问题\r\n     * @return <String>\r\n     * @param digit <String, Number> 待转换数字\r\n     * @param decimal <Number> 保留位数\r\n     * @param number <Number> 小数部分末尾最多显示0的数量\r\n     */\r\n    toFixed:function(digit, decimal, number){\r\n        if(isNaN(digit) || digit === ''){\r\n            return digit\r\n        }\r\n\r\n        //默认末尾只保留2个0\r\n        if(number === undefined){\r\n            number = 2\r\n        }\r\n\r\n        decimal = decimal || 0;\r\n\r\n        //将数字转换为字符串，用于分割\r\n        var value = digit.toString();\r\n\r\n        //补零\r\n        var mend = function(num){\r\n            var zero = '';\r\n            while(num > 0){\r\n                zero += '0';\r\n                num--\r\n            }\r\n            return zero\r\n        }\r\n\r\n        //正负数\r\n        var pre = '';\r\n        if(value < 0){\r\n            value = value.replace('-', '');\r\n            pre = '-';\r\n        }\r\n\r\n        //获取小数点所在位置\r\n        var i = value.indexOf('.');\r\n        //存在小数点\r\n        if(i !== -1 && decimal >= 0){\r\n            var integer = parseInt(value.substr(0, i));\r\n            //小数部分转为0.xxxxx\r\n            var _decimal = '0' + value.substr(i);\r\n            var num = '1' + mend(decimal);\r\n            _decimal = (Math.round(_decimal*num)/num).toFixed(decimal);\r\n            //小数四舍五入后，若大于等于1，整数部分需要加1\r\n            if(_decimal >= 1){\r\n                integer = (integer + 1).toString()\r\n            }\r\n            value = pre + integer + _decimal.substr(1)\r\n        }\r\n        //整数就直接补零\r\n        else if(decimal > 0){\r\n            value = pre + value + '.' + mend(decimal)\r\n        }\r\n\r\n        if(number !== null && number >= 0 && number < decimal){\r\n            value = value.replace(/0+$/, '');\r\n            var i = value.indexOf('.'), len = 0;\r\n            if(i !== -1){\r\n                len = value.substr(i+1).length;\r\n            }\r\n            while(len < number){\r\n                value = value + '0';\r\n                len++;\r\n            }\r\n            value = value.replace(/\\.$/, '');\r\n        }\r\n        \r\n        return value\r\n    },\r\n\r\n    /**\r\n     * @func 获取url参数值\r\n     * @return <String, Object>\r\n     * @param name <String, Undefined> 参数名，不传则以对象形式返回全部参数\r\n     * @param urls <String, Undefined> url地址，默认为当前访问地址\r\n     */\r\n    getParam:function(name, urls){\r\n        var url = decodeURI(urls||location.href), value = {};\r\n        startIndex = url.indexOf('?');\r\n        if(startIndex++ > 0){\r\n            var param = url.substr(startIndex).split('&'), temp;\r\n            Nui.each(param, function(val){\r\n                temp = val.split('=');\r\n                value[temp[0]] = temp[1];\r\n            });\r\n        }\r\n        if(typeof name === 'string' && name){\r\n            value = (temp = value[name]) !== undefined ? temp : '';\r\n        }\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * @func 设置url参数值\r\n     * @return <String> 设置后的url\r\n     * @param name <String, Object> 参数名或者{key:value, ...}参数集合\r\n     * @param value <String> 参数值或者url\r\n     * @param urls <String, Undefined> url，没有则获取浏览器url\r\n     */\r\n    setParam:function(name, value, urls){\r\n        var self = this, url;\r\n        if(Nui.type(name, 'Object')){\r\n            url = value||location.href;\r\n            Nui.each(name, function(val, key){\r\n                if(val || val === 0){\r\n                    url = self.setParam(key, val, url);\r\n                }\r\n            });\r\n        }\r\n        else{\r\n            url = urls||location.href;\r\n            if(url.indexOf('?') === -1){\r\n                url += '?';\r\n            }\r\n            if(url.indexOf(name+'=') !== -1){\r\n                var reg = new RegExp('('+name+'=)[^&]*');\r\n                url = url.replace(reg, '$1'+value);\r\n            }\r\n            else{\r\n                var and = '';\r\n                if(url.indexOf('=') !== -1){\r\n                    and = '&';\r\n                }\r\n                url += and+name+'='+value;\r\n            }\r\n        }\r\n        return url;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持CSS3属性\r\n     * @return <Boolean>\r\n     * @param style <String> 样式属性\r\n     */\r\n    supportCss3:function(style){\r\n        var prefix = ['webkit', 'Moz', 'ms', 'o'],\r\n            i, humpString = [],\r\n            htmlStyle = document.documentElement.style,\r\n            _toHumb = function (string) {\r\n                return string.replace(/-(\\w)/g, function ($0, $1) {\r\n                    return $1.toUpperCase();\r\n                });\r\n            };\r\n        for (i in prefix)\r\n            humpString.push(_toHumb(prefix[i] + '-' + style));\r\n        humpString.push(_toHumb(style));\r\n        for (i in humpString)\r\n            if (humpString[i] in htmlStyle) return true;\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持Html5属性\r\n     * @return <Boolean>\r\n     * @param attr <String> 属性\r\n     * @param element <String> DOM元素标签\r\n     */\r\n    supportHtml5:function(attr, element){\r\n        return attr in document.createElement(element);\r\n    },\r\n\r\n    /**\r\n     * @func 模拟location.href跳转\r\n     * @return <Undefined>\r\n     * @param url <String> 跳转的url\r\n     * @param target <String> 跳转类型，默认为_self\r\n     */\r\n    location:function(url, target){\r\n        if(url){\r\n            jQuery('<a href=\"'+ url +'\"'+ (target ? 'target=\"'+ (target||'_self') +'\"' : '' ) +'><span></span></a>')\r\n                .appendTo('body').children().click().end().remove();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @func 格式化日期\r\n     * @return <String>\r\n     * @param timestamp <String, Number> 时间戳，为空返回横杠“-”\r\n     * @param format <String, Undefined> 输出格式，为空则返回时间戳\r\n     */\r\n    formatDate:function(timestamp, format){\r\n        if(timestamp = parseInt(timestamp)){\r\n            if(!format){\r\n                return timestamp;\r\n            }\r\n            var date = new Date(timestamp);\r\n            var map = {\r\n                'M':date.getMonth()+1,\r\n                'd':date.getDate(),\r\n                'h':date.getHours(),\r\n                'm':date.getMinutes(),\r\n                's':date.getSeconds()\r\n            }\r\n            format = format.replace(/([yMdhms])+/g, function(all, single){\r\n                var value = map[single];\r\n                if(value !== undefined){\r\n                    if(all.length > 1){\r\n                       value = '0' + value;\r\n                       value = value.substr(value.length-2);\r\n                   }\r\n                   return value;\r\n                }\r\n                else if(single === 'y'){\r\n                    return (date.getFullYear() + '').substr(4-all.length);\r\n                }\r\n                return all;\r\n            });\r\n            return format;\r\n        }\r\n        return '-';\r\n    },\r\n\r\n    /**\r\n     * @func 获取表单数据集合\r\n     * @return <Object>\r\n     * @param element <jQuery Object> 表单元素集合或者form元素\r\n     * @param item <String> 将name相同表单元素值分隔，当设置为jquery选择器时，配合field参数使用，用于获取item中表单元素的数据集合\r\n     * @param field <String> 字段名，配合item参数使用，返回对象中会包含该字段\r\n     * @example\r\n     * <form id=\"form\">\r\n     *  <input type=\"hidden\" name=\"name0\" value=\"0\">\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"1\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"2\">\r\n     * </div>\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"3\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"4\">\r\n     * </div>\r\n     * <form>\r\n     * getData($('#form'), 'div', 'list').result => \r\n     * {\r\n     *  name0:'0',\r\n     *  list:[{\r\n     *      name1:'1',\r\n     *      name2:'2'\r\n     *  }, {\r\n     *      name1:'3',\r\n     *      name2:'4'\r\n     *  }]\r\n     * }\r\n     */\r\n    getData:function(element, item, field){\r\n        var that = this;\r\n    \tvar data = {\r\n    \t\t'result':{},\r\n    \t\t'voids':0, //字段中空值数量\r\n            'total':0 //总计多少个字段\r\n        }\r\n        if(element.length){\r\n            var arr = element.serializeArray();\r\n            if(!arr.length){\r\n                arr = element.find('[name]').serializeArray();\r\n            }\r\n            var div = ',';\r\n            if(item && typeof item === 'string' && !field){\r\n                div = item\r\n            }\r\n            Nui.each(arr, function(v, i){\r\n                var val = Nui.trim(v.value)\r\n                data.total++;\r\n                if(!val){\r\n                    data.voids++\r\n                }\r\n                var name = v.name;\r\n                if(!Nui.isArray(data.result[name])){\r\n                    data.result[name] = [];\r\n                }\r\n                data.result[name].push(val)\r\n            })\r\n            Nui.each(data.result, function(v, k){\r\n                data.result[k] = v.join(div)\r\n            })\r\n            if(item && field){\r\n                var once = false;\r\n                data.result[field] = [];\r\n                element.find(item).each(function(){\r\n                    var result = that.getData($(this).find('[name]')).result;\r\n                    if(item !== true && !once){\r\n                        Nui.each(result, function(v, k){\r\n                            delete data.result[k];\r\n                        });\r\n                        once = true\r\n                    }\r\n                    data.result[field].push(result)\r\n                })\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    /**\r\n     * @func 获取输入框内光标位置\r\n     * @return <Number>\r\n     * @param element <DOM Object> 表单元素dom对象\r\n     */\r\n    getFocusIndex:function(element){\r\n        var val = Nui.trim(element.value);\r\n        var index = val.length;\r\n        if(element.setSelectionRange){\r\n            index = element.selectionStart;\r\n        }\r\n        else{\r\n            //ie\r\n            try{\r\n                var temp = document.selection.createRange();\r\n                var textRange = element.createTextRange();\r\n                textRange.setEndPoint('endtoend', temp);\r\n                index = textRange.text.length;\r\n            }\r\n            catch(e){}\r\n        }\r\n        return index;\r\n    },\r\n    /**\r\n     * @func 检测页面是否有文本被选择\r\n     * @return <Boolean>\r\n     */\r\n    isTextSelect:function(){\r\n        var text = '';\r\n        //ie10以及以下浏览器\r\n        if(document.selection){\r\n            text =  document.selection.createRange().text;\r\n        }\r\n        //火狐和ie11浏览器getSelection无法获取表单元素选中文本\r\n        else if(navigator.userAgent.toLowerCase().indexOf('gecko') !== -1){\r\n            var textArea = document.activeElement;\r\n            text = textArea.value.substring(textArea.selectionStart, textArea.selectionEnd);\r\n        }\r\n        //chrome safari opera\r\n        else if(window.getSelection){\r\n            text = window.getSelection().toString();\r\n        }\r\n        //低版本chrome\r\n        else if(document.getSelection){\r\n            text = document.getSelection().toString();\r\n        }\r\n        return !!text;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装PDF阅读器\r\n     * @return <Boolean>\r\n     */\r\n    isInstallPDF:function(){\r\n        var i, len;\r\n\r\n        var flag = true;\r\n\r\n        if(Nui.browser.webkit || (Nui.browser.mozilla && Nui.browser.version > 19)){\r\n            flag = false;\r\n        }\r\n\r\n        if(navigator.plugins && (len = navigator.plugins.length)){\r\n            for(i = 0; i < len; i++){\r\n                if(/Adobe Reader|Adobe PDF|Acrobat|Chrome PDF Viewer/.test(navigator.plugins[i].name)){\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        try{\r\n            if(window.ActiveXObject || window.ActiveXObject.prototype){\r\n                for(i = 1; i < 10; i++){\r\n                    try{\r\n                        if(eval(\"new ActiveXObject('PDF.PdfCtrl.\" + i + \"');\")){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n\r\n                var arr = ['PDF.PdfCtrl', 'AcroPDF.PDF.1', 'FoxitReader.Document', 'Adobe Acrobat', 'Adobe PDF Plug-in'];\r\n                len = arr.length;\r\n                for(i = 0; i < len; i++){\r\n                    try{\r\n                        if(new ActiveXObject(arr[i])){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch(e){}\r\n\r\n        return flag;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装flash，没有安装则返回安装路径\r\n     * @return <Boolean, String>\r\n     */\r\n    isInstallFlash:function(){\r\n        if(typeof window.ActiveXObject != 'undefined'){\r\n            try{\r\n                if(!!new ActiveXObject('ShockwaveFlash.ShockwaveFlash')){\r\n                    return false\r\n                }\r\n            }\r\n            catch(e){}\r\n        }\r\n        else{\r\n            if(!!navigator.plugins['Shockwave Flash']){\r\n                return false\r\n            }\r\n        }\r\n        if(Nui.browser.msie){\r\n            return 'http://rj.baidu.com/soft/detail/17153.html'\r\n        }\r\n        else{\r\n            return 'http://rj.baidu.com/soft/detail/15432.html'\r\n        }\r\n    },\r\n    /**\r\n     * @func 将数字转换为逗号千分位分隔\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    formatNumber:function(number){\r\n        var integer = parseInt(number);\r\n        if(!isNaN(integer) && integer && (number = number.toString())){\r\n            var dot = number.indexOf('.');\r\n            var decimal = '';\r\n            if(dot > 0){\r\n                decimal = number.substr(dot);\r\n            }\r\n            return integer.toLocaleString().replace(/\\.\\d+$/, '') + decimal\r\n        }\r\n        return number\r\n    },\r\n    /**\r\n     * @func 将数字转换为中文大写\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    numberToCN:function(number){\r\n        //汉字的数字\r\n        var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');\r\n        //基本单位\r\n        var cnIntRadice = new Array('', '拾', '佰', '仟');\r\n        //对应整数部分扩展单位\r\n        var cnIntUnits = new Array('', '万', '亿', '兆');\r\n        //对应小数部分单位\r\n        var cnDecUnits = new Array('角', '分', '毫', '厘');\r\n        //整数金额时后面跟的字符\r\n        var cnInteger = '整';\r\n        //整型完以后的单位\r\n        var cnIntLast = '元';\r\n        //最大处理的数字\r\n        var maxNum = 999999999999999.9999;\r\n        //金额整数部分\r\n        var integerNum;\r\n        //金额小数部分\r\n        var decimalNum;\r\n        //输出的中文金额字符串\r\n        var chineseStr = '';\r\n        //分离金额后用的数组，预定义\r\n        var parts;\r\n        if (number == '') { return ''; }\r\n        var isMinus = number < 0;\r\n        number = Math.abs(parseFloat(number));\r\n        if (number >= maxNum) {\r\n            //超出最大处理数字\r\n            return '';\r\n        }\r\n        if (number == 0) {\r\n            chineseStr = cnNums[0] + cnIntLast + cnInteger;\r\n            return chineseStr;\r\n        }\r\n        //转换为字符串\r\n        number = number.toString();\r\n        if (number.indexOf('.') == -1) {\r\n            integerNum = number;\r\n            decimalNum = '';\r\n        } else {\r\n            parts = number.split('.');\r\n            integerNum = parts[0];\r\n            decimalNum = parts[1].substr(0, 4);\r\n        }\r\n        //获取整型部分转换\r\n        if (parseInt(integerNum, 10) > 0) {\r\n            var zeroCount = 0;\r\n            var IntLen = integerNum.length;\r\n            for (var i = 0; i < IntLen; i++) {\r\n            var n = integerNum.substr(i, 1);\r\n            var p = IntLen - i - 1;\r\n            var q = p / 4;\r\n            var m = p % 4;\r\n            if (n == '0') {\r\n                zeroCount++;\r\n            } else {\r\n                if (zeroCount > 0) {\r\n                chineseStr += cnNums[0];\r\n                }\r\n                //归零\r\n                zeroCount = 0;\r\n                chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];\r\n            }\r\n            if (m == 0 && zeroCount < 4) {\r\n                chineseStr += cnIntUnits[q];\r\n            }\r\n            }\r\n            chineseStr += cnIntLast;\r\n        }\r\n        //小数部分\r\n        if (decimalNum != '') {\r\n            var decLen = decimalNum.length;\r\n            for (var i = 0; i < decLen; i++) {\r\n            var n = decimalNum.substr(i, 1);\r\n            if (n != '0') {\r\n                chineseStr += cnNums[Number(n)] + cnDecUnits[i];\r\n            }\r\n            }\r\n        }\r\n        if (chineseStr == '') {\r\n            chineseStr += cnNums[0] + cnIntLast + cnInteger;\r\n        } else if (decimalNum == '') {\r\n            chineseStr += cnInteger;\r\n        }\r\n        if(isMinus){\r\n            chineseStr = '负' + chineseStr\r\n        }\r\n        return chineseStr;\r\n    }\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 模版引擎\r\n */\r\n\r\nNui[define]('src/core/template', ['src/core/util'], function(util){\r\n\r\n    var template = function(tplid, data, opts){\r\n        if(this.tplid = tplid){\r\n            if(caches[tplid]){\r\n                return render.call(this, caches[tplid], data, opts)\r\n            }\r\n            var ele = document.getElementById(tplid);\r\n            if(ele && ele.nodeName==='SCRIPT' && ele.type === 'text/html'){\r\n                return render.call(this, caches[tplid] = ele.innerHTML, data, opts)\r\n            }\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var caches = {};\r\n\r\n    var options = {\r\n        openTag:'<%',\r\n        closeTag:'%>'\r\n    }\r\n\r\n    var methods = {\r\n        trim:Nui.trim,\r\n        formatDate:util.formatDate,\r\n        formatNumber:util.formatNumber,\r\n        setParam:util.setParam,\r\n        toFixed:util.toFixed,\r\n        numberToCN:util.numberToCN\r\n    }\r\n\r\n    var isstr = !!''.trim;\r\n\r\n    var snippet = ';$that.out = function(){return $that.code';\r\n\r\n    //低版本IE用push拼接字符串效率更高\r\n    snippet = (isstr ? '\"\"'+snippet : '[]'+snippet+'.join(\"\")')+'}';\r\n\r\n    var join = function(iscode){\r\n        if(isstr){\r\n            if(iscode){\r\n                return function(code){\r\n                    return '$that.code += '+code+';'\r\n                }\r\n            }\r\n            return function(code, snippet){\r\n                return code += snippet\r\n            }\r\n        }\r\n        if(iscode){\r\n            return function(code){\r\n                return '$that.code.push('+code+');'\r\n            }\r\n        }\r\n        return function(code, snippet){\r\n            code.push(snippet);\r\n            return code\r\n        }\r\n    }\r\n\r\n    var joinCode = join(true);\r\n\r\n    var joinSnippet = join();\r\n\r\n    var replaceInclude = function(tpl, openTag, closeTag, opts){\r\n        var that = this;\r\n        var regs = openTag.replace(/([^\\s])/g, '\\\\$1');\r\n        var rege = closeTag.replace(/([^\\s])/g, '\\\\$1');\r\n        return tpl.replace(new RegExp(regs+'\\\\s*include\\\\s+[\\'\\\"]([^\\'\\\"]*)[\\'\\\"]\\\\s*'+rege, 'g'), function(str, tid){\r\n            if(tid){\r\n                var tmp = that[tid];\r\n                if(typeof tmp === 'function'){\r\n                    tmp = tmp();\r\n                }\r\n                if(typeof tmp === 'string'){\r\n                    return render.call(that, tmp, null, opts)\r\n                }\r\n                else{\r\n                    return template(tid, null, opts)\r\n                }\r\n            }\r\n            return ''\r\n        })\r\n    }\r\n\r\n    //部分浏览器中表单对象name属性如果和模版中需要使用的变量重名，而这个变量又不存在，返回值就会变成该dom....\r\n    var isNode = typeof HTMLElement === 'object' ? \r\n    function(obj){\r\n        return obj instanceof HTMLElement;\r\n    } : \r\n    function(obj){\r\n        return obj.nodeType === 1 && typeof obj.nodeName === 'string';\r\n    };\r\n    var isDom = function(obj){\r\n        if(obj && typeof obj === 'object'){\r\n            //元素集合\r\n            var ele = obj[0];\r\n            if(ele){\r\n                return isNode(ele)\r\n            }\r\n            //元素\r\n            return isNode(obj)\r\n        }\r\n    }\r\n\r\n    var render = function(tpl, data, opts){\r\n        var that = this;\r\n        if(typeof tpl === 'string'){\r\n            opts = opts || {};\r\n            var openTag = opts.openTag || options.openTag, closeTag = opts.closeTag || options.closeTag;\r\n            tpl = replaceInclude.call(that, tpl, openTag, closeTag);\r\n            if(data && typeof data === 'object'){\r\n                if(Nui.isArray(data)){\r\n                    data = {\r\n                        $list:data\r\n                    }\r\n                }\r\n                var code = isstr ? '' : [];\r\n                tpl = tpl.replace(/\\s+/g, ' ');\r\n                Nui.each(tpl.split(openTag), function(val, key){\r\n                    val = val.split(closeTag);\r\n                    if(key >= 1){\r\n                        code = joinSnippet(code, compile(Nui.trim(val[0]), true))\r\n                    }\r\n                    else{\r\n                        val[1] = val[0];\r\n                    }\r\n                    code = joinSnippet(code, compile(val[1].replace(/'/g, \"\\\\'\").replace(/\"/g, '\\\\\"')))\r\n                });\r\n\r\n                var variables = isstr ? '' : [];\r\n\r\n                for(var k in data){\r\n                    variables = joinSnippet(variables, k+'=$data.'+k+',')\r\n                }\r\n\r\n                if(!isstr){\r\n                    code = code.join('');\r\n                    variables = variables.join('');\r\n                }\r\n\r\n                code = 'var '+ variables +'$that=this,$method=$that.methods; $that.line=4; $that.code='+ snippet +';\\ntry{\\n' + code + ';}\\ncatch(e){\\n$that.error(e, $that.line)\\n};';\r\n                \r\n                try{\r\n                    var Rander = new Function('$data', code);\r\n                    Rander.prototype.methods = methods;\r\n                    Rander.prototype.error = error(code, data, that.tplid);\r\n                    Rander.prototype.dom = isDom;\r\n                    tpl = new Rander(data).out();\r\n                    Rander = null\r\n                }\r\n                catch(e){\r\n                    error(code, data, that.tplid)(e)\r\n                }\r\n                \r\n            }\r\n            return tpl\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var error = function(code, data, tplid){\r\n        return function(e, line){\r\n            var msg = '\\n';\r\n            var codes = [];\r\n            code = 'function anonymous($data){\\n'+code+'\\n}';\r\n            code = code.split('\\n');\r\n            Nui.each(code, function(v, k){\r\n                codes.push((k+1)+ '      ' +v.replace('$that.line++;', ''))\r\n            })\r\n            msg += 'code\\n';\r\n            msg += codes.join('\\n')+'\\n\\n';\r\n            if(typeof JSON !== undefined){\r\n                msg += 'data\\n';\r\n                msg += JSON.stringify(data)+'\\n\\n'\r\n            }\r\n            if(tplid){\r\n                msg += 'templateid\\n';\r\n                msg += tplid+'\\n\\n'\r\n            }\r\n            if(line){\r\n                msg += 'line\\n';\r\n                msg += line+'\\n\\n'\r\n            }\r\n            msg += 'message\\n';\r\n            msg += e.message;\r\n            console.error(msg)\r\n        }\r\n    }\r\n\r\n    var compile = function(tpl, logic){\r\n        if(!tpl){\r\n            return ''\r\n        }\r\n        var code,res;\r\n        if(logic){\r\n            if((res = match(tpl, 'if')) !== undefined){\r\n                code = 'if('+exists(res)+'){'\r\n            }\r\n            else if((res = match(tpl, 'elseif')) !== undefined){\r\n                code = '\\n}\\nelse if('+exists(res)+'){'\r\n            }\r\n            else if(tpl === 'else'){\r\n                code = '\\n}\\nelse{'\r\n            }\r\n            else if(tpl === '/if'){\r\n                code = '}'\r\n            }\r\n            else if((res = match(tpl, 'each ', /\\s+/)) !== undefined){\r\n                code = 'Nui.each('+ res[0] +', function('+(res[1]||'$value')+','+(res[2]||'$index')+'){'\r\n            }\r\n            else if(tpl === '/each'){\r\n                code = '});'\r\n            }\r\n            else if((res = match(tpl, ' | ', /\\s*,\\s*/)) !== undefined){\r\n                var str = res[0];\r\n                var i = str.lastIndexOf('(');\r\n                var _call = '(' +exists(res.slice(1).toString()) +')';\r\n                //赋值操作必须要用括号包裹起来\r\n                if(i !== -1){\r\n                    var start = str.substr(0, i);\r\n                    var end = Nui.trimLeft(str.substr(i+1));\r\n                    code = joinCode(start+'($that.methods.' + end + _call)\r\n                }\r\n                else{\r\n                    code = joinCode('$that.methods.'+ str + _call)\r\n                }\r\n            }\r\n            else if(/^(var|let|const|return|delete)\\s+/.test(tpl)){\r\n                code = exists(tpl)+';'\r\n            }\r\n            else{\r\n                code = joinCode(exists(tpl, true))\r\n            }\r\n        }\r\n        else{\r\n            code = joinCode('\\''+tpl+'\\'')\r\n        }\r\n        return code + '\\n' + '$that.line++;'\r\n    }\r\n\r\n    //判断变量是否存在\r\n    //a.b??  a[b]??  a['b']??  a[b['c']]??\r\n    var exists = function(code, isVal){\r\n        return code.replace(/([\\.\\$\\w]+\\s*(\\[[\\'\\\"\\[\\]\\w\\.\\$\\s]+\\])?)\\?\\?/g, function(a, b){\r\n            var rep = '(typeof '+ b + '!==\"undefined\"&&'+ b +'!==null&&'+ b +'!==undefined&&!$that.dom('+ b +')';\r\n            if(isVal){\r\n                rep += '?' + b + ':' + '\"\"';\r\n            }\r\n            return rep + ')'\r\n        })\r\n    }\r\n\r\n    var match = function(str, syntax, regexp){\r\n        var replace;\r\n        if(str.indexOf(syntax) === 0){\r\n            replace = ''\r\n        }\r\n        else if(syntax === ' | ' && str.indexOf(syntax) > 0){\r\n            replace = ','\r\n        }\r\n        if(replace !== undefined){\r\n            str = Nui.trimLeft(str.replace(syntax, replace));\r\n            return regexp ? str.split(regexp) : str\r\n        }\r\n    }\r\n\r\n    template.method = function(name, callback){\r\n        if(!methods[name]){\r\n            methods[name] = callback\r\n        }\r\n    }\r\n\r\n    template.config = function(){\r\n        var args = arguments;\r\n        if(Nui.type(args[0], 'Object')){\r\n            Nui.each(args[0], function(v, k){\r\n                options[k] = v\r\n            })\r\n        }\r\n        else if(args.length > 1 && typeof args[0] === 'string'){\r\n            options[args[0]] = args[1]\r\n        }\r\n    }\r\n\r\n    template.render = render;\r\n\r\n    return template\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 组件基类\r\n */\r\n\r\nNui[define]('src/core/component', ['src/core/template', 'src/core/events'], function(tpl, events){\r\n    var module = this;\r\n    var require = this.require;\r\n    var extend = this.extend;\r\n    var callMethod = function(method, args, obj){\r\n        //实参大于形参，最后一个实参表示id\r\n        if(args.length > method.length){\r\n            var id = args[args.length-1];\r\n            if(id && Nui.type(id, ['String', 'Number']) && obj._options.id !== id && obj.__id !== id){\r\n                return\r\n            }\r\n        }\r\n        method.apply(obj, args)\r\n    }\r\n    //去除IE67按钮点击黑边\r\n    if(Nui.bsie7){\r\n        Nui.doc.on('focus', 'button, input[type=\"button\"]', function(){\r\n            this.blur()\r\n        })\r\n    }\r\n    /**\r\n     * 单和双下划线开头表示私有方法或者属性，只能在内部使用，\r\n     * 单下划线继承后可重写或修改，双下划线为系统预置无法修改\r\n     * 系统预置属性方法：__id, __instances, __eventList, __parent, __component_name, __setMethod\r\n     */\r\n    var statics = {\r\n        //实例对象唯一标记\r\n        __id:0,\r\n        //实例对象容器\r\n        __instances:{},\r\n        /*\r\n        * 将实例方法接口设置为静态方法，这样可以操作多个实例，\r\n        * 默认有 init, option, reset, destroy\r\n        * init表示初始化组件，会查询容器内包含属性为 data-组件名-options的dom元素，并调用组件\r\n        */\r\n        __setMethod:function(apis, components){\r\n            var self = this;\r\n            Nui.each(apis, function(val, methodName){\r\n                if(self[methodName] === undefined){\r\n                    self[methodName] = function(){\r\n                        var self = this, args = arguments, container = args[0], name = self.__component_name;\r\n                        if(name && name !== 'component'){\r\n                            if(container && container instanceof jQuery){\r\n                                if(methodName === 'init'){\r\n                                    var mod = components[name];\r\n                                    if(mod){\r\n                                        container.find('[data-'+name+'-options]').each(function(){\r\n                                            //不能重复调用\r\n                                            if(this.nui && this.nui[name]){\r\n                                                return\r\n                                            }\r\n                                            var elem = jQuery(this);\r\n                                            var options = elem.data(name+'Options');\r\n                                            var _mod;\r\n                                            if(options && typeof options === 'string'){\r\n                                                if(/^{[\\s\\S]*}$/.test(options)){\r\n                                                    options = eval('('+ options +')');\r\n                                                }\r\n                                                else if(_mod = require(options, true)){\r\n                                                    if(typeof _mod.exports === 'function'){\r\n                                                        options = _mod.exports(elem)\r\n                                                    }\r\n                                                    else{\r\n                                                        options = _mod.exports;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            if(typeof options !== 'object'){\r\n                                                options = {};\r\n                                            }\r\n                                            mod(extend(options, {\r\n                                                target:elem\r\n                                            }))\r\n                                        })\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    container.find('[nui_component_'+ name +']').each(function(){\r\n                                        var obj, method;\r\n                                        if(this.nui && (obj = this.nui[name]) && typeof (method = obj[methodName]) === 'function'){\r\n                                            callMethod(method, Array.prototype.slice.call(args, 1), obj)\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                            else{\r\n                                Nui.each(self.__instances, function(obj){\r\n                                    var method = obj[methodName];\r\n                                    if(typeof method === 'function'){\r\n                                        callMethod(method, args, obj)\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                        else{\r\n                            Nui.each(components, function(v, k){\r\n                                if(k !== 'component' && typeof v[methodName] === 'function'){\r\n                                    v[methodName].apply(v, args)\r\n                                }\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return self\r\n        },\r\n        //对所有实例设置默认选项\r\n        _options:{},\r\n        //创建组件模块时会调用一次，可用于在document上绑定事件操作实例\r\n        _init:jQuery.noop,\r\n        _jquery:function(elem){\r\n            if(elem instanceof jQuery){\r\n                return elem\r\n            }\r\n            return jQuery(elem)\r\n        },\r\n        _getSize:function(selector, dir, attr){\r\n            var size = 0;\r\n            attr = attr || 'border';\r\n            dir = dir || 'tb';\r\n            if(attr === 'all'){\r\n                return (this._getSize(selector, dir) + \r\n                        this._getSize(selector, dir, 'padding') +\r\n                        this._getSize(selector, dir, 'margin'))\r\n            }\r\n            var group = {\r\n                l:['Left'],\r\n                r:['Right'],\r\n                lr:['Left', 'Right'],\r\n                t:['Top'],\r\n                b:['Bottom'],\r\n                tb:['Top', 'Bottom']\r\n            }\r\n            var arr = [{\r\n                border:{\r\n                    l:['LeftWidth'],\r\n                    r:['RightWidth'],\r\n                    lr:['LeftWidth', 'RightWidth'],\r\n                    t:['TopWidth'],\r\n                    b:['BottomWidth'],\r\n                    tb:['TopWidth', 'BottomWidth']\r\n                }\r\n            }, {\r\n                padding:group\r\n            }, {\r\n                margin:group\r\n            }];\r\n            Nui.each(arr, function(val){\r\n                if(val[attr]){\r\n                    Nui.each(val[attr][dir], function(v){\r\n                        var value = parseFloat(selector.css(attr+v));\r\n                        size += isNaN(value) ? 0 : value\r\n                    });\r\n                }\r\n            });\r\n            return size\r\n        },\r\n        _$fn:function(name, mod){\r\n            jQuery.fn[name] = function(){\r\n                var args = arguments;\r\n                var options = args[0];\r\n                return this.each(function(){\r\n                    if(typeof options !== 'string'){\r\n                        if(Nui.type(options, 'Object')){\r\n                            options.target = this\r\n                        }\r\n                        else{\r\n                            options = {\r\n                                target:this\r\n                            }\r\n                        }\r\n                        mod(options);\r\n                    }\r\n                    else if(options){\r\n                        var object;\r\n                        if(this.nui && (object=this.nui[name]) && options.indexOf('_') !== 0){\r\n                            if(options === 'options'){\r\n                                object.option(args[1], args[2])\r\n                            }\r\n                            else{\r\n                                var attr = object[options];\r\n                                if(typeof attr === 'function'){\r\n                                    attr.apply(object, Array.prototype.slice.call(args, 1))\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        _$ready:function(name, mod){\r\n            if(typeof this.init === 'function'){\r\n                this.init(Nui.doc)\r\n            }\r\n        },\r\n        config:function(){\r\n            var args = arguments;\r\n            var len = args.length;\r\n            var attr = args[0];\r\n            if(Nui.type(attr, 'Object')){\r\n                return this._options = jQuery.extend(true, this._options, attr)\r\n            }\r\n            else if(Nui.type(attr, 'String')){\r\n                if(args.length === 1){\r\n                    return this._options[attr]\r\n                }\r\n                return this._options[attr] = args[1]\r\n            }\r\n        },\r\n        hasInstance:function(id){\r\n            var exist = false;\r\n            var instances = this.__instances;\r\n            if(id){\r\n                Nui.each(instances, function(v){\r\n                    if(v._options.id === id){\r\n                        exist = true;\r\n                        return false\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                for(i in instances){\r\n                    return true\r\n                }\r\n            }\r\n            return exist\r\n        }\r\n    }\r\n\r\n    return ({\r\n        _static:statics,\r\n        _options:{\r\n            target:null,\r\n            //组件id，element会增加class 组件名-组件id\r\n            id:'',\r\n            //组件皮肤，element会增加class nui-组件名-皮肤名\r\n            skin:'',\r\n            //element增加一个或多个类\r\n            className:'',\r\n            onInit:null,\r\n            onReset:null,\r\n            onDestroy:null\r\n        },\r\n        _template:{},\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:jQuery.noop,\r\n        _getTarget:function(){\r\n            var self = this;\r\n            if(!self.target){\r\n                var target = self._options.target;\r\n                var _class = self.constructor;\r\n                if(!target){\r\n                    return null\r\n                }\r\n                target = _class._jquery(target);\r\n                self.target = self._bindComponentName(target);\r\n            }\r\n            return self.target\r\n        },\r\n        _bindComponentName:function(element){\r\n            var self = this, _class = self.constructor;\r\n            var attr = 'nui_component_'+_class.__component_name;\r\n            element.attr(attr, '').each(function(){\r\n                if(!this.nui){\r\n                    this.nui = {};\r\n                }\r\n                this.nui[_class.__component_name] = self\r\n            })\r\n            return element\r\n        },\r\n        _tplData:function(data){\r\n            var opts = this._options, \r\n                _class = this.constructor,\r\n                name = 'nui-' + _class.__component_name, \r\n                skin = Nui.trim(opts.skin),\r\n                getName = function(_class, arrs){\r\n                    if(_class.__parent){\r\n                        var _pclass = _class.__parent.constructor;\r\n                        var _name = _pclass.__component_name;\r\n                        if(_name !== 'component'){\r\n                            if(skin){\r\n                                arrs.unshift('nui-'+_name+'-'+skin);\r\n                            }\r\n                            arrs.unshift('nui-'+_name);\r\n                            return getName(_pclass, arrs)\r\n                        }\r\n                    }\r\n                    return arrs\r\n                }, className = getName(_class, []);\r\n\r\n            className.push(name);\r\n            if(skin){\r\n                className.push(name+'-'+skin)\r\n            }\r\n            if(opts.id){\r\n                className.push(_class.__component_name + '-' + opts.id)\r\n            }\r\n            if(!data){\r\n                data = {}\r\n            }\r\n            if(opts.className){\r\n                className.push(opts.className)\r\n            }\r\n            data.className = className.join(' ');\r\n            return data\r\n        },\r\n        _event:function(){\r\n            var self = this, opts = self._options;\r\n            if(self.element && opts.events){\r\n                opts.element = self.element;\r\n                events.call(self, opts)\r\n            }\r\n            return events.call(self)\r\n        },\r\n        _on:function(type, dalegate, selector, callback, trigger){\r\n            var self = this;\r\n            if(typeof selector === 'function'){\r\n                trigger = callback;\r\n                callback = selector;\r\n                selector = dalegate;\r\n                dalegate = null;\r\n                selector = self.constructor._jquery(selector)\r\n            }\r\n\r\n            var _callback = function(e){\r\n                return callback.call(this, e, jQuery(this))\r\n            }\r\n\r\n            if(dalegate){\r\n                if(typeof selector !== 'string'){\r\n                    selector = selector.selector;\r\n                    if(!selector){\r\n                        selector = self._options.target\r\n                    }\r\n                }\r\n                dalegate.on(type, selector, _callback);\r\n                if(trigger){\r\n                    dalegate.find(selector).trigger(type)\r\n                }\r\n            }\r\n            else{\r\n                selector.on(type, _callback);\r\n                if(trigger){\r\n                    selector.trigger(type)\r\n                }\r\n            }\r\n\r\n            self.__eventList.push({\r\n                dalegate:dalegate,\r\n                selector:selector,\r\n                type:type,\r\n                callback:_callback\r\n            });\r\n\r\n            return self\r\n        },\r\n        _off:function(){\r\n            var self = this, _eventList = self.__eventList;\r\n            Nui.each(_eventList, function(val, key){\r\n                if(val.dalegate){\r\n                    val.dalegate.off(val.type, val.selector, val.callback)\r\n                }\r\n                else{\r\n                    val.selector.off(val.type, val.callback)\r\n                }\r\n                _eventList[key] = null;\r\n                delete _eventList[key]\r\n            });\r\n            self.__eventList = [];\r\n            return self\r\n        },\r\n        _delete:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self.target){\r\n                var attr = 'nui_component_'+_class.__component_name;\r\n                self.target.removeAttr(attr).each(function(){\r\n                    if(this.nui){\r\n                        this.nui[_class.__component_name] = null;\r\n                        delete this.nui[_class.__component_name];\r\n                    }\r\n                })\r\n            }\r\n            _class.__instances[self.__id] = null;\r\n            delete _class.__instances[self.__id]\r\n        },\r\n        _reset:function(){\r\n            this._off();\r\n            if(this.element){\r\n                this.element.remove();\r\n                this.element = null;\r\n            }\r\n            return this\r\n        },\r\n        _tpl2html:function(id, data){\r\n            var opts = {\r\n                openTag:'<%',\r\n                closeTag:'%>'\r\n            }\r\n            if(arguments.length === 1){\r\n                return tpl.render(this._template, id, opts)\r\n            }\r\n            return tpl.render.call(this._template, this._template[id], data, opts)\r\n        },\r\n        _callback:function(method, args){\r\n            var self = this, opts = self._options;\r\n            var callback = opts['on'+method];\r\n            if(typeof callback === 'function'){\r\n                if(args){\r\n                    Array.prototype.unshift.call(args, self);\r\n                    return callback.apply(opts, args);\r\n                }\r\n                return callback.call(opts, self)\r\n            }\r\n        },\r\n        option:function(opts, isOriginal){\r\n            var args = arguments;\r\n            var isdef = false;\r\n            var options;\r\n            if(args[0] === true){\r\n                isdef = true\r\n            }\r\n            else if(jQuery.isPlainObject(args[0])){\r\n                options = args[0]\r\n                isdef = args[1]\r\n            }\r\n            else if(args.length > 1 && typeof args[0] === 'string'){\r\n                options = {};\r\n                options[args[0]] = args[1]\r\n                isdef = args[2]\r\n            }\r\n            if(options||isdef){\r\n                this._options = jQuery.extend(true, {}, this[isdef === true ? '_defaultOptions' : '_options'], options)\r\n                this._reset();\r\n                this._exec();\r\n            }\r\n            return this\r\n        },\r\n        reset:function(){\r\n            this.option(true);\r\n            this._callback('Reset');\r\n            return this;\r\n        },\r\n        destroy:function(){\r\n            this._delete();\r\n            this._reset();\r\n            this._callback('Destroy');\r\n        }\r\n    })\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description layer弹出层\r\n */\r\n\r\nNui[define]('src/components/layer/layer',['src/core/component', 'src/core/util', 'src/core/template'], function(component, util, template){\r\n    var module = this;\r\n\r\n    var statics = {\r\n        _maskzIndex:10000,\r\n        _zIndex:10000,\r\n        _init:function(){\r\n            var _class = this;\r\n            var timer = null;\r\n            Nui.win.on('resize', function(){\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    Nui.each(_class.__instances, function(val){\r\n                        var opts = val._options;\r\n                        if(opts.position || opts.isCenter === true){\r\n                            val.resize()\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        },\r\n        _$fn:null,\r\n        _$ready:null,\r\n        init:null\r\n    }\r\n\r\n    var options = {\r\n        //内容\r\n        content:'',\r\n        //内容模版\r\n        template:'',\r\n        //模版数据\r\n        data:{},\r\n        //高度\r\n        width:320,\r\n        //宽度\r\n        height:'auto',\r\n        //弹出层层级\r\n        zIndex:null,\r\n        //最大宽度\r\n        maxWidth:0,\r\n        //最大高度\r\n        maxHeight:0,\r\n        //定时器，N毫秒后自动关闭\r\n        timer:0,\r\n        //弹窗四周距离窗口边缘距离\r\n        edge:0,\r\n        //弹窗容器\r\n        container:'body',\r\n        //弹窗标题\r\n        title:'温馨提示',\r\n        //是否可以拖动\r\n        isMove:false,\r\n        //是否有遮罩\r\n        isMask:true,\r\n        //是否只能在窗口内拖动\r\n        isInnerMove:false,\r\n        //点击遮罩是否关闭弹窗\r\n        isClickMask:false,\r\n        //是否使用遮罩拖动\r\n        isMoveMask:false,\r\n        //是否能用hide方法关闭遮罩\r\n        isHide:true,\r\n        //弹窗是否浏览器改变大小时显示在窗口中央\r\n        isCenter:true,\r\n        //是否全屏显示\r\n        isFull:false,\r\n        //是否在点击弹窗时将其置顶\r\n        isTop:false,\r\n        //是否以提示框展示，没有标题，按钮\r\n        isTips:false,\r\n        //是否拖动滚动条固定位置\r\n        isFixed:true,\r\n        //当内容超过弹出层容器，是否显示滚动条\r\n        scrollbar:true,\r\n        //是否点击弹窗或者点击遮罩层是否阻止事件冒泡\r\n        isStopProp:false,\r\n        //按钮对齐方式\r\n        align:'center',\r\n        //是否以气泡形式展示，弹出层边缘会多出箭头\r\n        bubble:{\r\n            enable:false,\r\n            dir:'top'\r\n        },\r\n        //弹出层内容展示iframe，不建议跨域使用\r\n        iframe:{\r\n            enable:false,\r\n            cache:false,\r\n            src:''\r\n        },\r\n        //关闭按钮\r\n        close:{\r\n            enable:true,\r\n            text:'×'\r\n        },\r\n        //确定按钮\r\n        confirm:{\r\n            enable:false,\r\n            name:'normal',\r\n            text:'确定',\r\n            callback:function(){\r\n                return true\r\n            }\r\n        },\r\n        //取消按钮\r\n        cancel:{\r\n            enable:true,\r\n            text:'取消'\r\n        },\r\n        /*弹出层定位 top/left/right/bottom\r\n        position:{\r\n            top:10,\r\n            left:10\r\n        }\r\n        */\r\n        position:null,\r\n        /*将弹出层置于遮罩层底部\r\n        under:[layer1, layer2]\r\n        */\r\n        under:null,\r\n        /*配置按钮，若id为confirm/cancel/close将会覆盖内置按钮参数\r\n        button:[{\r\n            id:'confirm',\r\n            text:'确定',\r\n            name:'normal',\r\n            callback:function(){\r\n\r\n            }\r\n        }]\r\n        */\r\n        button:null,\r\n        //onInit：弹出层显示时回调\r\n        //onDestroy：弹出层注销时回调\r\n        //当拖动弹出层移动后回调\r\n        onMove:null,\r\n        //窗口改变大小位置时回调\r\n        onResize:null,\r\n        //容器滚动时回调\r\n        onScroll:null,\r\n        //弹窗隐藏前回调，若返回false则不能隐藏\r\n        onHideBefore:null,\r\n        //弹窗销毁前回调，若返回false则不能销毁\r\n        onDestroyBefore:null,\r\n        //定时关闭弹窗回调\r\n        onTimer:null\r\n    }\r\n\r\n    return this.extend(component, {\r\n        _static:statics,\r\n        _options:options,\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\" style=\"<% include \\'style\\' %>\">'+\r\n                    '<div class=\"layer-box\">'+\r\n                        '<%if close%>'+\r\n                            '<% var btn = close %>'+\r\n                            '<% include \"button\" %>'+\r\n                        '<%/if%>'+\r\n                        '<%if bubble%>'+\r\n                        '<span class=\"layer-bubble layer-bubble-<%bubble.dir||\"top\"%>\"'+\r\n                        '<%if bubble.style%>'+\r\n                        ' style=\"<%each bubble.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                        '<%/if%>'+\r\n                        '><b></b><i></i></span>'+\r\n                        '<%/if%>'+\r\n                        '<%if title%>'+\r\n                        '<div class=\"layer-head\">'+\r\n                            '<span class=\"layer-title\"><%title%></span>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                        '<div class=\"layer-body\">'+\r\n                            '<div class=\"layer-main\">'+\r\n                            '<%content%>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<%if button && button.length%>'+\r\n                        '<div class=\"layer-foot\" style=\"text-align:<%align%>\">'+\r\n                        '<div class=\"layer-inner\">'+\r\n                        '<%each button btn%>'+\r\n                            '<%include \"button\"%>'+\r\n                        '<%/each%>'+\r\n                        '</div>'+\r\n                        '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                '</div>',\r\n            button:\r\n                '<button class=\"ui-button'+\r\n                    '<%if btn.name%>'+\r\n                    '<%each [].concat(btn.name) name%> ui-button-<%name%><%/each%>'+\r\n                    '<%/if%> layer-button-<%btn.id%>\"'+\r\n                    '<%if btn.style%>'+\r\n                    ' style=\"<%each btn.style v n%><%n%>:<%v%>;<%/each%>\"'+\r\n                    '<%/if%>><%btn.text || \"按钮\"%></button>',\r\n            iframe:\r\n                '<iframe<%each attr%> <%$index%>=\"<%$value%>\"<%/each%>></iframe>',\r\n            mask:\r\n                '<div class=\"nui-layer-mask'+\r\n                    '<%if skin%> nui-layer-mask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                    '<div class=\"layer-mask\"></div>'+\r\n                '</div>',\r\n            movemask:\r\n                '<div class=\"nui-layer-movemask'+\r\n                    '<%if skin%> nui-layer-movemask-<%skin%><%/if%>\" style=\"<%include \\'style\\'%>\">'+\r\n                '</div>',\r\n            style:\r\n                '<%each style%><%$index%>:<%$value%>;<%/each%>'\r\n        },\r\n        /*\r\n        top:弹窗距离窗口顶部距离\r\n        left:弹窗距离窗口左边距离\r\n        width:弹窗宽度\r\n        height:弹窗高度\r\n        */\r\n        data:{},\r\n        _init:function(){\r\n            this._zIndex = ++this.constructor._zIndex;\r\n            this._exec()\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._container = _class._jquery(opts.container);\r\n            if(self._container.length){\r\n                self._containerDOM = self._container.get(0);\r\n                if(self._containerDOM.tagName !== 'BODY'){\r\n                    self._window = self._container;\r\n                    self._isWindow = false;\r\n                    var pos = self._container.css('position');\r\n                    if('absolute relative fixed'.indexOf(pos) === -1){\r\n                        self._container.css('position', 'relative')\r\n                    }\r\n                }\r\n                else{\r\n                    self._window = Nui.win;\r\n                    self._isWindow = true;\r\n                }\r\n                self._isFixed = opts.isFixed && !Nui.bsie6 && self._isWindow;\r\n                self._create();\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options;\r\n            var buttons = self._createButton(), isTitle = false;\r\n            if(opts.isTips !== true){\r\n                isTitle = typeof opts.title === 'string';\r\n            }\r\n            var data = self._tplData({\r\n                content:self._getContent(),\r\n                close:buttons.close,\r\n                button:buttons.button,\r\n                title:isTitle ? (opts.title||'温馨提示') : null,\r\n                bubble:opts.bubble.enable === true ? opts.bubble : null,\r\n                align:opts.align || 'center',\r\n                style:{\r\n                    'z-index':isNaN(parseInt(opts.zIndex)) ? self._zIndex : opts.zIndex,\r\n                    'position':'absolute',\r\n                    'display':'block'\r\n                }\r\n            });\r\n            if(self._isFixed){\r\n                data.style.position = 'fixed';\r\n            }\r\n            self._setTop();\r\n            self.element = self._bindComponentName($(self._tpl2html('layout', data)).appendTo(self._container));\r\n            self._box = self.element.children('.layer-box');\r\n\t\t\tself.head = self._box.children('.layer-head');\r\n\t\t\tself._body = self._box.children('.layer-body');\r\n\t\t\tself.main = self._body.children('.layer-main');\r\n\t\t\tself.foot = self._box.children('.layer-foot');\r\n            if(opts.isTips !== true){\r\n                if(opts.iframe.enable === true){\r\n                    self._iframe = self.main.children('iframe');\r\n                    self._iframeOnload()\r\n                }\r\n                if(opts.isMove === true && isTitle){\r\n                    self._bindMove();\r\n                }\r\n                if(opts.isStopProp === true){\r\n                    self._stopProp();\r\n                }\r\n                if(opts.isTop === true){\r\n                    self._bindTop();\r\n                }\r\n            }\r\n            if(self._button.length){\r\n                self._buttonEvent();\r\n            }\r\n            if(opts.isFixed === true && !self._isFixed === true){\r\n                self._bindScroll()\r\n            }\r\n            self._event();\r\n            self._show()\r\n        },\r\n        _getContent:function(){\r\n            var self = this, opts = self._options, content = '', tpl = opts.template;\r\n            if(opts.isTips !== true && opts.iframe.enable === true){\r\n                content = self._createIframe();\r\n            }\r\n            else{\r\n                if(tpl){\r\n                    if(typeof tpl === 'string'){\r\n                        content = template.render(tpl, opts.data)\r\n                    }\r\n                    else if(Nui.type(opts.template, 'Object')){\r\n                        content = template.render.call(tpl, tpl.main, opts.data)\r\n                    }\r\n                }\r\n                else if(typeof opts.content === 'string'){\r\n                    content = opts.content\r\n                }\r\n                else if(opts.content instanceof jQuery){\r\n                    content = opts.content.prop('outerHTML')\r\n                }\r\n            }\r\n            return content\r\n        },\r\n        _createIframe:function(){\r\n            var self = this, opts = self._options, name = 'layer-iframe'+self.__id, src = opts.iframe.src;\r\n            if(opts.iframe.cache === false){\r\n                src = util.setParam('_', new Date().getTime(), src)\r\n            }\r\n            return self._tpl2html('iframe', {\r\n                attr:{\r\n                    frameborder:'0',\r\n                    name:name,\r\n                    id:name,\r\n                    src:src,\r\n                    scroll:'hidden',\r\n                    style:'width:100%;'\r\n                }\r\n            })\r\n        },\r\n        _iframeOnload:function(){\r\n            var self = this;\r\n            self._iframe.load(function(){\r\n                self._iframeDocument = self._iframe.contents();\r\n                self._resize()\r\n            })\r\n        },\r\n        _createButton:function(){\r\n            var self = this, opts = self._options, defaults = {}, buttons = {}, caches = {};\r\n            var add = function(id, btn){\r\n                self._button[id === 'close' ? 'unshift' : 'push'](btn)\r\n            }\r\n            self._button = [];\r\n            if(opts.isTips !== true){\r\n                Nui.each(['close', 'confirm', 'cancel'], function(id){\r\n                    var btn = opts[id];\r\n                    if(btn && btn.enable === true){\r\n                        defaults[id] = {\r\n                            id:id,\r\n                            name:btn.name,\r\n                            style:btn.style,\r\n                            text:btn.text,\r\n                            callback:btn.callback\r\n                        }\r\n                    }\r\n                });\r\n                if(opts.button && opts.button.length){\r\n                    Nui.each(opts.button, function(val){\r\n                        var id = val.id, btn = val, def;\r\n                        if(!caches[id]){\r\n                            caches[id] = true;\r\n                            if(def = defaults[id]){\r\n                                btn = $.extend(true, {}, def, val);\r\n                                delete defaults[id]\r\n                            }\r\n                            add(id, btn)\r\n                        }\r\n                    })\r\n                }\r\n                Nui.each(defaults, function(val, id){\r\n                    add(id, val)\r\n                });\r\n            }\r\n            if(self._button[0] && self._button[0].id === 'close'){\r\n                buttons.close = self._button[0],\r\n                buttons.button = self._button.slice(1);\r\n            }\r\n            else{\r\n                buttons.button = self._button\r\n            }\r\n            return buttons\r\n        },\r\n        _buttonEvent:function(){\r\n            var self = this, opts = self._options;\r\n            Nui.each(self._button, function(val){\r\n                self._on('click', self.element, '.layer-button-'+val.id, function(e, button){\r\n                    if(!button.hasClass('nui-button-disabled')){\r\n                        var id = val.id, callback = val.callback;\r\n                        var isCall = typeof callback === 'function' ? callback.call(opts, self, e, button) : null;\r\n                        if((id === 'confirm' && isCall === true) || (id !== 'confirm' && isCall !== false)){\r\n                            self.destroy()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        },\r\n        _stopProp:function(){\r\n            this._on('click', this.element, function(e){\r\n                e.stopPropagation()\r\n            });\r\n        },\r\n        _bindTop:function(){\r\n            var self = this;\r\n            self._on('click', self.element, function(){\r\n                self._setzIndex();\r\n            });\r\n        },\r\n        _bindMove:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            var _class = self.constructor, elem = element, isMove = false, x, y, _x, _y;\r\n            self._on('mousedown', self.head, function(e, ele){\r\n                isMove = true;\r\n                self._setzIndex();\r\n                if(opts.isMoveMask === true){\r\n                    elem = self._moveMask = $(self._tpl2html('movemask', {\r\n                        skin:opts.skin,\r\n                        style:{\r\n                            'z-index':self._zIndex+1,\r\n                            'cursor':'move',\r\n                            'position':self._isFixed ? 'fixed' : 'absolute'\r\n                        }\r\n                    })).appendTo(self._container);\r\n                    elem.css({\r\n                        width:self.data.outerWidth - _class._getSize(elem, 'lr', 'all'),\r\n                        height:self.data.outerHeight - _class._getSize(elem, 'tb', 'all'),\r\n                        top:self.data.top,\r\n                        left:self.data.left\r\n                    });\r\n                }\r\n                ele.css('cursor','move');\r\n                x = e.pageX - self.data.left;\r\n                y = e.pageY - self.data.top;\r\n                e.stopPropagation();\r\n            });\r\n            self._on('mousemove', Nui.doc, function(e){\r\n                var width = self._container.outerWidth(), height = self._container.outerHeight();\r\n                if(isMove){\r\n                    _x = e.pageX - x;\r\n                    _y = e.pageY - y;\r\n                    _x < 0 && (_x = 0);\r\n                    _y < 0 && (_y = 0);\r\n                    if(opts.isInnerMove === true){\r\n                        _x + self.data.outerWidth > width && (_x = width - self.data.outerWidth);\r\n                        _y + self.data.outerHeight > height && (_y = height - self.data.outerHeight);\r\n                    }\r\n                    self.data.top = _y;\r\n                    self.data.left = _x;\r\n                    elem.css({top:_y, left:_x});\r\n                    return !isMove;\r\n                }\r\n            });\r\n            self._on('mouseup', Nui.doc, function(e){\r\n                if(isMove){\r\n                    isMove = false;\r\n                    self.head.css('cursor','default');\r\n                    if(opts.isMoveMask === true){\r\n                        element.css(self.data);\r\n                        self._moveMask.remove();\r\n                        self._moveMask = null;\r\n                    }\r\n                    self._callback('Move');\r\n                    self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n                    self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n                }\r\n            });\r\n        },\r\n        _bindScroll:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('scroll', self._window, function(e, elem){\r\n                var top = self.data.offsetTop + self._window.scrollTop();\r\n                var left = self.data.offsetLeft + self._window.scrollLeft();\r\n                self.data.top = top;\r\n                self.data.left = left;\r\n                self.element.css(self.data);\r\n                self._callback('Scroll', [e, elem, {top:top, left:left}]);\r\n            })\r\n        },\r\n        //鼠标点击弹出层将弹出层层级设置最大\r\n        _setzIndex:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self._isTop && self.element){\r\n                self._isTop = false;\r\n                self._zIndex = ++_class._zIndex;\r\n                self.element.css('zIndex', self._zIndex);\r\n                self._setTop();\r\n            }\r\n        },\r\n        _setLower:function(destroy){\r\n            var self = this, _class = self.constructor, opts = self._options, unders = [];\r\n            if(opts.under){\r\n                unders = unders.concat(opts.under);\r\n                if(unders.length){\r\n                    Nui.each(unders, function(obj, k){\r\n                        if(obj && obj.element){\r\n                            obj.element.css('z-index', destroy ? (isNaN(parseInt(obj._options.zIndex)) ? obj._zIndex : obj._options.zIndex) : _class._maskzIndex-1)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        _setTop:function(){\r\n            var self = this, _class = self.constructor;\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val !== self && val._options.isTop === true){\r\n                    val._isTop = true;\r\n                }\r\n            });\r\n        },\r\n        _position:function(){\r\n            var self = this, data = self.data, pos = self._options.position;\r\n            var _pos = {\r\n                top:pos.top,\r\n                left:pos.left,\r\n                right:pos.right,\r\n                bottom:pos.bottom\r\n            }, _v;\r\n\r\n            if(_pos.top !== undefined && _pos.bottom !== undefined){\r\n                delete _pos.bottom\r\n            }\r\n\r\n            if(_pos.left !== undefined && _pos.right !== undefined){\r\n                delete _pos.right\r\n            }\r\n\r\n            Nui.each(_pos, function(v, k){\r\n                if(v === undefined){\r\n                    delete _pos[k];\r\n                    return true;\r\n                }\r\n                _v = v;\r\n                if(typeof v === 'string'){\r\n                    if(!v){\r\n                        _v = 0\r\n                    }\r\n                    else{\r\n                        if(k === 'top' || k === 'bottom'){\r\n                            if(v === 'self'){\r\n                                _v = data.outerHeight\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerHeight+'; return '+v))()\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(v === 'self'){\r\n                                _v = data.outerWidth\r\n                            }\r\n                            else if(/[\\+\\-\\*\\/]/.test(v)){\r\n                                _v = (new Function('var self = '+data.outerWidth+'; return '+v))()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                _pos[k] = _v === 'auto' ? 'auto' : parseFloat(_v)+'px'\r\n            })\r\n\r\n            return _pos\r\n        },\r\n        _resize:function(type){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var wWidth = self._window.outerWidth();\r\n            var wHeight = self._window.outerHeight();\r\n            var stop = 0;\r\n            var sleft = 0;\r\n            if(!self._isFixed){\r\n                sleft = self._window.scrollLeft();\r\n                stop = self._window.scrollTop();\r\n            }\r\n            self._setSize();\r\n            if(opts.position){\r\n                var pos = element.css(self._position()).position();\r\n                if(Nui.bsie6){\r\n                    sleft = 0;\r\n                    stop = 0;\r\n                }\r\n                self.data.left = pos.left + sleft;\r\n                self.data.top = pos.top + stop;\r\n            }\r\n            else{\r\n                if(type === 'init' || opts.isCenter === true){\r\n                    var left = (wWidth - self.data.outerWidth) / 2 + sleft;\r\n                    var top = (wHeight - self.data.outerHeight) / 2 + stop;\r\n                    var edge = opts.edge > 0 ? opts.edge : 0;\r\n                    self.data.left = left > 0 ? left : edge;\r\n                    self.data.top = top > 0 ? top : edge;\r\n                }\r\n            }\r\n            self.data.offsetTop = self.data.top - self._window.scrollTop();\r\n            self.data.offsetLeft = self.data.left - self._window.scrollLeft();\r\n            element.css(self.data);\r\n        },\r\n        _setSize:function(){\r\n            var self = this, _class = self.constructor, opts = self._options, element = self.element;\r\n            var edge = opts.edge > 0 ? opts.edge*2 : 0;\r\n            var wWidth = self._window.outerWidth() - edge;\r\n            var wHeight = self._window.outerHeight() - edge;\r\n            var scrollbar = opts.scrollbar;\r\n\r\n            self._body.css({height:'auto', overflow:'visible'});\r\n            element.css({top:'auto', left:'auto', width:'auto', height:'auto'});\r\n            \r\n            var edgeSize = _class._getSize(self._box, 'tb', 'all') +\r\n                self.head.outerHeight() + \r\n                _class._getSize(self.head, 'tb', 'margin') + \r\n                _class._getSize(self._body, 'tb', 'all') + \r\n                self.foot.outerHeight() + \r\n                _class._getSize(self.foot, 'tb', 'margin');\r\n\r\n            var width = element.outerWidth();\r\n            if(opts.isFull !== true){\r\n                if(opts.width > 0){\r\n                    width = opts.width\r\n                }\r\n                else if(opts.width === '100%' || (opts.scrollbar === true && width > wWidth)){\r\n                    width = wWidth;\r\n                }\r\n                if(opts.maxWidth > 0 && width >= opts.maxWidth){\r\n                    scrollbar = true;\r\n                    width = opts.maxWidth\r\n                }\r\n            }\r\n            else{\r\n                width = wWidth;\r\n            }\r\n\r\n            var ws = 'nowrap';\r\n            if(opts.width > 0 || width == opts.maxWidth || width == wWidth){\r\n                ws = 'normal';\r\n            }\r\n\r\n            self.data.width = width - _class._getSize(element, 'lr', 'all');\r\n            self.main.css('white-space', ws);\r\n            element.width(self.data.width);\r\n\r\n            var height = element.outerHeight();\r\n            if(self._iframeDocument){\r\n                self._iframeDocument[0].layer = self;\r\n                height = edgeSize + self._iframeDocument.find('body').outerHeight();\r\n            }\r\n\r\n            if(opts.isFull !== true){\r\n                if(opts.height > 0){\r\n                    height = opts.height\r\n                }\r\n                else if(opts.height === '100%' || ((opts.scrollbar === true || self._iframeDocument) && height > wHeight)){\r\n                    height = wHeight\r\n                }\r\n                if(opts.maxHeight > 0 && height >= opts.maxHeight){\r\n                    scrollbar = true;\r\n                    height = opts.maxHeight\r\n                }\r\n            }\r\n            else{\r\n                height = wHeight\r\n            }\r\n\r\n            self.data.outerWidth = width;\r\n            self.data.outerHeight = height;\r\n            self.data.height = height - _class._getSize(element, 'tb', 'all');\r\n            element.height(self.data.height);\r\n            var _height = self.data.height - edgeSize;\r\n\r\n            if(self.main.outerHeight() > _height && !self._iframe && scrollbar === true){\r\n                self._body.css('overflow', 'auto')\r\n            }\r\n            if(self._iframe){\r\n                self._iframe.height(_height);\r\n            }\r\n            self._body.height(self.data.contentHeight = _height)\r\n        },\r\n        _showMask:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(!self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__ = $(self._tpl2html('mask', {\r\n                    skin:opts.skin,\r\n                    style:{\r\n                        'z-index':_class._maskzIndex,\r\n                        'position':self._isFixed ? 'fixed' : 'absolute',\r\n                        'top':'0px',\r\n                        'left':'0px',\r\n                        'width':'100%',\r\n                        'height':self._isFixed ? '100%' : self._container.outerHeight()+'px'\r\n                    }\r\n                })).appendTo(self._container);\r\n            }\r\n            if(opts.isStopProp === true){\r\n                self._on('click', self._containerDOM.__layermask__, function(e){\r\n                    e.stopPropagation()\r\n                })\r\n            }\r\n            if(opts.isClickMask === true){\r\n                self._on('click', self._containerDOM.__layermask__, function(){\r\n                    self.hide()\r\n                })\r\n            }\r\n        },\r\n        _show:function(){\r\n            var self = this, opts = self._options;\r\n            component.init(self.main);\r\n            self._resize('init');\r\n            self._setLower();\r\n            if(opts.isMask === true){\r\n                self._showMask()\r\n            }\r\n            if(opts.timer > 0){\r\n                self._time = opts.timer;\r\n                self._timer();\r\n            }\r\n            self._callback('Init');\r\n            return self\r\n        },\r\n        _timer:function(){\r\n            var self = this, opts = self._options;\r\n            if(self._time > 0){\r\n                self._callback('Timer', [self._time]);\r\n                self._timerid = setTimeout(function(){\r\n                    self._time -= 1000;\r\n                    self._timer();\r\n                }, self._time > 1000 ? 1000 : self._time)\r\n            }\r\n            else{\r\n                self.hide()\r\n            }\r\n        },\r\n        _reset:function(){\r\n            var self = this, _class = self.constructor, noMask = true;\r\n            component.exports._reset.call(this);\r\n            component('destroy', self.main);\r\n            Nui.each(_class.__instances, function(val){\r\n                if(val && val._options.isMask === true && val !== self && val._containerDOM === self._containerDOM){\r\n                    return (noMask = false);\r\n                }\r\n            });\r\n            if(noMask && self._containerDOM.__layermask__){\r\n                self._containerDOM.__layermask__.remove();\r\n                self._containerDOM.__layermask__  = null;\r\n            }\r\n            if(self._options.timer > 0){\r\n                self.timer = 0;\r\n                clearTimeout(self._timerid);\r\n            }\r\n        },\r\n        resize:function(){\r\n            var self = this, opts = self._options, element = self.element;\r\n            self._resize();\r\n            self._callback('Resize');\r\n            return self\r\n        },\r\n        hide:function(){\r\n            if(this._options.isHide === true){\r\n                if(this._callback('HideBefore') === false){\r\n                    return\r\n                }\r\n                this.destroy()\r\n            }\r\n        },\r\n        destroy:function(){\r\n            var self = this, _class = self.constructor, opts = self._options;\r\n            if(self._callback('DestroyBefore') === false){\r\n                return\r\n            }\r\n            self._delete();\r\n            self._reset();\r\n            self._setLower(true);\r\n            if(!self._isdestroy){\r\n                _class._zIndex--;\r\n                self._isdestroy = true;\r\n            }\r\n            self._callback('Destroy');\r\n        }\r\n    })\r\n});\nNui[define]('./script/page',['src/components/layer/layer', 'src/core/events'], function(layer, events){\r\n    var renders = this.renders;\r\n    return events({\r\n        element:document,\r\n        events:{\r\n            'click .j-demo':function(){\r\n                layer({\r\n                    content:'<p style=\"padding:10px; text-align:center;\">hello world</p>',\r\n                    width:280,\r\n                    height:150,\r\n                    cancel:{\r\n                        text:'关闭',\r\n                        callback:function(self){\r\n                            console.log(self)\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            'click .j-position':function(){\r\n                layer({\r\n                    content:renders(''+''\r\n                        +'<div style=\"padding:15px 20px; line-height:20px;\">'+''\r\n                            +'<p>消息标题1</p>'+''\r\n                            +'<p>消息标题2</p>'+''\r\n                            +'<p>消息标题3</p>'+''\r\n                        +'</div>'+''\r\n                    +''),\r\n                    title:'系统消息',\r\n                    width:280,\r\n                    isMask:false,\r\n                    cancel:{\r\n                        enable:false\r\n                    },\r\n                    position:{\r\n                        bottom:'self*-1',\r\n                        right:0\r\n                    },\r\n                    onInit:function(self){\r\n                        this.position.bottom = 0;\r\n                        self.element.animate({top:self.data.top - self.data.outerHeight})\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    })\r\n})\n\n})('_module_2_define');"]}