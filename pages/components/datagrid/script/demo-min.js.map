{"version":3,"sources":["demo-debug.js"],"names":["Nui","define","module","this","component","require","util","scrollBarWidth","oldWidth","newWidth","div","document","createElement","style","cssText","body","appendChild","clientWidth","overflowY","removeChild","extend","_static","_init","self","doc","on","e","isRow","$","target","closest","hasClass","each","__instances","val","element","_activeElem","_callback","removeClass","_activeFixedElem","timer","win","clearTimeout","setTimeout","_options","height","resize","_hasChildren","value","isArray","children","length","_colspan","array","count","undefined","v","container","data","columns","isFixed","isLine","isActive","isBorder","isPaging","isDir","keyCode","url","paging","fields","dataField","width","footer","placeholder","onFocusin","onFocusout","onFocus","onBlur","stringify","rowRender","onActive","onCancelActive","onRowRender","onRowClick","onRowDblclick","onCheckboxChange","onRender","onRenderBefore","onScroll","_template","layout","table","thead","rows","_attr","attr","_exec","opts","_class","constructor","_container","_jquery","_columns","all","left","right","_checked","k","fixed","push","_keyCode","concat","_create","_rows","_cols","_colTemplates","_rowNumber","_getRowNumber","_setTemplate","_setRowCol","_hasLeftRight","_bindComponentName","_tpl2html","_tplData","isPage","appendTo","find","checkradio","_checkradio","_body","_tableAll","_tableAllBox","_tableAllTitle","_tableAllThead","_tableLeft","_tableRight","_tableFixed","_tableFixedBox","_foot","_tableTbody","css","_theadHeight","_initList","_bindEvent","tpl","content","index","arr","cellid","parent","order","className","field","template","tplid","filter","align","valign","toString","replace","trim","isEmptyObject","wrap","pagingId","__id","echoData","type","_render","call","window","Paging","query","_on","elem","_scroll","scrollLeft","top","scrollTop","_event","_getList","_list","list","split","rowHtml","isScroll","scroll","enable","nextAll","addBack","remove","cols","pageNum","current","checked","i","elems","tbody","html","_resetSize","callback","prop","_rowHeight","stop","conntailerHeight","outerHeight","_getSize","barWidth","fixedHeight","outerWidth","browser","msie","version","margin-right","item","_height","LeftRow","RightRow","eq","row","hasChild","colspan","key","rowspan","_editInput","dom","get","keycode","edge","getFocusIndex","isTextSelect","_horzFocus","isTab","td","_td","preventDefault","input","focus","select","makeArray","reverse","_input","_verticalFocus","tr","_dirFocus","inArray","_events","click .table-tbody .table-row","mouseenter .table-tbody .table-row","addClass","mouseleave .table-tbody .table-row","dblclick .table-tbody .table-row","focus .datagrid-input","blur .datagrid-input","focusin .table-tbody .table-cell","focusout .table-tbody .table-cell","click .datagrid-order > b","keydown .datagrid-input","_order","toggleClass","siblings","condition","_enable","stopPropagation","_active","cancelActive","_getRowData","_focus","arguments","_blur","_focusin","_focusout","_rowdblclick","scrollTo","x","y","checkedData","_data","imports","renders","fn","isPlainObject","o","switches","off","beforeCallback","noop","me","disabled","name","switchElem","is","insertBefore","position","opacity","wrapInner","click","ele","text","init","jQuery","options","that","load","instance","paramJSON","pCount","aCount","last","allData","isFull","ajax","loading","show","hide","append","button","prev","next","first","extPage","desc","refreshCallback","endCallback","jumpCallback","request","op","dataType","config","prototype","jump","page","Math","ceil","showload","prevAll","parseInt","create","getData","param","temp","join","success","box","selector","error","abs","echoList","cheight","empty","datagrid","a","title","render","option"],"mappings":"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","file":"demo-min.js.map?v=8ab7e8e","sourcesContent":["Nui.define('src/components/datagrid',function(){\r\n    var module = this;\r\n    var component = module.require('component');\r\n    var util = module.require('util');\r\n\r\n    var scrollBarWidth = (function(){\r\n        var oldWidth, newWidth, div = document.createElement('div');\r\n        div.style.cssText = 'position:absolute; top:-10000em; left:-10000em; width:100px; height:100px; overflow:hidden;';\r\n        oldWidth = document.body.appendChild(div).clientWidth;\r\n        div.style.overflowY = 'scroll';\r\n        newWidth = div.clientWidth;\r\n        document.body.removeChild(div);\r\n        return oldWidth - newWidth;\r\n    })()\r\n\r\n    return module.extend(component, {\r\n        _static:{\r\n            _init:function(){\r\n                var self = this;\r\n                Nui.doc.on('click', function(e){\r\n                    var isRow = $(e.target).closest('tr').hasClass('table-row');\r\n                    Nui.each(self.__instances, function(val){\r\n                        if(!isRow && val.element && val._activeElem){\r\n                            val._callback('CancelActive', [e, val._activeElem])\r\n                            val._activeElem.removeClass('s-crt');\r\n                            delete val._activeElem;\r\n                            if(val._activeFixedElem){\r\n                                val._activeFixedElem.removeClass('s-crt');\r\n                                delete val._activeFixedElem\r\n                            }\r\n                        }\r\n                    })\r\n                });\r\n\r\n                var timer = null;\r\n                Nui.win.on('resize', function(){\r\n                    clearTimeout(timer);\r\n                    timer = setTimeout(function(){\r\n                        Nui.each(self.__instances, function(val){\r\n                            if(val._options.height === '100%'){\r\n                                val.resize()\r\n                            }\r\n                        })\r\n                    }, 80)\r\n                })\r\n            },\r\n            _hasChildren:function(value){\r\n                return Nui.isArray(value.children) && value.children.length\r\n            },\r\n            //获取合并单元格数\r\n            _colspan:function(array, count){\r\n                var self = this;\r\n                if(count === undefined){\r\n                    count = 0\r\n                }\r\n                Nui.each(array, function(v){\r\n                    if(self._hasChildren(v)){\r\n                        count += self._colspan(v.children)\r\n                    }\r\n                    else{\r\n                        count += 1\r\n                    }\r\n                })\r\n                return count\r\n            }\r\n        },\r\n        _options:{\r\n            container:null,\r\n            data:null,\r\n            columns:null,\r\n            isFixed:true,\r\n            isLine:false,\r\n            isActive:true,\r\n            isBorder:true,\r\n            //初始化时是否调用分页\r\n            isPaging:true,\r\n            isDir:false,\r\n            keyCode:[9, 13],\r\n            url:null,\r\n            //分页配置\r\n            paging:null,\r\n            fields:null,\r\n            dataField:'list',\r\n            width:'100%',\r\n            height:'100%',\r\n            footer:'',\r\n            placeholder:'',\r\n\r\n            onFocusin:null,\r\n            onFocusout:null,\r\n            onFocus:null,\r\n            onBlur:null,\r\n\r\n            stringify:null,\r\n            rowRender:null,\r\n            onActive:null,\r\n            onCancelActive:null,\r\n            onRowRender:null,\r\n            onRowClick:null,\r\n            onRowDblclick:null,\r\n            onCheckboxChange:null,\r\n            onRender:null,\r\n            onRenderBefore:null,\r\n            onScroll:null\r\n        },\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\">'+\r\n                    '<div class=\"datagrid-body<%if isFixed%> datagrid-fixed<%/if%>\">'+\r\n                        '<%include \"table\"%>'+\r\n                    '</div>'+\r\n                    '<%if footer || paging%>'+\r\n                    '<div class=\"datagrid-foot\">'+\r\n                        '<%if footer%>'+\r\n                        '<%footer%>'+\r\n                        '<%/if%>'+\r\n                        '<%if paging%>'+\r\n                        '<div class=\"datagrid-paging\"></div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                    '<%/if%>'+\r\n                '</div>',\r\n            table:\r\n                '<%each rows v k%>'+\r\n                    '<%if v.length%>'+\r\n                    '<div class=\"datagrid-table<%if k === \"left\" || k === \"right\"%> datagrid-table-fixed<%/if%> datagrid-table-<%k%>\">'+\r\n                        '<%if !isFixed%>'+\r\n                            '<div class=\"datagrid-box\">'+\r\n                            '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                '<%include \"thead\"%>'+\r\n                                '<tbody class=\"table-tbody datagrid-tbody\"></tbody>'+\r\n                            '</table>'+\r\n                            '</div>'+\r\n                        '<%else%>'+\r\n                            '<div class=\"datagrid-title\">'+\r\n                                '<div class=\"datagrid-thead\">'+\r\n                                '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                    '<%include \"thead\"%>'+\r\n                                '</table>'+\r\n                                '</div>'+\r\n                            '</div>'+\r\n                            '<div class=\"datagrid-box\">'+\r\n                                '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                '<tbody class=\"table-tbody datagrid-tbody\"></tbody>'+\r\n                                '</table>'+\r\n                            '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                    '<%/if%>'+\r\n                '<%/each%>',\r\n            thead:\r\n                '<thead class=\"table-thead\">'+\r\n                    '<%each v%>'+\r\n                    '<tr class=\"table-row\">'+\r\n                        '<%var cellLastIndex = $value.length-1%>'+\r\n                        '<%each $value val key%>'+\r\n                        '<%var isTitle = true%>'+\r\n                        '<%var _classNames = val.className%>'+\r\n                        '<%if typeof _classNames === \"function\"%>'+\r\n                            '<%if _classNames = Nui.trim(val.className()||\"\")%>'+\r\n                                '<%var _classNames = \" \" + _classNames%>'+\r\n                            '<%/if%>'+\r\n                        '<%/if%>'+\r\n                        '<th class=\"table-cell<%_classNames%> table-cell-<%key%><%if cellLastIndex === key%> table-cell-last<%/if%>\"<%include \"attr\"%>>'+\r\n                            '<span class=\"cell-wrap\"<%if val.width > 0 && (val.fixed === \"left\" || val.fixed === \"right\")%> style=\"width:<%val.width%>px\"<%/if%>>'+\r\n                            '<span class=\"cell-text\">'+\r\n                            '<%if val.title%>'+\r\n                            '<%val.title%>'+\r\n                            '<%if typeof val.order === \"object\"%>'+\r\n                            '<%var asc = Nui.type(val.order.asc, [\"String\", \"Number\"]), desc = Nui.type(val.order.desc, [\"String\", \"Number\"])%>'+\r\n                            '<em class=\"datagrid-order<%if asc && desc%> datagrid-order-both<%/if%>\" field=\"<%val.order.field%>\">'+\r\n                            '<%if asc%>'+\r\n                            '<b class=\"datagrid-order-asc\" type=\"asc\" value=\"<%val.order.asc%>\"><i></i><s></s></b>'+\r\n                            '<%/if%>'+\r\n                            '<%if desc%>'+\r\n                            '<b class=\"datagrid-order-desc\" value=\"<%val.order.desc%>\"><i></i><s></s></b>'+\r\n                            '<%/if%>'+\r\n                            '</em>'+\r\n                            '<%/if%>'+\r\n                            '<%elseif val.content === \"checkbox\"%>'+\r\n                            '<span class=\"ui-checkradio\">'+\r\n                            '<input type=\"checkbox\" name=\"datagrid-checkbox-all\" class=\"datagrid-checkbox datagrid-checkbox-choose\">'+\r\n                            '</span>'+\r\n                            '<%/if%>'+\r\n                            '</span>'+\r\n                            '</span>'+\r\n                        '</th>'+\r\n                        '<%/each%>'+\r\n                    '</tr>'+\r\n                    '<%/each%>'+\r\n                '</thead>',\r\n            rows:\r\n                '<%if list && list.length%>'+\r\n                '<%var toLower = function(str){'+\r\n                    'return str.replace(/([A-Z])/g, function(a){'+\r\n                        'return \"-\"+a.toLowerCase()'+\r\n                    '})'+\r\n                '}%>'+\r\n                '<%each list%>'+\r\n                '<%var rowData = rowRender($value, $index)||{}%>'+\r\n                '<%var className = (rowData.className ? \" \"+rowData.className : \"\")%>'+\r\n                '<%delete rowData.className%>'+\r\n                '<tr class=\"table-row table-row-<%$index%><%className%>\" row-pagenum=\"<%pageNum??%>\" row-index=\"<%$index%>\"<%include \"data\"%><%each rowData _v _n%> <%_n%>=\"<%_v%>\"<%/each%>>'+\r\n                    '<%var colLastIndex = cols.length-1%>'+\r\n                    '<%each cols val key%>'+\r\n                    '<%var _value%>'+\r\n                    '<%if val.field && (!val.content || \"number checkbox input\".indexOf(val.content)===-1)%>'+\r\n                    '<%var _value=$value[val.field]%>'+\r\n                    '<%elseif val.content === \"number\"%>'+\r\n                    '<%var _value=$index+1%>'+\r\n                    '<%elseif val.content === \"checkbox\"%>'+\r\n                    '<%var _value={\"name\":val.field ? val.field : \"datagrid-checkbox\", \"class\":\"datagrid-checkbox\"+(!val.title ? \" datagrid-checkbox-choose\" : \"\"), \"value\":$value[val.field]!==undefined?$value[val.field]:\"\"}%>'+\r\n                    '<%elseif val.content === \"input\"%>'+\r\n                    '<%var _value={\"name\":val.field ? val.field : \"datagrid-input\", \"class\":\"datagrid-input\", \"value\":$value[val.field]!==undefined?$value[val.field]:\"\"}%>'+\r\n                    '<%else%>'+\r\n                    '<%var _value=val.content%>'+\r\n                    '<%/if%>'+\r\n                    '<%var _classNames = val.className%>'+\r\n                    '<%if typeof _classNames === \"function\"%>'+\r\n                        '<%if _classNames = Nui.trim(val.className(_value, val.field, $value, $index)||\"\")%>'+\r\n                            '<%var _classNames = \" \" + _classNames%>'+\r\n                        '<%/if%>'+\r\n                    '<%/if%>'+\r\n                    '<td class=\"table-cell<%_classNames%> table-cell-<%key%><%if colLastIndex === key%> table-cell-last<%/if%>\"<%include \"attr\"%>>'+\r\n                        '<%if typeof val.filter === \"function\"%>'+\r\n                        '<%var _value = val.filter(_value, val.field, $value, $index)%>'+\r\n                        '<%/if%>'+\r\n                        '<span class=\"cell-wrap<%if val.nowrap === true%> cell-nowrap<%/if%>\"<%if val.width > 0 && (val.fixed === \"left\" || val.fixed === \"right\")%> style=\"width:<%val.width%>px\"<%/if%>>'+\r\n                        '<span class=\"cell-text'+\r\n                            '<%if val.content === \"checkbox\"%> cell-text-checkbox<%/if%>'+\r\n                            '<%if val.content === \"input\"%> cell-text-input<%/if%>\"'+\r\n                            '<%if val.showtitle === true%> title=\"<%_value%>\"<%/if%>>'+\r\n                        '<%if val.content === \"checkbox\" && typeof _value === \"object\"%>'+\r\n                        '<%if checked === true && !val.title && (_value[\"checked\"]=checked)%><%/if%>'+\r\n                        '<span class=\"ui-checkradio\">'+\r\n                        '<input type=\"checkbox\"<%include \"_attr\"%>>'+\r\n                        '</span>'+\r\n                        '<%elseif val.content === \"input\" && typeof _value === \"object\"%>'+\r\n                        '<input type=\"text\" autocomplete=\"off\"<%include \"_attr\"%>>'+\r\n                        '<%else%>'+\r\n                        '<%include \"content\"%>'+\r\n                        '<%/if%>'+\r\n                        '</span>'+\r\n                        '</span>'+\r\n                    '</td>'+\r\n                    '<%/each%>'+\r\n                '</tr>'+\r\n                '<%/each%>'+\r\n                '<%elseif type === \"all\"%>'+\r\n                '<tr>'+\r\n                    '<td class=\"table-cell table-cell-void\" colspan=\"<%cols.length%>\">'+\r\n                        '<span class=\"ui-void\"><%placeholder??%></span>'+\r\n                    '</td>'+\r\n                '</tr>'+\r\n                '<%/if%>',\r\n            _attr:\r\n                '<%if !_value[\"class\"]%>'+\r\n                '<%var _class = _value[\"class\"] = \"\"%>'+\r\n                '<%/if%>'+\r\n                '<%if _value.className%>'+\r\n                '<%var _class = (_value[\"class\"]+=\" \"+Nui.trim(_value.className))%>'+\r\n                '<%delete _value.className%>'+\r\n                '<%/if%>'+\r\n                '<%each _value _v _k%>'+\r\n                ' <%_k%>=\"<%_v%>\"'+\r\n                '<%/each%>',\r\n            attr:\r\n                '<%each val value name%>'+\r\n                '<%if !isTitle?? && name === \"style\"%>'+\r\n                'style=\"<%each value _v _k%><%_k%>:<%_v%>;<%/each%>\"'+\r\n                '<%elseif \"width field colspan rowspan cellid\".indexOf(name) !== -1%>'+\r\n                ' <%name%>=\"<%value%>\"'+\r\n                '<%/if%>'+\r\n                '<%/each%>',\r\n            data:\r\n                '<%if fields%>'+\r\n                '<%each $value value field%>'+\r\n                '<%if fields === true || $.inArray(field, fields) !== -1%>'+\r\n                '<%var _value = stringify(value)%>'+\r\n                ' data-<%toLower(field)%>=<%if typeof _value !== \"undefined\"%><%_value%><%else%>\"<%value%>\"<%/if%>'+\r\n                '<%/if%>'+\r\n                '<%/each%>'+\r\n                '<%/if%>'\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, _class = self.constructor, container = opts.container;\r\n            if(container && Nui.isArray(opts.columns) && opts.columns.length){\r\n                self._container = _class._jquery(container);\r\n                self._columns = {\r\n                    all:[],\r\n                    left:[],\r\n                    right:[]\r\n                }\r\n                self._checked = false;\r\n                Nui.each(opts.columns, function(v, k){\r\n                    if(v.fixed === 'left' || v.fixed === true){\r\n                        self._columns.left.push(v)\r\n                    }\r\n                    else if(v.fixed === 'right'){\r\n                        self._columns.right.push(v)\r\n                    }\r\n                    self._columns.all.push(v)\r\n                })\r\n                self._keyCode = [];\r\n                if(opts.isDir === true){\r\n                    self._keyCode = self._keyCode.concat([37, 38, 39, 40]);\r\n                }\r\n                if(opts.keyCode){\r\n                    self._keyCode = self._keyCode.concat(opts.keyCode);\r\n                }\r\n                \r\n                self._create()\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._rows = {};\r\n            self._cols = {};\r\n            self._colTemplates = {};\r\n            self._rowNumber = self._getRowNumber(opts.columns, 0, []);\r\n            self._setTemplate();\r\n\r\n            Nui.each(self._columns, function(v, k){\r\n                self._setRowCol(v, k)\r\n            })\r\n\r\n            self._hasLeftRight = this._cols.left.length || this._cols.right.length;\r\n\r\n            self.element = self._bindComponentName($(self._tpl2html('layout', self._tplData({\r\n                rows:self._rows,\r\n                isFixed:opts.isFixed === true,\r\n                isBorder:opts.isBorder === true,\r\n                paging:opts.paging && typeof opts.paging === 'object' && opts.paging.isPage !== false,\r\n                footer:opts.footer\r\n            }))).appendTo(self._container));\r\n\r\n            self.element.find('.table-thead .datagrid-checkbox').checkradio(self._checkradio());\r\n\r\n            self._body = self.element.children('.datagrid-body');\r\n            self._tableAll = self._body.children('.datagrid-table-all');\r\n            self._tableAllBox =  self._tableAll.find('.datagrid-box');\r\n            self._tableAllTitle = self._tableAll.children('.datagrid-title');\r\n            self._tableAllThead = self._tableAll.find('.datagrid-thead');\r\n            self._tableLeft = self._body.children('.datagrid-table-left');\r\n            self._tableRight = self._body.children('.datagrid-table-right');\r\n            self._tableFixed = self._body.children('.datagrid-table-fixed');\r\n            self._tableFixedBox = self._tableFixed.find('.datagrid-box');\r\n            self._foot = self.element.children('.datagrid-foot');\r\n            self._tableTbody = self._body.find('.datagrid-tbody');\r\n\r\n            if(opts.width){\r\n                self._tableAllThead.children().css('width', opts.width);\r\n                self._tableAllBox.children().css('width', opts.width);\r\n            }\r\n\r\n            self._theadHeight();\r\n            self._initList();\r\n            self._bindEvent();\r\n        },\r\n        _setTemplate:function(){\r\n            var self = this;\r\n            var tpl = '';\r\n            Nui.each(self._colTemplates, function(v, k){\r\n                tpl += '<%'+ (tpl ? 'else' : '') +'if (\"content_\"+val.cellid) === \"'+ k +'\"%><%include \"'+ k +'\"%>'\r\n            })\r\n            if(tpl){\r\n                tpl += '<%else%><%_value??%><%/if%>'\r\n            }\r\n            else{\r\n                tpl = '<%_value??%>'\r\n            }\r\n            self._template.content = tpl;\r\n        },\r\n        //获取表格标题行数\r\n        _getRowNumber:function(array, index, arr, cellid, parent){\r\n            var self = this, _class = self.constructor;\r\n            if(!arr[index]){\r\n                arr[index] = true;\r\n            }\r\n\r\n            if(cellid === undefined){\r\n                cellid = 0;\r\n            }\r\n            \r\n            Nui.each(array, function(v){\r\n                v.cellid = cellid++;\r\n                var order = v.order;\r\n                var className = v.className;\r\n                if(order === true){\r\n                    order = 'desc'\r\n                }\r\n                if(order === 'asc' || order === 'desc'){\r\n                    v.order = {};\r\n                    v.order[order] = 1;\r\n                }\r\n                if(v.order && !v.order.field){\r\n                    v.order.field = v.field\r\n                }\r\n\r\n                if(v.template === true){\r\n                    var tplid = 'content_'+v.cellid;\r\n                    self._template[tplid] = self._colTemplates[tplid] = v.filter || v.content;\r\n                }\r\n\r\n                if(!v.style){\r\n                    v.style = {};\r\n                }\r\n                \r\n                if(v.align){\r\n                    v.style['text-align'] = v.align;\r\n                }\r\n\r\n                if(v.valign){\r\n                    v.style['vertical-align'] = v.valign;\r\n                }\r\n\r\n                if(v.width){\r\n                    v.width = v.width.toString().replace(/px$/, '');\r\n                }\r\n\r\n                if(typeof className !== 'function'){\r\n                    if(!className){\r\n                        className = '';\r\n                    }\r\n    \r\n                    if(className){\r\n                        className = ' ' + Nui.trim(className);\r\n                    }\r\n    \r\n                    v.className = className;\r\n                }\r\n\r\n                if($.isEmptyObject(v.style)){\r\n                    delete v.style\r\n                }\r\n\r\n                if(parent && parent.fixed){\r\n                    v.fixed = parent.fixed\r\n                }\r\n\r\n                if(_class._hasChildren(v)){\r\n                    cellid = self._getRowNumber(v.children, index+1, arr, cellid, v)\r\n                }\r\n            })\r\n\r\n            if(parent){\r\n                return cellid\r\n            }\r\n\r\n            return arr.length\r\n        },\r\n        _initList:function(){\r\n            var self = this, opts = self._options;\r\n            if(opts.paging){\r\n                delete opts.paging.wrap;\r\n                opts.paging.wrap = self._foot.children('.datagrid-paging');\r\n                opts.paging.container = self._tableAllBox;\r\n                var pagingId = 'paging_'+self.__id;\r\n                var echoData = opts.paging.echoData;\r\n                opts.paging.echoData = function(data, type){\r\n                    if(self.element){\r\n                        self.data = data;\r\n                        self._render(type);\r\n                        if(typeof echoData === 'function'){\r\n                            echoData.call(opts, data, type)\r\n                        }\r\n                    }\r\n                }\r\n                self.paging = window[pagingId] = new Paging(opts.paging);\r\n\r\n                if(opts.isPaging === true){\r\n                    self.paging.query(true)\r\n                }\r\n            }\r\n            else if(opts.data){\r\n                self.data = opts.data;\r\n                self._render();\r\n            }\r\n        },\r\n        _bindEvent:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('scroll', self._tableAllBox, function(e, elem){\r\n                self._scroll(elem);\r\n                self._callback('Scroll', [e, elem, {left:elem.scrollLeft(), top:elem.scrollTop()}]);\r\n            })\r\n            self._event()\r\n        },\r\n        _getList:function(){\r\n            var self = this, opts = self._options, field = opts.dataField, list = self.data, _list;\r\n            if(field && Nui.type(list, 'Object')){\r\n                Nui.each(field.split('.'), function(v){\r\n                    if(list[v]){\r\n                        list = list[v]\r\n                    }\r\n                    else{\r\n                        list = null;\r\n                        return false;\r\n                    }\r\n                })\r\n            }\r\n            if(_list = self._callback('RenderBefore', [list])){\r\n                if(Nui.type(_list, 'Array')){\r\n                    list = _list\r\n                }\r\n            }\r\n            return list||[]\r\n        },\r\n        _render:function(type){\r\n            var self = this, opts = self._options, rowHtml = '', isScroll = opts.paging.scroll && opts.paging.scroll.enable === true;\r\n            self.list = self._getList();\r\n            if(isScroll && type === 'reload'){\r\n                self.element.find('.datagrid-tbody [row-pagenum=\"'+ (self.paging.current) +'\"]').nextAll().addBack().remove();\r\n            }\r\n            Nui.each(self._cols, function(v, k){\r\n                if(v.length){\r\n                    if(self.list.length && typeof opts.rowRender === 'function'){\r\n                        rowHtml = opts.rowRender.call(opts, self, self.list, v, k)\r\n                    }\r\n                    else{\r\n                        rowHtml = self._tpl2html('rows', {\r\n                            type:k,\r\n                            isFixed:opts.isFixed === true,\r\n                            cols:v,\r\n                            fields:opts.fields ? (opts.fields === true ? opts.fields : [].concat(opts.fields)) : null,\r\n                            list:self.list,\r\n                            placeholder:opts.placeholder,\r\n                            pageNum:self.paging.current,\r\n                            checked:self._checked,\r\n                            stringify:function(val){\r\n                                if(typeof opts.stringify=== 'function'){\r\n                                    return opts.stringify.call(opts, val)\r\n                                }\r\n                            },\r\n                            rowRender:function(val, i){\r\n                                if(typeof opts.onRowRender === 'function'){\r\n                                    return opts.onRowRender.call(opts, self, val, i)\r\n                                }\r\n                                return opts.onRowRender\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    var tbody = self.element.find('.datagrid-table-'+k+' .datagrid-tbody');\r\n                    var elems;\r\n                    if(isScroll && (type === 'jump' || type === 'reload')){\r\n                        elems = $(rowHtml).appendTo(tbody);\r\n                    }\r\n                    else{\r\n                        elems = tbody.html(rowHtml);\r\n                    }\r\n                    elems.find('.datagrid-checkbox').checkradio(self._checkradio());\r\n                }\r\n            })\r\n            self._resetSize();\r\n            self._callback('Render');\r\n        },\r\n        _checkradio:function(){\r\n            var self = this, opts = self._options;\r\n            var callback = function(elem, e){\r\n                var className = 'datagrid-checkbox-choose';\r\n                if(elem.hasClass(className)){\r\n                    var checked = elem.prop('checked');\r\n                    if(!elem.closest('.datagrid-table').hasClass('datagrid-table-all')){\r\n                        self._tableAllBox.find('.table-row[row-index=\"'+ elem.closest('.table-row').attr('row-index') +'\"]').find('.'+className).checkradio('checked', checked)\r\n                    }\r\n                    if(elem.attr('name') === 'datagrid-checkbox-all'){\r\n                        self._checked = checked;\r\n                        self._tableTbody.find('.'+ className +':enabled').checkradio('checked', checked)\r\n                    }\r\n                    else{\r\n                        var checked = self._tableTbody.find('.'+ className +':checked').length === self._tableTbody.find('.'+className).length;\r\n                        self._checked = checked;\r\n                        self._body.find('.table-thead .'+className).checkradio('checked', checked)\r\n                    }\r\n                }\r\n                self._callback('CheckboxChange', [e, elem]);\r\n            }\r\n            var _opts = {\r\n                callback:callback\r\n            }\r\n            return _opts;\r\n        },\r\n        _resetSize:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._rowHeight();\r\n            if(opts.height !== 'auto'){\r\n                var stop = self._tableAllBox.scrollTop();\r\n                self._tableAllBox.css('height', 'auto');\r\n                var conntailerHeight = self._container.height();\r\n                if(opts.height > 0){\r\n                    conntailerHeight = opts.height\r\n                }\r\n                var height = conntailerHeight - \r\n                    self._tableAllTitle.outerHeight() - \r\n                    _class._getSize(self._tableAllTitle, 'tb', 'margin') - \r\n                    self._foot.outerHeight() - \r\n                    _class._getSize(self._foot, 'tb', 'margin');\r\n                self._tableAllBox.height(height);\r\n                if(opts.isFixed === true){\r\n                    var table = self._tableAllBox.children();\r\n                    var barWidth = self._tableAllBox.height() >= table.outerHeight() ? 0 : scrollBarWidth;\r\n                    var fixedHeight = height;\r\n\r\n                    if(table.outerWidth() > self._tableAllBox.width()){\r\n                        fixedHeight -= scrollBarWidth;\r\n                    }\r\n                    \r\n                    if(Nui.browser.msie && Nui.browser.version <= 7 && opts.width === '100%'){\r\n                        table.width(self._tableAllBox.width() - barWidth)\r\n                    }\r\n\r\n                    self._tableFixedBox.height(fixedHeight);\r\n\r\n                    self._tableAllTitle.css({'margin-right':barWidth});\r\n\r\n                    self._tableRight.css('right', barWidth)\r\n                }\r\n                self._tableAllBox.scrollTop(stop);\r\n            }\r\n        },\r\n        _theadHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                self._tableFixed.find('.table-thead .table-cell').each(function(i){\r\n                    var item = $(this), cellid = item.attr('cellid');\r\n                    var elem = self._tableAll.find('.table-thead .table-cell[cellid=\"'+ cellid +'\"]');\r\n                    var height = elem.height();\r\n                    var _height = item.height(height).height() - height;\r\n                    item.height(height - _height);\r\n                })\r\n            }\r\n        },\r\n        _rowHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                var LeftRow = self._tableLeft.find('.table-tbody .table-row');\r\n                var RightRow = self._tableLeft.find('.table-tbody .table-row');\r\n\r\n                self._tableAll.find('.table-tbody .table-row').each(function(i){\r\n                    var height = $(this).outerHeight();\r\n                    LeftRow.eq(i).height(height);\r\n                    RightRow.eq(i).height(height);\r\n                })\r\n            }\r\n        },\r\n        _setRowCol:function(array, type, row){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            if(row === undefined){\r\n                row = 0;\r\n            }\r\n\r\n            if(!self._rows[type]){\r\n                self._rows[type] = []\r\n            }\r\n\r\n            if(!self._cols[type]){\r\n                self._cols[type] = []\r\n            }\r\n\r\n            if(array.length && !self._rows[type][row]){\r\n                self._rows[type][row] = []\r\n            }\r\n\r\n            Nui.each(array, function(v){\r\n                var hasChild = _class._hasChildren(v);\r\n                var data = {};\r\n\r\n                if(hasChild){\r\n                    data.colspan = _class._colspan(v.children);\r\n                    self._setRowCol(v.children, type, row + 1)\r\n                }\r\n\r\n                Nui.each(v, function(val, key){\r\n                    if(key !== 'children'){\r\n                        data[key] = val\r\n                    }\r\n                })\r\n\r\n                if(!hasChild){\r\n                    data.rowspan = self._rowNumber - row;\r\n                    self._cols[type].push(v)\r\n                }\r\n\r\n                self._rows[type][row].push(data)\r\n            })\r\n        },\r\n        _editInput:function(e, elem){\r\n            var dom = elem.get(0);\r\n            var keycode = e.keyCode;\r\n            if(keycode === 37 || keycode === 39){\r\n                var index = util.getFocusIndex(dom);\r\n                var edge;\r\n                if(keycode === 37){\r\n                    edge = index !== 0;\r\n                }\r\n                else{\r\n                    edge = index !== dom.value.length;\r\n                }\r\n                if(util.isTextSelect() || edge){\r\n                    return false\r\n                }\r\n            }\r\n        },\r\n        _horzFocus:function(e, elem, type, isTab){\r\n            var td = elem.closest('td.table-cell');\r\n            var _td = td[type]();\r\n            if(isTab){\r\n                e.preventDefault();\r\n            }\r\n            if(_td.length){\r\n                var input = _td.find('.datagrid-input');\r\n                if(input.length && !input.prop('readonly') && !input.prop('disabled')){\r\n                    input.focus();\r\n                    setTimeout(function(){\r\n                        input.select();\r\n                    })\r\n                }\r\n                else{\r\n                    this._horzFocus(e, _td.children(), type, isTab)\r\n                }\r\n            }\r\n            else{\r\n                var input;\r\n                var elems = td.closest('.table-row').children('td.table-cell');\r\n                if(type === 'prev'){\r\n                    $.each($.makeArray(elems).reverse(), function(k, v){\r\n                        var _input = $(v).find('.datagrid-input');\r\n                        if(_input.length){\r\n                            input = _input;\r\n                            return false;\r\n                        }\r\n                    });\r\n                }\r\n                else{\r\n                    elems.each(function(){\r\n                        var _input = $(this).find('.datagrid-input');\r\n                        if(_input.length){\r\n                            input = _input;\r\n                            return false;\r\n                        }\r\n                    })\r\n                }\r\n                if(input){\r\n                    this._verticalFocus(e, input, type)\r\n                }\r\n            }\r\n        },\r\n        _verticalFocus:function(e, elem, type){\r\n            var td = elem.closest('td.table-cell');\r\n            var index = td.index();\r\n            var tr = td.closest('.table-row')[type]();\r\n            if(tr.length){\r\n                var _td = tr.children('td.table-cell').eq(index);\r\n                var input = _td.find('.datagrid-input');\r\n                if(input.length && !input.prop('readonly') && !input.prop('disabled')){\r\n                    input.focus();\r\n                    setTimeout(function(){\r\n                        input.select();\r\n                    })\r\n                }\r\n                else{\r\n                    this._verticalFocus(e, _td.children(), type)\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        },\r\n        _dirFocus:function(e, elem){\r\n            var self = this, keycode = e.keyCode;\r\n            if($.inArray(keycode, self._keyCode) !== -1){\r\n                switch(keycode){\r\n                    case 37:\r\n                        self._horzFocus(e, elem, 'prev')\r\n                        break;\r\n                    case 38:\r\n                        self._verticalFocus(e, elem, 'prev')\r\n                        break;\r\n                    case 39:\r\n                        self._horzFocus(e, elem, 'next')\r\n                        break;\r\n                    case 40:\r\n                        self._verticalFocus(e, elem, 'next')\r\n                        break;\r\n                    default:\r\n                        self._horzFocus(e, elem, 'next', true)\r\n                }\r\n            }\r\n        },\r\n        _events:{\r\n            'click .table-tbody .table-row':'_getRowData _active',\r\n            'mouseenter .table-tbody .table-row':function(e, elem){\r\n                if(this._tableFixed.length){\r\n                    this._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').addClass('s-hover');\r\n                }\r\n                elem.addClass('s-hover');\r\n                this._callback('RowMouseover', [e, elem]);\r\n            },\r\n            'mouseleave .table-tbody .table-row':function(e, elem){\r\n                if(this._tableFixed.length){\r\n                    this._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').removeClass('s-hover');\r\n                }\r\n                elem.removeClass('s-hover');\r\n                this._callback('RowMouseout', [e, elem]);\r\n            },\r\n            'dblclick .table-tbody .table-row':'_getRowData _rowdblclick',\r\n            'focus .datagrid-input':'_enable _getRowData _focus',\r\n            'blur .datagrid-input':'_enable _getRowData _blur',\r\n            'focusin .table-tbody .table-cell':'_focusin',\r\n            'focusout .table-tbody .table-cell':'_focusout',\r\n            'click .datagrid-order > b':'_order',\r\n            'keydown .datagrid-input':'_editInput _dirFocus'\r\n        },\r\n        _order:function(e, elem){\r\n            elem.toggleClass('s-crt');\r\n            elem.siblings().removeClass('s-crt');\r\n            var parent = elem.parent();\r\n            var field = parent.attr('field');\r\n            var value = parent.children('b.s-crt').attr('value');\r\n            if(this.paging){\r\n                this.paging.condition[field] = value;\r\n                this.paging.query(true)\r\n            }\r\n        },\r\n        _enable:function(e, elem){\r\n            if(elem.prop('readonly') || elem.prop('disabled')){\r\n                e.stopPropagation();\r\n                return false\r\n            }\r\n        },\r\n        _active:function(e, elem, data){\r\n            var self = this;\r\n            self._callback('RowClick', [e, elem, data]);\r\n            if(self._options.isActive === true){\r\n                self.cancelActive();\r\n                self._activeElem = elem.addClass('s-crt');\r\n                if(self._tableFixed.length){\r\n                    self._activeFixedElem = self._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').addClass('s-crt');\r\n                }\r\n                self._callback('Active', [e, elem, data]);\r\n            }\r\n        },\r\n        _getRowData:function(e, elem){\r\n            if(elem.hasClass('table-row')){\r\n                return elem.data()\r\n            }\r\n            return elem.closest('.table-row').data()\r\n        },\r\n        _focus:function(e, elem, data){\r\n            this._active(e, elem.closest('.table-row'), data)\r\n            return this._callback('Focus', arguments)\r\n        },\r\n        _blur:function(e, elem, data){\r\n            return this._callback('Blur', arguments)\r\n        },\r\n        _focusin:function(e, elem){\r\n            elem.addClass('s-focus');\r\n            return this._callback('Focusin', arguments)\r\n        },\r\n        _focusout:function(e, elem){\r\n            elem.removeClass('s-focus');\r\n            return this._callback('Focusout', arguments)\r\n        },\r\n        _rowdblclick:function(e, elem, data){\r\n            return this._callback('RowDblclick', arguments)\r\n        },\r\n        _scroll:function(elem){\r\n            var self = this;\r\n            var scrollTop = elem.scrollTop();\r\n            var scrollLeft = elem.scrollLeft();\r\n            self._tableFixedBox.scrollTop(scrollTop);\r\n            self._tableAllThead.scrollLeft(scrollLeft);\r\n        },\r\n        resize:function(){\r\n            this._theadHeight();\r\n            this._resetSize();\r\n            this._callback('Resize')\r\n        },\r\n        scrollTo:function(x, y){\r\n            var elem = this._tableAllBox;\r\n            elem.scrollTop(y||0);\r\n            elem.scrollLeft(x||0);\r\n        },\r\n        cancelActive:function(){\r\n            if(this._options.isActive === true && this._activeElem){\r\n                this._activeElem.removeClass('s-crt');\r\n                delete this._activeElem\r\n            }\r\n        },\r\n        checkedData:function(field){\r\n            var self = this;\r\n            var data = [];\r\n            self._tableAllBox.find('.datagrid-checkbox-choose:checked').each(function(){\r\n                var _data = $(this).closest('.table-row').data();\r\n                if(field){\r\n                    data.push(_data[field]);\r\n                }\r\n                else{\r\n                    data.push(_data);\r\n                }\r\n            })\r\n            return data;\r\n        }\r\n    })\r\n})\nNui.define('pages/components/datagrid/script/checkradio',function(require,imports,renders,extend){\n\tvar module=this;\n\t/**\r\n\t * @filename jquery.checkradio.js\r\n\t * @author Aniu[2016-04-27 14:00]\r\n\t * @update Aniu[2016-08-23 22:44]\r\n\t * @version v1.4\r\n\t * @description 模拟单选复选框\r\n\t */\r\n\t\r\n\t;!(function($, undefined){\r\n\t    $.fn.checkradio = function(attr, value){\r\n\t\t\tif(!attr || $.isPlainObject(attr)){\r\n\t\t\t\tvar o = $.extend({\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 配置开关按钮\r\n\t\t\t\t\t * @type <Object>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tswitches:{\r\n\t\t\t\t\t\toff:'',\r\n\t\t\t\t\t\ton:''\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 点击元素状态改变前回调，如返回值为false则将阻止状态改变\r\n\t\t\t\t\t * @type <Function>\r\n\t\t\t\t\t * @return <undefined, Boolean>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tbeforeCallback:$.noop,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 点击元素状态改变后回调\r\n\t\t\t\t\t * @type <Function>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tcallback:$.noop\r\n\t\t\t\t}, attr||{});\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tvar me = $(this);\r\n\t\t\t\t\tvar checkradio = me.closest('.ui-checkradio');\r\n\t\t\t\t\tif(!checkradio.length){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar checked = me.prop('checked') ? ' s-checked' : '';\r\n\t\t\t\t\tvar disabled = me.prop('disabled') ? ' s-dis' : '';\r\n\t\t\t\t\tvar name = me.attr('name');\r\n\t\t\t\t\tvar switches = $.extend({}, o.switches, me.data()||{});\r\n\t\t\t\t\tvar switchElem = checkradio.find('.text');\r\n\t\t\t\t\tvar type = 'radio';\r\n\t\t\t\t\tif(me.is(':checkbox')){\r\n\t\t\t\t\t\ttype = 'checkbox';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(checkradio.children().attr('checkname')){\r\n\t\t\t\t\t\tcheckradio.children().attr('class', 'ui-'+ type + checked + disabled);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(switches.off && switches.on){\r\n\t\t\t\t\t\t\tcheckradio.addClass('ui-switches');\r\n\t\t\t\t\t\t\tswitchElem = $('<s class=\"text\">'+ (me.prop('checked') ? switches.on : switches.off) +'</s>').insertBefore(me);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tme.css({position:'absolute', top:'-999em', left:'-999em', opacity:0}).wrap('<i></i>');\r\n\t\t\t\t\t\tcheckradio.wrapInner('<em class=\"ui-'+ type + checked + disabled +'\" checkname=\"'+ name +'\"></em>')\r\n\t\t\t\t\t\t.children().click(function(e){\r\n\t\t\t\t\t\t\tvar ele = $(this);\r\n\t\t\t\t\t\t\tif(me.is(':disabled') || o.beforeCallback(me, e) === false){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(me.is(':checkbox')){\r\n\t\t\t\t\t\t\t\tvar checked = me.prop('checked');\r\n\t\t\t\t\t\t\t\tme.prop('checked', !checked);\r\n\t\t\t\t\t\t\t\tele[(checked ? 'remove' : 'add') + 'Class']('s-checked');\r\n\t\t\t\t\t\t\t\tif(switchElem.length){\r\n\t\t\t\t\t\t\t\t\tswitchElem.text(checked ? switches.off : switches.on);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tif(me.prop('checked')){\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tme.prop('checked', true);\r\n\t\t\t\t\t\t\t\t$('.ui-radio[checkname=\"'+ name +'\"]').removeClass('s-checked');\r\n\t\t\t\t\t\t\t\tele.addClass('s-checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\to.callback(me, e)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(o.init && !me.is(':disabled') && o.beforeCallback(me) !== false){\r\n\t\t\t\t\t\to.callback(me, 'init')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn $(this).prop(attr, value == true).checkradio();\r\n\t\t\t}\r\n\t    }\r\n\t})(jQuery);\n});\nNui.define('pages/components/datagrid/script/paging',function(require,imports,renders,extend){\n\tvar module=this;\n\t/**\n\t * @filename jquery.paging.js\n\t * @author Aniu[2014-03-29 10:07]\n\t * @update Aniu[2016-12-06 11:23]\n\t * @version v2.9.1\n\t * @description 分页组件\n\t */\n\t\n\t;!(function(window, document, $, undefined){\n\t    var resize = function(){\n\t        \n\t    };\n\t    var request = function(op){\n\t        op.dataType = 'json';\n\t        return $.ajax(op)\n\t    };\n\t    \n\t    function Paging(options){\n\t        var that = this;\n\t        that.load = false;\n\t        //获取实例对象的名称\n\t        that.instance = function(){\n\t            for(var attr in window){\n\t                if(window[attr] == that){\n\t                    return attr.toString();\n\t                }\n\t            }\n\t        }\n\t        $.extend(that, $.extend(true, {\n\t            /**\n\t             * @function ajax请求url\n\t             * @type <String>\n\t             */\n\t            url:'',\n\t            /**\n\t             * @function 页码容器\n\t             * @type <Object>\n\t             */\n\t            wrap:null,\n\t            /**\n\t             * @function 传递参数值\n\t             * @type <String>\n\t             * @desc 将传递参数封装为json字符串，后台接收该参数来获取该json\n\t             */\n\t            paramJSON:'',\n\t            /**\n\t             * @function 当页显示数量\n\t             * @type <Number>\n\t             */\n\t            pCount:10,\n\t            /**\n\t             * @function 当前页码\n\t             * @type <Number>\n\t             */\n\t            current:1,\n\t            /**\n\t             * @function 列表数据总数\n\t             * @type <Number>\n\t             */\n\t            aCount:0,\n\t            /**\n\t             * @function 是否初始化展示最后一页\n\t             * @type <Boolean>\n\t             */\n\t            last:false,\n\t            /**\n\t             * @function 是否读取全部数据\n\t             * @type <Boolean>\n\t             * @desc 该参数启用后，接口将无法接收到pCount和current参数，前后端约定好，若没接收到这2个参数，将返回全部数据\n\t             */\n\t            allData:false,\n\t            /**\n\t             * @function 是否完整形式展示分页\n\t             * @type <Boolean>\n\t             */\n\t            isFull:true,\n\t\t\t\t/**\n\t             * @function 滚动分页配置\n\t             * @type <Obejct>\n\t             */\n\t            container:window,\n\t\t\t\tscroll:{\n\t\t\t\t\tenable:false\n\t\t\t\t},\n\t            /**\n\t             * @function ajax配置信息\n\t             * @type <JSON Obejct, Function>\n\t             */\n\t            ajax:{},\n\t            /**\n\t             * @function 接口接收参数\n\t             * @type <JSON Obejct>\n\t             */\n\t            condition:{},\n\t            /**\n\t             * @function loading加载效果\n\t             * @type <JSON Obejct>\n\t             */\n\t            loading:{\n\t                //loading容器\n\t                wrap:null,\n\t                //显示loading\n\t                show:function(){\n\t                    var that = this;\n\t                    that.hide();\n\t                    var wrap = that.wrap;\n\t                    wrap && wrap.append('<i class=\"ui-loading\" style=\"position:absolute;\">正在加载数据...</i>').css({position:'relative'});\n\t                },\n\t                //隐藏loading\n\t                hide:function(){\n\t                    $('.ui-loading').remove();\n\t                }\n\t            },\n\t            /**\n\t             * @function 上一页下一页按钮文字\n\t             * @type <JSON Obejct>\n\t             */\n\t            button:{\n\t                prev:'«',\n\t                next:'»',\n\t                first:'',\n\t                last:''\n\t            },\n\t            /**\n\t             * @function 拓展分页部分\n\t             * @type <JSON Obejct>\n\t             */\n\t            extPage:{\n\t                wrap:null,\n\t                desc:'',\n\t                prev:'上一页',\n\t                next:'下一页'\n\t            },\n\t            /**\n\t             * @function 传统页面刷新方式\n\t             * @type <Null, Function>\n\t             * @param current <Number> 目标页码\n\t             * @desc 值为函数将启用\n\t             */\n\t            refreshCallback:null,\n\t            /**\n\t             * @function ajax响应数据并且分页创建完毕后回调函数\n\t             * @type <Function>\n\t             * @param data <JSON Object> 响应数据\n\t             */\n\t            endCallback:$.noop,\n\t            /**\n\t             * @function 点击分页按钮回调函数\n\t             * @type <Function>\n\t             * @param current <Number> 目标页码\n\t             */\n\t            jumpCallback:$.noop,\n\t            /**\n\t             * @function 分页数据处理\n\t             * @type <Function>\n\t             * @param data <JSON Object> 响应数据\n\t             */\n\t            echoData:$.noop\n\t        }, Paging.options, options||{}));\n\t        that.container = $(that.container||window);\n\t\t\tif(that.scroll.enable === true){\n\t\t\t\tthat.wrap = null;\n\t\t\t\tthat.children = that.container[0] === window ? $(document.body) : that.container.children();\n\t\t\t\tthat.container.scroll(function(){\n\t\t\t\t\tthat.resize();\n\t\t\t\t}).resize(function(){\n\t\t\t\t\tthat.resize();\n\t\t\t\t});\n\t\t\t}\n\t    }\n\t    \n\t    Paging.options = {};\n\t    Paging.config = function(options){\n\t    \t$.extend(true, Paging.options, options||{})\n\t    }\n\t\n\t    Paging.prototype = {\n\t        constructor:Paging,\n\t        //页面跳转\n\t        jump:function(page){\n\t            var that = this, count = Math.ceil(that.aCount/that.pCount), current;\n\t            that.showload = true;\n\t            if(that.aCount > 0){\n\t                if(typeof(page) === 'object'){\n\t                    var val = $(page).prevAll('input').val();\n\t                    if(val <= count && val != that.current){\n\t                        current = parseInt(val);\n\t                    }\n\t                    else{\n\t                        current = that.current;\n\t                    }\n\t                }\n\t                else if(page > 0 && page <= count){\n\t                    current = page;\n\t                }\n\t                else if(page < 0){\n\t                    current = count + page + 1;\n\t                }\n\t                else{\n\t                    current = count;\n\t                }\n\t            }\n\t            else{\n\t                current = page;\n\t            }\n\t            that.current = that.condition.current = current;\n\t            that.jumpCallback(current);\n\t            if(typeof that.refreshCallback === 'function'){\n\t                that.refreshCallback(current);\n\t                that.create();\n\t                return;\n\t            }\n\t            that.getData('jump');\n\t        },\n\t        query:function(type){\n\t            var that = this;\n\t            that.showload = true;\n\t            that.load = false;\n\t            if(typeof that.refreshCallback !== 'function' || type !== 'refresh'){\n\t                if(type){\n\t                    if(type === 'noloading'){\n\t                        that.showload = false;\n\t                    }\n\t                    else if(type !== 'reload'){\n\t                        that.current = 1;\n\t                    }\n\t                    that.filter();\n\t                    that.condition.current = that.current;\n\t                }\n\t                else{\n\t                    that.condition = {current:that.current = 1};\n\t                }\n\t                that.getData(type||'');\n\t            }\n\t            else{\n\t                that.create();\n\t            }\n\t            \n\t        },\n\t        filter:function(){\n\t            var that = this;\n\t            for(var i in that.condition){\n\t                if(!that.condition[i]){\n\t                    delete that.condition[i];\n\t                }\n\t            }\n\t        },\n\t        //ajax请求数据\n\t        getData:function(type){\n\t            var that = this;\n\t            //that.showload && that.loading.show(type);\n\t            that.condition.pCount = that.pCount;\n\t            if(that.allData === true){\n\t                delete that.condition.pCount;\n\t                delete that.condition.current;\n\t            }\n\t            var param = that.condition;\n\t            if(that.paramJSON){\n\t                param = [];\n\t                $.each(that.condition, function(key, val){\n\t                    param.push(key+':'+val);\n\t                });\n\t                var temp = param.length ? '{'+param.join(',')+'}' : '';\n\t                param = {};\n\t                param[that.paramJSON] = temp;\n\t            }\n\t            \n\t            var ajax = typeof that.ajax === 'function' ? that.ajax() : that.ajax;\n\t            delete ajax.success;\n\t\n\t            if(!that.load){\n\t            \tthat.load = true;\n\t            \trequest($.extend({}, true, {\n\t                    url:that.url,\n\t                    data:param,\n\t                    success:function(data){\n\t                        //that.showload && that.loading.hide();\n\t                        try{\n\t                            data.current = that.current;\n\t                        }\n\t                        catch(e){}\n\t                        var stop = 0, index;\n\t                        if(that.container[0] !== window && type !== 'reload' && type !== 'noloading' && (type !== 'jump' || (type === 'jump' && !that.scroll.enable))){\n\t                        \tthat.container.scrollTop(0)\n\t                        \tthat.container.scrollLeft(0)\n\t                        }\n\t                        if(type === 'reload'){\n\t                            var box = that.container;\n\t                            if(that.selector){\n\t                                box = that.container.find(that.selector);\n\t                                stop = box.scrollTop()\n\t                            }\n\t                            else{\n\t                                stop = box.scrollTop()\n\t                            }\n\t                            index = box.find('tr.rows.s-crt').index();\n\t                        }\n\t                        that.echoData(data, type);\n\t\n\t                        that.aCount = data.aCount;\n\t                        that.load = false;\n\t\t\t\t\t\t\tif(that.scroll.enable === true){\n\t\t\t\t\t\t\t\tthat.resize();\n\t\t\t\t\t\t\t}\n\t                        resize();\n\t                        if(stop > 0){\n\t                            var box = that.container;\n\t                            if(that.selector){\n\t                                box = that.container.find(that.selector);\n\t                                box.scrollTop(stop)\n\t                            }\n\t                            else{\n\t                                box.scrollTop(stop)\n\t                            }\n\t                            if(index >= 0){\n\t                                box.find('tr.rows').eq(index).addClass('s-crt');\n\t                            }\n\t                        }\n\t                        if(that.last === true){\n\t                            that.last = false;\n\t                            that.jump(-1);\n\t                            return;\n\t                        }\n\t                        that.create();\n\t                        that.endCallback(data);\n\t                    },\n\t                    error:function(){\n\t                        that.showload && that.loading.hide();\n\t                        that.load = false;\n\t                    }\n\t                }, ajax||{}));\n\t            }\n\t        },\n\t        //过滤分页中input值\n\t        trim:function(o){\n\t            var val = Math.abs(parseInt($(o).val()));\n\t            !val && (val = 1);\n\t            $(o).val(val);\n\t        },\n\t        echoList:function(html, i, instance){\n\t            var that = this;\n\t            if(that.current == i){\n\t                html = '<li><span class=\"s-crt\">'+ i +'</span></li>';\n\t            }\n\t            else{\n\t                html = '<li><a href=\"javascript:'+ instance +'.jump('+ i +');\" target=\"_self\">'+ i +'</a></li>';\n\t            }\n\t            return html;\n\t        },\n\t\t\tresize:function(){\n\t\t\t\tvar that = this;\n\t\t\t\ttry{\n\t\t\t\t\tvar stop = that.container.scrollTop();\n\t\t\t\t\tvar height = that.container.height();\n\t\t\t\t\tvar cheight = that.children.outerHeight();\n\t\t\t\t\tif(!that.load && Math.ceil(that.aCount/that.pCount) > that.current && ((stop === 0 && cheight <= height) || (height + stop >= cheight))){\n\t\t\t\t\t\tthat.jump(++that.current);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch(e){\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t        //创建分页骨架\n\t        create:function(){\n\t            var that = this, button = that.button,\n\t                count = Math.ceil(that.aCount/that.pCount), current = that.current,\n\t                html = '', next = count == current ? 1 : current+1,\n\t                instance = that.instance(), extPage = that.extPage;\n\t\n\t            if(extPage.wrap){\n\t                var page = '<div>';\n\t                page += current == count || count == 0 ?\n\t                     '<span>'+ extPage.next +'</span>' : '<a href=\"javascript:'+ instance +'.jump('+ (current+1) +');\" target=\"_self\">'+ extPage.next +'</a>';\n\t                page += current == 1 ?\n\t                     '<span>'+ extPage.prev +'</span>' : '<a href=\"javascript:'+ instance +'.jump('+ (current-1) +');\" target=\"_self\">'+ extPage.prev +'</a>';\n\t                page += '</div><em>'+ (count !== 0 ? current : 0) +'/'+ count +'</em><strong>共'+ that.aCount + extPage.desc +'</strong>';\n\t                extPage.wrap.html(page);\n\t            }\n\t            \n\t            if(!that.wrap){\n\t                return;\n\t            }\n\t            \n\t            if(!count){\n\t                that.wrap.empty();\n\t                return;\n\t            }\n\t\n\t            html += (function(){\n\t                var tpl = '';\n\t                if(current == 1){\n\t                    if(button.first){\n\t                        tpl += '<li><span>'+ button.first +'</span></li>';\n\t                    }\n\t                    tpl += '<li><span>'+ button.prev +'</span></li>';\n\t                }\n\t                else{\n\t                    if(that.button.first){\n\t                        tpl += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">'+ button.first +'</a></li>';\n\t                    }\n\t                    tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ (current-1) +');\" target=\"_self\">'+ button.prev +'</a></li>';\n\t                }\n\t                return tpl;\n\t            })();\n\t            if(count <= 7){\n\t                for(var i = 1; i <= count; i++){\n\t                    html += that.echoList(html, i, instance);\n\t                }\n\t            }\n\t            else{\n\t                if(current-3 > 1 && current+3 < count){\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">1</a></li>';\n\t                    html += '<li><em>...</em></li>';\n\t                    for(var i = current-2; i <= current+2; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                    html += '<li><em>...</em></li>';\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ count +'</a></li>';\n\t                }\n\t                else if(current-3 <= 1 && current+3 < count){\n\t                    for(var i = 1; i <= 5; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                    html += '<li><em>...</em></li>';\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ count +'</a></li>';\n\t                }\n\t                else if(current-3 > 1 && current+3 >= count){\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">1</a></li>';\n\t                    html += '<li><em>...</em></li>';\n\t                    for(var i = count-5; i <= count; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                }\n\t            }\n\t            html += (function(){\n\t                var tpl = '';\n\t                if(current == count){\n\t                    tpl += '<li><span>'+ button.next +'</span></li>';\n\t                    if(button.last){\n\t                        tpl += '<li><span>'+ button.last +'</span></li>';\n\t                    }\n\t                }\n\t                else{\n\t                    tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ (current+1) +');\" target=\"_self\">'+ button.next +'</a></li>';\n\t                    if(button.last){\n\t                        tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ button.last +'</a></li>';\n\t                    }\n\t                }\n\t                return tpl;\n\t            })();\n\t            if(that.isFull){\n\t                html += '<li><em>跳转到第</em><input type=\"text\" onblur=\"'+ instance +'.trim(this);\" value=\"'+ next +'\" /><em>页</em><button type=\"button\" onclick=\"'+ instance +'.jump(this);\">确定</button></li>';\n\t            }\n\t            html = '<ul class=\"ui-paging\">' + html + '</ul>';\n\t            that.wrap.html(html);\n\t        }\n\t    }\n\t    \n\t    $.extend({\n\t        paging:function(name, options){\n\t            if(options === undefined){\n\t                options = name;\n\t                name = 'paging';\n\t            }\n\t            var page = window[name] = new Paging(options);\n\t            if(typeof window[name].refreshCallback !== 'function'){\n\t                page.query(true);\n\t                return page;\n\t            }\n\t            page.query('refresh');\n\t            return page\n\t        }\n\t    });\n\t    \n\t    window.Paging = Paging;\n\t    \n\t})(window, document, jQuery);\n});\nNui.define('./script/demo',function(require,imports,renders,extend){\n\tvar module=this;\n\tvar paging = require('pages/components/datagrid/script/paging');\r\n\tvar checkradio = require('pages/components/datagrid/script/checkradio');\r\n\tvar template = require('template');\r\n\tvar datagrid = require('src/components/datagrid');\r\n\t\r\n\tvar a = datagrid({\r\n\t    container:'#data',\r\n\t    paging:{\r\n\t        url:'http://127.0.0.1:8001/data/',\r\n\t        pCount:20\r\n\t    },\r\n\t    width:'110%',\r\n\t    columns:[{\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname',\r\n\t        fixed:'left'\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname1',\r\n\t        fixed:'left'\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:200,\r\n\t        field:'buname',\r\n\t        children:[{\r\n\t            children:[{\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }, {\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }]\r\n\t        }]\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname',\r\n\t        children:[{\r\n\t            title:'名称',\r\n\t            width:100,\r\n\t            field:'buname',\r\n\t            children:[{\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }]\r\n\t        }]\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname'\r\n\t    }],\r\n\t    rowRender:function(self, list, v, k){\r\n\t        return template.render(renders(''+''\r\n\t            +'<%each list%>'+''\r\n\t                +'<tr class=\"table-row\">'+''\r\n\t                    +'<%each cols col%>'+''\r\n\t                    +'<td class=\"table-cell\" width=\"<%col.width%>\">'+''\r\n\t                    \r\n\t                    +'</td>'+''\r\n\t                    +'<%/each%>'+''\r\n\t                +'</tr>'+''\r\n\t            +'<%/each%>'+''\r\n\t        +''), {\r\n\t            cols:v,\r\n\t            list:list\r\n\t        })\r\n\t    }\r\n\t})\r\n\t\r\n\t$('h1').click(function(){\r\n\t    a.option('isBorder', true)\r\n\t})\n});\n"]}