{"version":3,"sources":["demo-debug.js"],"names":["define","Nui","regex","mobile","tel","email","idcard","cn","taxnum","toFixed","digit","decimal","number","isNaN","undefined","value","toString","mend","num","zero","pre","replace","i","indexOf","integer","parseInt","substr","_decimal","Math","round","len","length","getParam","name","urls","url","decodeURI","location","href","startIndex","temp","param","split","each","val","setParam","self","this","type","key","reg","RegExp","and","supportCss3","style","prefix","humpString","htmlStyle","document","documentElement","_toHumb","string","$0","$1","toUpperCase","push","supportHtml5","attr","element","createElement","target","jQuery","appendTo","children","click","end","remove","formatDate","timestamp","format","date","Date","map","M","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","all","single","getFullYear","getData","item","field","that","data","result","voids","total","arr","serializeArray","find","div","v","trim","isArray","k","join","once","$","getFocusIndex","index","setSelectionRange","selectionStart","selection","createRange","textRange","createTextRange","setEndPoint","text","e","isTextSelect","navigator","userAgent","toLowerCase","textArea","activeElement","substring","selectionEnd","window","getSelection","isInstallPDF","flag","browser","webkit","mozilla","version","plugins","test","ActiveXObject","prototype","eval","isInstallFlash","msie","formatNumber","dot","toLocaleString","numberToCN","integerNum","decimalNum","parts","cnNums","Array","cnIntRadice","cnIntUnits","cnDecUnits","chineseStr","isMinus","abs","parseFloat","zeroCount","IntLen","n","p","q","decLen","Number","opts","constr","constructor","isComponent","__component_name","elem","doc","events","_events","call","evt","ele","ret","callback","cbs","_cb","_that","cb","evts","shift","_on","on","util","template","tplid","caches","render","getElementById","nodeName","innerHTML","options","openTag","closeTag","methods","isstr","snippet","iscode","code","joinCode","joinSnippet","replaceInclude","tpl","regs","rege","str","tid","tmp","isNode","HTMLElement","obj","nodeType","isDom","$list","compile","variables","Rander","Function","error","dom","out","line","msg","codes","JSON","stringify","message","console","logic","res","match","exists","lastIndexOf","_call","slice","start","trimLeft","isVal","a","b","rep","syntax","regexp","method","config","args","arguments","module","require","extend","callMethod","id","_options","__id","apply","bsie7","blur","statics","__instances","__setMethod","apis","components","methodName","container","mod","nui","_mod","exports","_init","noop","_jquery","_getSize","selector","dir","size","group","l","r","lr","t","tb","border","padding","margin","css","_$fn","fn","object","option","_$ready","init","hasInstance","exist","instances","_static","skin","className","onInit","onReset","onDestroy","_template","_exec","_getTarget","_class","_bindComponentName","_tplData","getName","arrs","__parent","_pclass","_name","unshift","_event","dalegate","trigger","_callback","__eventList","_off","_eventList","off","_delete","removeAttr","_reset","_tpl2html","isOriginal","isdef","isPlainObject","reset","destroy","component","scrollBarWidth","oldWidth","newWidth","cssText","body","appendChild","clientWidth","overflowY","removeChild","isRow","closest","hasClass","_activeElem","removeClass","_activeFixedElem","timer","win","clearTimeout","setTimeout","height","resize","_hasChildren","_colspan","array","count","columns","isFixed","isLine","isActive","isBorder","isPaging","isDir","keyCode","paging","fields","dataField","width","footer","placeholder","onFocusin","onFocusout","onFocus","onBlur","rowRender","onActive","onCancelActive","onRowRender","onRowClick","onRowDblclick","onCheckboxChange","onRender","onRenderBefore","onScroll","layout","table","thead","rows","_attr","_container","_columns","left","right","_checked","fixed","_keyCode","concat","_create","_rows","_cols","_colTemplates","_rowNumber","_getRowNumber","_setTemplate","_setRowCol","_hasLeftRight","isPage","checkradio","_checkradio","_body","_tableAll","_tableAllBox","_tableAllTitle","_tableAllThead","_tableLeft","_tableRight","_tableFixed","_tableFixedBox","_foot","_tableTbody","_theadHeight","_initList","_bindEvent","content","cellid","parent","order","filter","align","valign","isEmptyObject","wrap","pagingId","echoData","_render","Paging","query","_scroll","scrollLeft","top","scrollTop","_getList","_list","list","rowHtml","isScroll","scroll","enable","nextAll","addBack","cols","pageNum","current","checked","elems","tbody","html","_resetSize","prop","_rowHeight","stop","conntailerHeight","outerHeight","barWidth","fixedHeight","outerWidth","margin-right","_height","LeftRow","RightRow","eq","row","hasChild","colspan","rowspan","_editInput","get","keycode","edge","_horzFocus","isTab","td","_td","preventDefault","input","focus","select","makeArray","reverse","_input","_verticalFocus","tr","_dirFocus","inArray","click .table-tbody .table-row","mouseenter .table-tbody .table-row","addClass","mouseleave .table-tbody .table-row","dblclick .table-tbody .table-row","focus .datagrid-input","blur .datagrid-input","focusin .table-tbody .table-cell","focusout .table-tbody .table-cell","click .datagrid-order > b","keydown .datagrid-input","_order","toggleClass","siblings","condition","_enable","stopPropagation","_active","cancelActive","_getRowData","_focus","_blur","_focusin","_focusout","_rowdblclick","scrollTo","x","y","checkedData","_data","imports","renders","o","switches","beforeCallback","me","disabled","switchElem","is","insertBefore","position","opacity","wrapInner","load","instance","paramJSON","pCount","aCount","last","allData","isFull","ajax","loading","show","hide","append","button","prev","next","first","extPage","desc","refreshCallback","endCallback","jumpCallback","request","op","dataType","jump","page","ceil","showload","prevAll","create","success","box","echoList","cheight","empty","datagrid","title"],"mappings":"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","file":"demo-min.js.map?v=db5c8b6","sourcesContent":[";(function(define){\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 实用工具集\r\n */\r\n\r\nNui[define]('src/core/util', {\r\n    \r\n    /**\r\n     * @func 常用正则表达式\r\n     */\r\n    regex:{\r\n        //手机\r\n        mobile:/^0?(13|14|15|17|18)[0-9]{9}$/,\r\n        //电话\r\n        tel:/^[0-9-()（）]{7,18}$/,\r\n        //邮箱\r\n        email:/^\\w+((-w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/,\r\n        //身份证\r\n        idcard:/^\\d{17}[\\d|x]|\\d{15}$/,\r\n        //中文\r\n        cn:/^[\\u4e00-\\u9fa5]+$/,\r\n        //税号\r\n        taxnum:/^[a-zA-Z0-9]{15,20}$/\r\n    },\r\n\r\n    /**\r\n     * @func 四舍五入保留小数，原生toFixed会有精度问题\r\n     * @return <String>\r\n     * @param digit <String, Number> 待转换数字\r\n     * @param decimal <Number> 保留位数\r\n     * @param number <Number> 小数部分末尾最多显示0的数量\r\n     */\r\n    toFixed:function(digit, decimal, number){\r\n        if(isNaN(digit) || digit === ''){\r\n            return digit\r\n        }\r\n\r\n        //默认末尾只保留2个0\r\n        if(number === undefined){\r\n            number = 2\r\n        }\r\n\r\n        decimal = decimal || 0;\r\n\r\n        //将数字转换为字符串，用于分割\r\n        var value = digit.toString();\r\n\r\n        //补零\r\n        var mend = function(num){\r\n            var zero = '';\r\n            while(num > 0){\r\n                zero += '0';\r\n                num--\r\n            }\r\n            return zero\r\n        }\r\n\r\n        //正负数\r\n        var pre = '';\r\n        if(value < 0){\r\n            value = value.replace('-', '');\r\n            pre = '-';\r\n        }\r\n\r\n        //获取小数点所在位置\r\n        var i = value.indexOf('.');\r\n        //存在小数点\r\n        if(i !== -1 && decimal >= 0){\r\n            var integer = parseInt(value.substr(0, i));\r\n            //小数部分转为0.xxxxx\r\n            var _decimal = '0' + value.substr(i);\r\n            var num = '1' + mend(decimal);\r\n            _decimal = (Math.round(_decimal*num)/num).toFixed(decimal);\r\n            //小数四舍五入后，若大于等于1，整数部分需要加1\r\n            if(_decimal >= 1){\r\n                integer = (integer + 1).toString()\r\n            }\r\n            value = pre + integer + _decimal.substr(1)\r\n        }\r\n        //整数就直接补零\r\n        else if(decimal > 0){\r\n            value = pre + value + '.' + mend(decimal)\r\n        }\r\n\r\n        if(number !== null && number >= 0 && number < decimal){\r\n            value = value.replace(/0+$/, '');\r\n            var i = value.indexOf('.'), len = 0;\r\n            if(i !== -1){\r\n                len = value.substr(i+1).length;\r\n            }\r\n            while(len < number){\r\n                value = value + '0';\r\n                len++;\r\n            }\r\n            value = value.replace(/\\.$/, '');\r\n        }\r\n        \r\n        return value\r\n    },\r\n\r\n    /**\r\n     * @func 获取url参数值\r\n     * @return <String, Object>\r\n     * @param name <String, Undefined> 参数名，不传则以对象形式返回全部参数\r\n     * @param urls <String, Undefined> url地址，默认为当前访问地址\r\n     */\r\n    getParam:function(name, urls){\r\n        var url = decodeURI(urls||location.href), value = {};\r\n        startIndex = url.indexOf('?');\r\n        if(startIndex++ > 0){\r\n            var param = url.substr(startIndex).split('&'), temp;\r\n            Nui.each(param, function(val){\r\n                temp = val.split('=');\r\n                value[temp[0]] = temp[1];\r\n            });\r\n        }\r\n        if(typeof name === 'string' && name){\r\n            value = (temp = value[name]) !== undefined ? temp : '';\r\n        }\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * @func 设置url参数值\r\n     * @return <String> 设置后的url\r\n     * @param name <String, Object> 参数名或者{key:value, ...}参数集合\r\n     * @param value <String> 参数值或者url\r\n     * @param urls <String, Undefined> url，没有则获取浏览器url\r\n     */\r\n    setParam:function(name, value, urls){\r\n        var self = this, url;\r\n        if(Nui.type(name, 'Object')){\r\n            url = value||location.href;\r\n            Nui.each(name, function(val, key){\r\n                if(val){\r\n                    url = self.setParam(key, val, url);\r\n                }\r\n            });\r\n        }\r\n        else{\r\n            url = urls||location.href;\r\n            if(url.indexOf('?') === -1){\r\n                url += '?';\r\n            }\r\n            if(url.indexOf(name+'=') !== -1){\r\n                var reg = new RegExp('('+name+'=)[^&]*');\r\n                url = url.replace(reg, '$1'+value);\r\n            }\r\n            else{\r\n                var and = '';\r\n                if(url.indexOf('=') !== -1){\r\n                    and = '&';\r\n                }\r\n                url += and+name+'='+value;\r\n            }\r\n        }\r\n        return url;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持CSS3属性\r\n     * @return <Boolean>\r\n     * @param style <String> 样式属性\r\n     */\r\n    supportCss3:function(style){\r\n        var prefix = ['webkit', 'Moz', 'ms', 'o'],\r\n            i, humpString = [],\r\n            htmlStyle = document.documentElement.style,\r\n            _toHumb = function (string) {\r\n                return string.replace(/-(\\w)/g, function ($0, $1) {\r\n                    return $1.toUpperCase();\r\n                });\r\n            };\r\n        for (i in prefix)\r\n            humpString.push(_toHumb(prefix[i] + '-' + style));\r\n        humpString.push(_toHumb(style));\r\n        for (i in humpString)\r\n            if (humpString[i] in htmlStyle) return true;\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持Html5属性\r\n     * @return <Boolean>\r\n     * @param attr <String> 属性\r\n     * @param element <String> DOM元素标签\r\n     */\r\n    supportHtml5:function(attr, element){\r\n        return attr in document.createElement(element);\r\n    },\r\n\r\n    /**\r\n     * @func 模拟location.href跳转\r\n     * @return <Undefined>\r\n     * @param url <String> 跳转的url\r\n     * @param target <String> 跳转类型，默认为_self\r\n     */\r\n    location:function(url, target){\r\n        if(url){\r\n            jQuery('<a href=\"'+ url +'\"'+ (target ? 'target=\"'+ (target||'_self') +'\"' : '' ) +'><span></span></a>')\r\n                .appendTo('body').children().click().end().remove();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @func 格式化日期\r\n     * @return <String>\r\n     * @param timestamp <String, Number> 时间戳，为空返回横杠“-”\r\n     * @param format <String, Undefined> 输出格式，为空则返回时间戳\r\n     */\r\n    formatDate:function(timestamp, format){\r\n        if(timestamp = parseInt(timestamp)){\r\n            if(!format){\r\n                return timestamp;\r\n            }\r\n            var date = new Date(timestamp);\r\n            var map = {\r\n                'M':date.getMonth()+1,\r\n                'd':date.getDate(),\r\n                'h':date.getHours(),\r\n                'm':date.getMinutes(),\r\n                's':date.getSeconds()\r\n            }\r\n            format = format.replace(/([yMdhms])+/g, function(all, single){\r\n                var value = map[single];\r\n                if(value !== undefined){\r\n                    if(all.length > 1){\r\n                       value = '0' + value;\r\n                       value = value.substr(value.length-2);\r\n                   }\r\n                   return value;\r\n                }\r\n                else if(single === 'y'){\r\n                    return (date.getFullYear() + '').substr(4-all.length);\r\n                }\r\n                return all;\r\n            });\r\n            return format;\r\n        }\r\n        return '-';\r\n    },\r\n\r\n    /**\r\n     * @func 获取表单数据集合\r\n     * @return <Object>\r\n     * @param element <jQuery Object> 表单元素集合或者form元素\r\n     * @param item <String> 将name相同表单元素值分隔，当设置为jquery选择器时，配合field参数使用，用于获取item中表单元素的数据集合\r\n     * @param field <String> 字段名，配合item参数使用，返回对象中会包含该字段\r\n     * @example\r\n     * <form id=\"form\">\r\n     *  <input type=\"hidden\" name=\"name0\" value=\"0\">\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"1\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"2\">\r\n     * </div>\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"3\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"4\">\r\n     * </div>\r\n     * <form>\r\n     * getData($('#form'), 'div', 'list').result => \r\n     * {\r\n     *  name0:'0',\r\n     *  list:[{\r\n     *      name1:'1',\r\n     *      name2:'2'\r\n     *  }, {\r\n     *      name1:'3',\r\n     *      name2:'4'\r\n     *  }]\r\n     * }\r\n     */\r\n    getData:function(element, item, field){\r\n        var that = this;\r\n    \tvar data = {\r\n    \t\t'result':{},\r\n    \t\t'voids':0, //字段中空值数量\r\n            'total':0 //总计多少个字段\r\n        }\r\n        if(element.length){\r\n            var arr = element.serializeArray();\r\n            if(!arr.length){\r\n                arr = element.find('[name]').serializeArray();\r\n            }\r\n            var div = ',';\r\n            if(item && typeof item === 'string' && !field){\r\n                div = item\r\n            }\r\n            Nui.each(arr, function(v, i){\r\n                var val = Nui.trim(v.value)\r\n                data.total++;\r\n                if(!val){\r\n                    data.voids++\r\n                }\r\n                var name = v.name;\r\n                if(!Nui.isArray(data.result[name])){\r\n                    data.result[name] = [];\r\n                }\r\n                data.result[name].push(val)\r\n            })\r\n            Nui.each(data.result, function(v, k){\r\n                data.result[k] = v.join(div)\r\n            })\r\n            if(item && field){\r\n                var once = false;\r\n                data.result[field] = [];\r\n                element.find(item).each(function(){\r\n                    var result = that.getData($(this).find('[name]')).result;\r\n                    if(item !== true && !once){\r\n                        Nui.each(result, function(v, k){\r\n                            delete data.result[k];\r\n                        });\r\n                        once = true\r\n                    }\r\n                    data.result[field].push(result)\r\n                })\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    /**\r\n     * @func 获取输入框内光标位置\r\n     * @return <Number>\r\n     * @param element <DOM Object> 表单元素dom对象\r\n     */\r\n    getFocusIndex:function(element){\r\n        var val = Nui.trim(element.value);\r\n        var index = val.length;\r\n        if(element.setSelectionRange){\r\n            index = element.selectionStart;\r\n        }\r\n        else{\r\n            //ie\r\n            try{\r\n                var temp = document.selection.createRange();\r\n                var textRange = element.createTextRange();\r\n                textRange.setEndPoint('endtoend', temp);\r\n                index = textRange.text.length;\r\n            }\r\n            catch(e){}\r\n        }\r\n        return index;\r\n    },\r\n    /**\r\n     * @func 检测页面是否有文本被选择\r\n     * @return <Boolean>\r\n     */\r\n    isTextSelect:function(){\r\n        var text = '';\r\n        //ie10以及以下浏览器\r\n        if(document.selection){\r\n            text =  document.selection.createRange().text;\r\n        }\r\n        //火狐和ie11浏览器getSelection无法获取表单元素选中文本\r\n        else if(navigator.userAgent.toLowerCase().indexOf('gecko') !== -1){\r\n            var textArea = document.activeElement;\r\n            text = textArea.value.substring(textArea.selectionStart, textArea.selectionEnd);\r\n        }\r\n        //chrome safari opera\r\n        else if(window.getSelection){\r\n            text = window.getSelection().toString();\r\n        }\r\n        //低版本chrome\r\n        else if(document.getSelection){\r\n            text = document.getSelection().toString();\r\n        }\r\n        return !!text;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装PDF阅读器\r\n     * @return <Boolean>\r\n     */\r\n    isInstallPDF:function(){\r\n        var i, len;\r\n\r\n        var flag = true;\r\n\r\n        if(Nui.browser.webkit || (Nui.browser.mozilla && Nui.browser.version > 19)){\r\n            flag = false;\r\n        }\r\n\r\n        if(navigator.plugins && (len = navigator.plugins.length)){\r\n            for(i = 0; i < len; i++){\r\n                if(/Adobe Reader|Adobe PDF|Acrobat|Chrome PDF Viewer/.test(navigator.plugins[i].name)){\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        try{\r\n            if(window.ActiveXObject || window.ActiveXObject.prototype){\r\n                for(i = 1; i < 10; i++){\r\n                    try{\r\n                        if(eval(\"new ActiveXObject('PDF.PdfCtrl.\" + i + \"');\")){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n\r\n                var arr = ['PDF.PdfCtrl', 'AcroPDF.PDF.1', 'FoxitReader.Document', 'Adobe Acrobat', 'Adobe PDF Plug-in'];\r\n                len = arr.length;\r\n                for(i = 0; i < len; i++){\r\n                    try{\r\n                        if(new ActiveXObject(arr[i])){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch(e){}\r\n\r\n        return flag;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装flash，没有安装则返回安装路径\r\n     * @return <Boolean, String>\r\n     */\r\n    isInstallFlash:function(){\r\n        if(typeof window.ActiveXObject != 'undefined'){\r\n            try{\r\n                if(!!new ActiveXObject('ShockwaveFlash.ShockwaveFlash')){\r\n                    return false\r\n                }\r\n            }\r\n            catch(e){}\r\n        }\r\n        else{\r\n            if(!!navigator.plugins['Shockwave Flash']){\r\n                return false\r\n            }\r\n        }\r\n        if(Nui.browser.msie){\r\n            return 'http://rj.baidu.com/soft/detail/17153.html'\r\n        }\r\n        else{\r\n            return 'http://rj.baidu.com/soft/detail/15432.html'\r\n        }\r\n    },\r\n    /**\r\n     * @func 将数字转换为逗号千分位分隔\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    formatNumber:function(number){\r\n        var integer = parseInt(number);\r\n        if(!isNaN(integer) && integer && (number = number.toString())){\r\n            var dot = number.indexOf('.');\r\n            var decimal = '';\r\n            if(dot > 0){\r\n                decimal = number.substr(dot);\r\n            }\r\n            return integer.toLocaleString().replace(/\\.\\d+$/, '') + decimal\r\n        }\r\n        return number\r\n    },\r\n    /**\r\n     * @func 将数字转换为中文大写\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    numberToCN:function(number){\r\n        //汉字的数字\r\n        var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');\r\n        //基本单位\r\n        var cnIntRadice = new Array('', '拾', '佰', '仟');\r\n        //对应整数部分扩展单位\r\n        var cnIntUnits = new Array('', '万', '亿', '兆');\r\n        //对应小数部分单位\r\n        var cnDecUnits = new Array('角', '分', '毫', '厘');\r\n        //整数金额时后面跟的字符\r\n        var cnInteger = '整';\r\n        //整型完以后的单位\r\n        var cnIntLast = '元';\r\n        //最大处理的数字\r\n        var maxNum = 999999999999999.9999;\r\n        //金额整数部分\r\n        var integerNum;\r\n        //金额小数部分\r\n        var decimalNum;\r\n        //输出的中文金额字符串\r\n        var chineseStr = '';\r\n        //分离金额后用的数组，预定义\r\n        var parts;\r\n        if (number == '') { return ''; }\r\n        var isMinus = number < 0;\r\n        number = Math.abs(parseFloat(number));\r\n        if (number >= maxNum) {\r\n            //超出最大处理数字\r\n            return '';\r\n        }\r\n        if (number == 0) {\r\n            chineseStr = cnNums[0] + cnIntLast + cnInteger;\r\n            return chineseStr;\r\n        }\r\n        //转换为字符串\r\n        number = number.toString();\r\n        if (number.indexOf('.') == -1) {\r\n            integerNum = number;\r\n            decimalNum = '';\r\n        } else {\r\n            parts = number.split('.');\r\n            integerNum = parts[0];\r\n            decimalNum = parts[1].substr(0, 4);\r\n        }\r\n        //获取整型部分转换\r\n        if (parseInt(integerNum, 10) > 0) {\r\n            var zeroCount = 0;\r\n            var IntLen = integerNum.length;\r\n            for (var i = 0; i < IntLen; i++) {\r\n            var n = integerNum.substr(i, 1);\r\n            var p = IntLen - i - 1;\r\n            var q = p / 4;\r\n            var m = p % 4;\r\n            if (n == '0') {\r\n                zeroCount++;\r\n            } else {\r\n                if (zeroCount > 0) {\r\n                chineseStr += cnNums[0];\r\n                }\r\n                //归零\r\n                zeroCount = 0;\r\n                chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];\r\n            }\r\n            if (m == 0 && zeroCount < 4) {\r\n                chineseStr += cnIntUnits[q];\r\n            }\r\n            }\r\n            chineseStr += cnIntLast;\r\n        }\r\n        //小数部分\r\n        if (decimalNum != '') {\r\n            var decLen = decimalNum.length;\r\n            for (var i = 0; i < decLen; i++) {\r\n            var n = decimalNum.substr(i, 1);\r\n            if (n != '0') {\r\n                chineseStr += cnNums[Number(n)] + cnDecUnits[i];\r\n            }\r\n            }\r\n        }\r\n        if (chineseStr == '') {\r\n            chineseStr += cnNums[0] + cnIntLast + cnInteger;\r\n        } else if (decimalNum == '') {\r\n            chineseStr += cnInteger;\r\n        }\r\n        if(isMinus){\r\n            chineseStr = '负' + chineseStr\r\n        }\r\n        return chineseStr;\r\n    }\r\n})\r\n\nNui[define]('src/core/events', function(){\r\n    return function(opts){\r\n        var self = this, that = opts || self,\r\n            constr = that.constructor,\r\n            isComponent = constr && constr.__component_name,\r\n            elem = self.element || that.element || Nui.doc, \r\n            events = isComponent ? that._events : that.events;\r\n            \r\n        if(!elem || !events){\r\n            return that\r\n        }\r\n\r\n        if(typeof events === 'function'){\r\n            events = events.call(that)\r\n        }\r\n\r\n        if(!(elem instanceof jQuery)){\r\n            elem = jQuery(elem)\r\n        }\r\n\r\n        var evt, ele, ret;\r\n        var callback = function(e, elem, cbs){\r\n            if(typeof cbs === 'function'){\r\n                cbs.call(that, e, elem);\r\n            }\r\n            else{\r\n                var _cb, _that;\r\n                Nui.each(cbs, function(cb, i){\r\n                    if(typeof (_cb = that[cb]) === 'function'){\r\n                        _that = that;\r\n                    }\r\n                    else if(typeof (_cb = self[cb]) === 'function'){\r\n                        _that = self;\r\n                    }\r\n                    if(_that){\r\n                        return ret = _cb.call(_that, e, elem, ret);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        Nui.each(events, function(cbs, evts){\r\n            if(cbs && (typeof cbs === 'string' || typeof cbs === 'function')){\r\n                if(typeof cbs === 'string'){\r\n                    cbs = Nui.trim(cbs).split(/\\s+/);\r\n                }\r\n                evts = Nui.trim(evts).split(/\\s+/);\r\n                // keyup:kupdown:focus a => elem.on('keyup kupdown focus', 'a', callback)\r\n                evt = evts.shift().replace(/:/g, ' ');\r\n                ele = evts.join(' ');\r\n                //组件内部处理\r\n                if(isComponent){\r\n                    that._on(evt, elem, ele, function(e, elem){\r\n                        callback(e, elem, cbs)\r\n                    })\r\n                }\r\n                else{\r\n                    elem.on(evt, ele, function(e){\r\n                        callback(e, jQuery(this), cbs)\r\n                    })\r\n                }\r\n            }\r\n        })\r\n        return that\r\n    }\r\n})\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 模版引擎\r\n */\r\n\r\nNui[define]('src/core/template', ['src/core/util'], function(util){\r\n\r\n    var template = function(tplid, data, opts){\r\n        if(this.tplid = tplid){\r\n            if(caches[tplid]){\r\n                return render.call(this, caches[tplid], data, opts)\r\n            }\r\n            var ele = document.getElementById(tplid);\r\n            if(ele && ele.nodeName==='SCRIPT' && ele.type === 'text/html'){\r\n                return render.call(this, caches[tplid] = ele.innerHTML, data, opts)\r\n            }\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var caches = {};\r\n\r\n    var options = {\r\n        openTag:'<%',\r\n        closeTag:'%>'\r\n    }\r\n\r\n    var methods = {\r\n        trim:Nui.trim,\r\n        formatDate:util.formatDate,\r\n        formatNumber:util.formatNumber,\r\n        setParam:util.setParam,\r\n        toFixed:util.toFixed,\r\n        numberToCN:util.numberToCN\r\n    }\r\n\r\n    var isstr = !!''.trim;\r\n\r\n    var snippet = ';$that.out = function(){return $that.code';\r\n\r\n    //低版本IE用push拼接字符串效率更高\r\n    snippet = (isstr ? '\"\"'+snippet : '[]'+snippet+'.join(\"\")')+'}';\r\n\r\n    var join = function(iscode){\r\n        if(isstr){\r\n            if(iscode){\r\n                return function(code){\r\n                    return '$that.code += '+code+';'\r\n                }\r\n            }\r\n            return function(code, snippet){\r\n                return code += snippet\r\n            }\r\n        }\r\n        if(iscode){\r\n            return function(code){\r\n                return '$that.code.push('+code+');'\r\n            }\r\n        }\r\n        return function(code, snippet){\r\n            code.push(snippet);\r\n            return code\r\n        }\r\n    }\r\n\r\n    var joinCode = join(true);\r\n\r\n    var joinSnippet = join();\r\n\r\n    var replaceInclude = function(tpl, openTag, closeTag, opts){\r\n        var that = this;\r\n        var regs = openTag.replace(/([^\\s])/g, '\\\\$1');\r\n        var rege = closeTag.replace(/([^\\s])/g, '\\\\$1');\r\n        return tpl.replace(new RegExp(regs+'\\\\s*include\\\\s+[\\'\\\"]([^\\'\\\"]*)[\\'\\\"]\\\\s*'+rege, 'g'), function(str, tid){\r\n            if(tid){\r\n                var tmp = that[tid];\r\n                if(typeof tmp === 'function'){\r\n                    tmp = tmp();\r\n                }\r\n                if(typeof tmp === 'string'){\r\n                    return render.call(that, tmp, null, opts)\r\n                }\r\n                else{\r\n                    return template(tid, null, opts)\r\n                }\r\n            }\r\n            return ''\r\n        })\r\n    }\r\n\r\n    //部分浏览器中表单对象name属性如果和模版中需要使用的变量重名，而这个变量又不存在，返回值就会变成该dom....\r\n    var isNode = typeof HTMLElement === 'object' ? \r\n    function(obj){\r\n        return obj instanceof HTMLElement;\r\n    } : \r\n    function(obj){\r\n        return obj.nodeType === 1 && typeof obj.nodeName === 'string';\r\n    };\r\n    var isDom = function(obj){\r\n        if(obj && typeof obj === 'object'){\r\n            //元素集合\r\n            var ele = obj[0];\r\n            if(ele){\r\n                return isNode(ele)\r\n            }\r\n            //元素\r\n            return isNode(obj)\r\n        }\r\n    }\r\n\r\n    var render = function(tpl, data, opts){\r\n        var that = this;\r\n        if(typeof tpl === 'string'){\r\n            opts = opts || {};\r\n            var openTag = opts.openTag || options.openTag, closeTag = opts.closeTag || options.closeTag;\r\n            tpl = replaceInclude.call(that, tpl, openTag, closeTag);\r\n            if(data && typeof data === 'object'){\r\n                if(Nui.isArray(data)){\r\n                    data = {\r\n                        $list:data\r\n                    }\r\n                }\r\n                var code = isstr ? '' : [];\r\n                tpl = tpl.replace(/\\s+/g, ' ');\r\n                Nui.each(tpl.split(openTag), function(val, key){\r\n                    val = val.split(closeTag);\r\n                    if(key >= 1){\r\n                        code = joinSnippet(code, compile(Nui.trim(val[0]), true))\r\n                    }\r\n                    else{\r\n                        val[1] = val[0];\r\n                    }\r\n                    code = joinSnippet(code, compile(val[1].replace(/'/g, \"\\\\'\").replace(/\"/g, '\\\\\"')))\r\n                });\r\n\r\n                var variables = isstr ? '' : [];\r\n\r\n                for(var k in data){\r\n                    variables = joinSnippet(variables, k+'=$data.'+k+',')\r\n                }\r\n\r\n                if(!isstr){\r\n                    code = code.join('');\r\n                    variables = variables.join('');\r\n                }\r\n\r\n                code = 'var '+ variables +'$that=this,$method=$that.methods; $that.line=4; $that.code='+ snippet +';\\ntry{\\n' + code + ';}\\ncatch(e){\\n$that.error(e, $that.line)\\n};';\r\n                \r\n                try{\r\n                    var Rander = new Function('$data', code);\r\n                    Rander.prototype.methods = methods;\r\n                    Rander.prototype.error = error(code, data, that.tplid);\r\n                    Rander.prototype.dom = isDom;\r\n                    tpl = new Rander(data).out();\r\n                    Rander = null\r\n                }\r\n                catch(e){\r\n                    error(code, data, that.tplid)(e)\r\n                }\r\n                \r\n            }\r\n            return tpl\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var error = function(code, data, tplid){\r\n        return function(e, line){\r\n            var msg = '\\n';\r\n            var codes = [];\r\n            code = 'function anonymous($data){\\n'+code+'\\n}';\r\n            code = code.split('\\n');\r\n            Nui.each(code, function(v, k){\r\n                codes.push((k+1)+ '      ' +v.replace('$that.line++;', ''))\r\n            })\r\n            msg += 'code\\n';\r\n            msg += codes.join('\\n')+'\\n\\n';\r\n            if(typeof JSON !== undefined){\r\n                msg += 'data\\n';\r\n                msg += JSON.stringify(data)+'\\n\\n'\r\n            }\r\n            if(tplid){\r\n                msg += 'templateid\\n';\r\n                msg += tplid+'\\n\\n'\r\n            }\r\n            if(line){\r\n                msg += 'line\\n';\r\n                msg += line+'\\n\\n'\r\n            }\r\n            msg += 'message\\n';\r\n            msg += e.message;\r\n            console.error(msg)\r\n        }\r\n    }\r\n\r\n    var compile = function(tpl, logic){\r\n        if(!tpl){\r\n            return ''\r\n        }\r\n        var code,res;\r\n        if(logic){\r\n            if((res = match(tpl, 'if')) !== undefined){\r\n                code = 'if('+exists(res)+'){'\r\n            }\r\n            else if((res = match(tpl, 'elseif')) !== undefined){\r\n                code = '\\n}\\nelse if('+exists(res)+'){'\r\n            }\r\n            else if(tpl === 'else'){\r\n                code = '\\n}\\nelse{'\r\n            }\r\n            else if(tpl === '/if'){\r\n                code = '}'\r\n            }\r\n            else if((res = match(tpl, 'each ', /\\s+/)) !== undefined){\r\n                code = 'Nui.each('+ res[0] +', function('+(res[1]||'$value')+','+(res[2]||'$index')+'){'\r\n            }\r\n            else if(tpl === '/each'){\r\n                code = '});'\r\n            }\r\n            else if((res = match(tpl, ' | ', /\\s*,\\s*/)) !== undefined){\r\n                var str = res[0];\r\n                var i = str.lastIndexOf('(');\r\n                var _call = '(' +exists(res.slice(1).toString()) +')';\r\n                //赋值操作必须要用括号包裹起来\r\n                if(i !== -1){\r\n                    var start = str.substr(0, i);\r\n                    var end = Nui.trimLeft(str.substr(i+1));\r\n                    code = joinCode(start+'($that.methods.' + end + _call)\r\n                }\r\n                else{\r\n                    code = joinCode('$that.methods.'+ str + _call)\r\n                }\r\n            }\r\n            else if(/^(var|let|const|return|delete)\\s+/.test(tpl)){\r\n                code = exists(tpl)+';'\r\n            }\r\n            else{\r\n                code = joinCode(exists(tpl, true))\r\n            }\r\n        }\r\n        else{\r\n            code = joinCode('\\''+tpl+'\\'')\r\n        }\r\n        return code + '\\n' + '$that.line++;'\r\n    }\r\n\r\n    //判断变量是否存在\r\n    //a.b??  a[b]??  a['b']??  a[b['c']]??\r\n    var exists = function(code, isVal){\r\n        return code.replace(/([\\.\\$\\w]+\\s*(\\[[\\'\\\"\\[\\]\\w\\.\\$\\s]+\\])?)\\?\\?/g, function(a, b){\r\n            var rep = '(typeof '+ b + '!==\"undefined\"&&'+ b +'!==null&&'+ b +'!==undefined&&!$that.dom('+ b +')';\r\n            if(isVal){\r\n                rep += '?' + b + ':' + '\"\"';\r\n            }\r\n            return rep + ')'\r\n        })\r\n    }\r\n\r\n    var match = function(str, syntax, regexp){\r\n        var replace;\r\n        if(str.indexOf(syntax) === 0){\r\n            replace = ''\r\n        }\r\n        else if(syntax === ' | ' && str.indexOf(syntax) > 0){\r\n            replace = ','\r\n        }\r\n        if(replace !== undefined){\r\n            str = Nui.trimLeft(str.replace(syntax, replace));\r\n            return regexp ? str.split(regexp) : str\r\n        }\r\n    }\r\n\r\n    template.method = function(name, callback){\r\n        if(!methods[name]){\r\n            methods[name] = callback\r\n        }\r\n    }\r\n\r\n    template.config = function(){\r\n        var args = arguments;\r\n        if(Nui.type(args[0], 'Object')){\r\n            Nui.each(args[0], function(v, k){\r\n                options[k] = v\r\n            })\r\n        }\r\n        else if(args.length > 1 && typeof args[0] === 'string'){\r\n            options[args[0]] = args[1]\r\n        }\r\n    }\r\n\r\n    template.render = render;\r\n\r\n    return template\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 组件基类\r\n */\r\n\r\nNui[define]('src/core/component', ['src/core/template', 'src/core/events'], function(tpl, events){\r\n    var module = this;\r\n    var require = this.require;\r\n    var extend = this.extend;\r\n    var callMethod = function(method, args, obj){\r\n        //实参大于形参，最后一个实参表示id\r\n        if(args.length > method.length){\r\n            var id = args[args.length-1];\r\n            if(id && Nui.type(id, ['String', 'Number']) && obj._options.id !== id && obj.__id !== id){\r\n                return\r\n            }\r\n        }\r\n        method.apply(obj, args)\r\n    }\r\n    //去除IE67按钮点击黑边\r\n    if(Nui.bsie7){\r\n        Nui.doc.on('focus', 'button, input[type=\"button\"]', function(){\r\n            this.blur()\r\n        })\r\n    }\r\n    /**\r\n     * 单和双下划线开头表示私有方法或者属性，只能在内部使用，\r\n     * 单下划线继承后可重写或修改，双下划线为系统预置无法修改\r\n     * 系统预置属性方法：__id, __instances, __eventList, __parent, __component_name, __setMethod\r\n     */\r\n    var statics = {\r\n        //实例对象唯一标记\r\n        __id:0,\r\n        //实例对象容器\r\n        __instances:{},\r\n        /*\r\n        * 将实例方法接口设置为静态方法，这样可以操作多个实例，\r\n        * 默认有 init, option, reset, destroy\r\n        * init表示初始化组件，会查询容器内包含属性为 data-组件名-options的dom元素，并调用组件\r\n        */\r\n        __setMethod:function(apis, components){\r\n            var self = this;\r\n            Nui.each(apis, function(val, methodName){\r\n                if(self[methodName] === undefined){\r\n                    self[methodName] = function(){\r\n                        var self = this, args = arguments, container = args[0], name = self.__component_name;\r\n                        if(name && name !== 'component'){\r\n                            if(container && container instanceof jQuery){\r\n                                if(methodName === 'init'){\r\n                                    var mod = components[name];\r\n                                    if(mod){\r\n                                        container.find('[data-'+name+'-options]').each(function(){\r\n                                            //不能重复调用\r\n                                            if(this.nui && this.nui[name]){\r\n                                                return\r\n                                            }\r\n                                            var elem = jQuery(this);\r\n                                            var options = elem.data(name+'Options');\r\n                                            var _mod;\r\n                                            if(options && typeof options === 'string'){\r\n                                                if(/^{[\\s\\S]*}$/.test(options)){\r\n                                                    options = eval('('+ options +')');\r\n                                                }\r\n                                                else if(_mod = require(options, true)){\r\n                                                    if(typeof _mod.exports === 'function'){\r\n                                                        options = _mod.exports(elem)\r\n                                                    }\r\n                                                    else{\r\n                                                        options = _mod.exports;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            if(typeof options !== 'object'){\r\n                                                options = {};\r\n                                            }\r\n                                            mod(extend(options, {\r\n                                                target:elem\r\n                                            }))\r\n                                        })\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    container.find('[nui_component_'+ name +']').each(function(){\r\n                                        var obj, method;\r\n                                        if(this.nui && (obj = this.nui[name]) && typeof (method = obj[methodName]) === 'function'){\r\n                                            callMethod(method, Array.prototype.slice.call(args, 1), obj)\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                            else{\r\n                                Nui.each(self.__instances, function(obj){\r\n                                    var method = obj[methodName];\r\n                                    if(typeof method === 'function'){\r\n                                        callMethod(method, args, obj)\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                        else{\r\n                            Nui.each(components, function(v, k){\r\n                                if(k !== 'component' && typeof v[methodName] === 'function'){\r\n                                    v[methodName].apply(v, args)\r\n                                }\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return self\r\n        },\r\n        //对所有实例设置默认选项\r\n        _options:{},\r\n        //创建组件模块时会调用一次，可用于在document上绑定事件操作实例\r\n        _init:jQuery.noop,\r\n        _jquery:function(elem){\r\n            if(elem instanceof jQuery){\r\n                return elem\r\n            }\r\n            return jQuery(elem)\r\n        },\r\n        _getSize:function(selector, dir, attr){\r\n            var size = 0;\r\n            attr = attr || 'border';\r\n            dir = dir || 'tb';\r\n            if(attr === 'all'){\r\n                return (this._getSize(selector, dir) + \r\n                        this._getSize(selector, dir, 'padding') +\r\n                        this._getSize(selector, dir, 'margin'))\r\n            }\r\n            var group = {\r\n                l:['Left'],\r\n                r:['Right'],\r\n                lr:['Left', 'Right'],\r\n                t:['Top'],\r\n                b:['Bottom'],\r\n                tb:['Top', 'Bottom']\r\n            }\r\n            var arr = [{\r\n                border:{\r\n                    l:['LeftWidth'],\r\n                    r:['RightWidth'],\r\n                    lr:['LeftWidth', 'RightWidth'],\r\n                    t:['TopWidth'],\r\n                    b:['BottomWidth'],\r\n                    tb:['TopWidth', 'BottomWidth']\r\n                }\r\n            }, {\r\n                padding:group\r\n            }, {\r\n                margin:group\r\n            }];\r\n            Nui.each(arr, function(val){\r\n                if(val[attr]){\r\n                    Nui.each(val[attr][dir], function(v){\r\n                        var value = parseFloat(selector.css(attr+v));\r\n                        size += isNaN(value) ? 0 : value\r\n                    });\r\n                }\r\n            });\r\n            return size\r\n        },\r\n        _$fn:function(name, mod){\r\n            jQuery.fn[name] = function(){\r\n                var args = arguments;\r\n                var options = args[0];\r\n                return this.each(function(){\r\n                    if(typeof options !== 'string'){\r\n                        if(Nui.type(options, 'Object')){\r\n                            options.target = this\r\n                        }\r\n                        else{\r\n                            options = {\r\n                                target:this\r\n                            }\r\n                        }\r\n                        mod(options);\r\n                    }\r\n                    else if(options){\r\n                        var object;\r\n                        if(this.nui && (object=this.nui[name]) && options.indexOf('_') !== 0){\r\n                            if(options === 'options'){\r\n                                object.option(args[1], args[2])\r\n                            }\r\n                            else{\r\n                                var attr = object[options];\r\n                                if(typeof attr === 'function'){\r\n                                    attr.apply(object, Array.prototype.slice.call(args, 1))\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        _$ready:function(name, mod){\r\n            if(typeof this.init === 'function'){\r\n                this.init(Nui.doc)\r\n            }\r\n        },\r\n        config:function(){\r\n            var args = arguments;\r\n            var len = args.length;\r\n            var attr = args[0];\r\n            if(Nui.type(attr, 'Object')){\r\n                return this._options = jQuery.extend(true, this._options, attr)\r\n            }\r\n            else if(Nui.type(attr, 'String')){\r\n                if(args.length === 1){\r\n                    return this._options[attr]\r\n                }\r\n                return this._options[attr] = args[1]\r\n            }\r\n        },\r\n        hasInstance:function(id){\r\n            var exist = false;\r\n            var instances = this.__instances;\r\n            if(id){\r\n                Nui.each(instances, function(v){\r\n                    if(v._options.id === id){\r\n                        exist = true;\r\n                        return false\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                for(i in instances){\r\n                    return true\r\n                }\r\n            }\r\n            return exist\r\n        }\r\n    }\r\n\r\n    return ({\r\n        _static:statics,\r\n        _options:{\r\n            target:null,\r\n            //组件id，element会增加class 组件名-组件id\r\n            id:'',\r\n            //组件皮肤，element会增加class nui-组件名-皮肤名\r\n            skin:'',\r\n            //element增加一个或多个类\r\n            className:'',\r\n            onInit:null,\r\n            onReset:null,\r\n            onDestroy:null\r\n        },\r\n        _template:{},\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:jQuery.noop,\r\n        _getTarget:function(){\r\n            var self = this;\r\n            if(!self.target){\r\n                var target = self._options.target;\r\n                var _class = self.constructor;\r\n                if(!target){\r\n                    return null\r\n                }\r\n                target = _class._jquery(target);\r\n                self.target = self._bindComponentName(target);\r\n            }\r\n            return self.target\r\n        },\r\n        _bindComponentName:function(element){\r\n            var self = this, _class = self.constructor;\r\n            var attr = 'nui_component_'+_class.__component_name;\r\n            element.attr(attr, '').each(function(){\r\n                if(!this.nui){\r\n                    this.nui = {};\r\n                }\r\n                this.nui[_class.__component_name] = self\r\n            })\r\n            return element\r\n        },\r\n        _tplData:function(data){\r\n            var opts = this._options, \r\n                _class = this.constructor,\r\n                name = 'nui-' + _class.__component_name, \r\n                skin = Nui.trim(opts.skin),\r\n                getName = function(_class, arrs){\r\n                    if(_class.__parent){\r\n                        var _pclass = _class.__parent.constructor;\r\n                        var _name = _pclass.__component_name;\r\n                        if(_name !== 'component'){\r\n                            if(skin){\r\n                                arrs.unshift('nui-'+_name+'-'+skin);\r\n                            }\r\n                            arrs.unshift('nui-'+_name);\r\n                            return getName(_pclass, arrs)\r\n                        }\r\n                    }\r\n                    return arrs\r\n                }, className = getName(_class, []);\r\n\r\n            className.push(name);\r\n            if(skin){\r\n                className.push(name+'-'+skin)\r\n            }\r\n            if(opts.id){\r\n                className.push(_class.__component_name + '-' + opts.id)\r\n            }\r\n            if(!data){\r\n                data = {}\r\n            }\r\n            if(opts.className){\r\n                className.push(opts.className)\r\n            }\r\n            data.className = className.join(' ');\r\n            return data\r\n        },\r\n        _event:function(){\r\n            var self = this, opts = self._options;\r\n            if(self.element && opts.events){\r\n                opts.element = self.element;\r\n                events.call(self, opts)\r\n            }\r\n            return events.call(self)\r\n        },\r\n        _on:function(type, dalegate, selector, callback, trigger){\r\n            var self = this;\r\n            if(typeof selector === 'function'){\r\n                trigger = callback;\r\n                callback = selector;\r\n                selector = dalegate;\r\n                dalegate = null;\r\n                selector = self.constructor._jquery(selector)\r\n            }\r\n\r\n            var _callback = function(e){\r\n                return callback.call(this, e, jQuery(this))\r\n            }\r\n\r\n            if(dalegate){\r\n                if(typeof selector !== 'string'){\r\n                    selector = selector.selector;\r\n                    if(!selector){\r\n                        selector = self._options.target\r\n                    }\r\n                }\r\n                dalegate.on(type, selector, _callback);\r\n                if(trigger){\r\n                    dalegate.find(selector).trigger(type)\r\n                }\r\n            }\r\n            else{\r\n                selector.on(type, _callback);\r\n                if(trigger){\r\n                    selector.trigger(type)\r\n                }\r\n            }\r\n\r\n            self.__eventList.push({\r\n                dalegate:dalegate,\r\n                selector:selector,\r\n                type:type,\r\n                callback:_callback\r\n            });\r\n\r\n            return self\r\n        },\r\n        _off:function(){\r\n            var self = this, _eventList = self.__eventList;\r\n            Nui.each(_eventList, function(val, key){\r\n                if(val.dalegate){\r\n                    val.dalegate.off(val.type, val.selector, val.callback)\r\n                }\r\n                else{\r\n                    val.selector.off(val.type, val.callback)\r\n                }\r\n                _eventList[key] = null;\r\n                delete _eventList[key]\r\n            });\r\n            self.__eventList = [];\r\n            return self\r\n        },\r\n        _delete:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self.target){\r\n                var attr = 'nui_component_'+_class.__component_name;\r\n                self.target.removeAttr(attr).each(function(){\r\n                    if(this.nui){\r\n                        this.nui[_class.__component_name] = null;\r\n                        delete this.nui[_class.__component_name];\r\n                    }\r\n                })\r\n            }\r\n            _class.__instances[self.__id] = null;\r\n            delete _class.__instances[self.__id]\r\n        },\r\n        _reset:function(){\r\n            this._off();\r\n            if(this.element){\r\n                this.element.remove();\r\n                this.element = null;\r\n            }\r\n            return this\r\n        },\r\n        _tpl2html:function(id, data){\r\n            var opts = {\r\n                openTag:'<%',\r\n                closeTag:'%>'\r\n            }\r\n            if(arguments.length === 1){\r\n                return tpl.render(this._template, id, opts)\r\n            }\r\n            return tpl.render.call(this._template, this._template[id], data, opts)\r\n        },\r\n        _callback:function(method, args){\r\n            var self = this, opts = self._options;\r\n            var callback = opts['on'+method];\r\n            if(typeof callback === 'function'){\r\n                if(args){\r\n                    Array.prototype.unshift.call(args, self);\r\n                    return callback.apply(opts, args);\r\n                }\r\n                return callback.call(opts, self)\r\n            }\r\n        },\r\n        option:function(opts, isOriginal){\r\n            var args = arguments;\r\n            var isdef = false;\r\n            var options;\r\n            if(args[0] === true){\r\n                isdef = true\r\n            }\r\n            else if(jQuery.isPlainObject(args[0])){\r\n                options = args[0]\r\n                isdef = args[1]\r\n            }\r\n            else if(args.length > 1 && typeof args[0] === 'string'){\r\n                options = {};\r\n                options[args[0]] = args[1]\r\n                isdef = args[2]\r\n            }\r\n            if(options||isdef){\r\n                this._options = jQuery.extend(true, {}, this[isdef === true ? '_defaultOptions' : '_options'], options)\r\n                this._reset();\r\n                this._exec();\r\n            }\r\n            return this\r\n        },\r\n        reset:function(){\r\n            this.option(true);\r\n            this._callback('Reset');\r\n            return this;\r\n        },\r\n        destroy:function(){\r\n            this._delete();\r\n            this._reset();\r\n            this._callback('Destroy');\r\n        }\r\n    })\r\n})\r\n\nNui[define]('src/components/datagrid',function(){\r\n    var module = this;\r\n    var component = module.require('src/core/component');\r\n    var util = module.require('src/core/util');\r\n\r\n    var scrollBarWidth = (function(){\r\n        var oldWidth, newWidth, div = document.createElement('div');\r\n        div.style.cssText = 'position:absolute; top:-10000em; left:-10000em; width:100px; height:100px; overflow:hidden;';\r\n        oldWidth = document.body.appendChild(div).clientWidth;\r\n        div.style.overflowY = 'scroll';\r\n        newWidth = div.clientWidth;\r\n        document.body.removeChild(div);\r\n        return oldWidth - newWidth;\r\n    })()\r\n\r\n    return module.extend(component, {\r\n        _static:{\r\n            _init:function(){\r\n                var self = this;\r\n                Nui.doc.on('click', function(e){\r\n                    var isRow = $(e.target).closest('tr').hasClass('table-row');\r\n                    Nui.each(self.__instances, function(val){\r\n                        if(!isRow && val.element && val._activeElem){\r\n                            val._callback('CancelActive', [e, val._activeElem])\r\n                            val._activeElem.removeClass('s-crt');\r\n                            delete val._activeElem;\r\n                            if(val._activeFixedElem){\r\n                                val._activeFixedElem.removeClass('s-crt');\r\n                                delete val._activeFixedElem\r\n                            }\r\n                        }\r\n                    })\r\n                });\r\n\r\n                var timer = null;\r\n                Nui.win.on('resize', function(){\r\n                    clearTimeout(timer);\r\n                    timer = setTimeout(function(){\r\n                        Nui.each(self.__instances, function(val){\r\n                            if(val._options.height === '100%'){\r\n                                val.resize()\r\n                            }\r\n                        })\r\n                    }, 80)\r\n                })\r\n            },\r\n            _hasChildren:function(value){\r\n                return Nui.isArray(value.children) && value.children.length\r\n            },\r\n            //获取合并单元格数\r\n            _colspan:function(array, count){\r\n                var self = this;\r\n                if(count === undefined){\r\n                    count = 0\r\n                }\r\n                Nui.each(array, function(v){\r\n                    if(self._hasChildren(v)){\r\n                        count += self._colspan(v.children)\r\n                    }\r\n                    else{\r\n                        count += 1\r\n                    }\r\n                })\r\n                return count\r\n            }\r\n        },\r\n        _options:{\r\n            container:null,\r\n            data:null,\r\n            columns:null,\r\n            isFixed:true,\r\n            isLine:false,\r\n            isActive:true,\r\n            isBorder:true,\r\n            //初始化时是否调用分页\r\n            isPaging:true,\r\n            isDir:false,\r\n            keyCode:[9, 13],\r\n            url:null,\r\n            //分页配置\r\n            paging:null,\r\n            fields:null,\r\n            dataField:'list',\r\n            width:'100%',\r\n            height:'100%',\r\n            footer:'',\r\n            placeholder:'',\r\n\r\n            onFocusin:null,\r\n            onFocusout:null,\r\n            onFocus:null,\r\n            onBlur:null,\r\n\r\n            stringify:null,\r\n            rowRender:null,\r\n            onActive:null,\r\n            onCancelActive:null,\r\n            onRowRender:null,\r\n            onRowClick:null,\r\n            onRowDblclick:null,\r\n            onCheckboxChange:null,\r\n            onRender:null,\r\n            onRenderBefore:null,\r\n            onScroll:null\r\n        },\r\n        _template:{\r\n            layout:\r\n                '<div class=\"<% className %>\">'+\r\n                    '<div class=\"datagrid-body<%if isFixed%> datagrid-fixed<%/if%>\">'+\r\n                        '<%include \"table\"%>'+\r\n                    '</div>'+\r\n                    '<%if footer || paging%>'+\r\n                    '<div class=\"datagrid-foot\">'+\r\n                        '<%if footer%>'+\r\n                        '<%footer%>'+\r\n                        '<%/if%>'+\r\n                        '<%if paging%>'+\r\n                        '<div class=\"datagrid-paging\"></div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                    '<%/if%>'+\r\n                '</div>',\r\n            table:\r\n                '<%each rows v k%>'+\r\n                    '<%if v.length%>'+\r\n                    '<div class=\"datagrid-table<%if k === \"left\" || k === \"right\"%> datagrid-table-fixed<%/if%> datagrid-table-<%k%>\">'+\r\n                        '<%if !isFixed%>'+\r\n                            '<div class=\"datagrid-box\">'+\r\n                            '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                '<%include \"thead\"%>'+\r\n                                '<tbody class=\"table-tbody datagrid-tbody\"></tbody>'+\r\n                            '</table>'+\r\n                            '</div>'+\r\n                        '<%else%>'+\r\n                            '<div class=\"datagrid-title\">'+\r\n                                '<div class=\"datagrid-thead\">'+\r\n                                '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                    '<%include \"thead\"%>'+\r\n                                '</table>'+\r\n                                '</div>'+\r\n                            '</div>'+\r\n                            '<div class=\"datagrid-box\">'+\r\n                                '<table class=\"ui-table<%if !isBorder%> ui-table-nobd<%/if%>\">'+\r\n                                '<tbody class=\"table-tbody datagrid-tbody\"></tbody>'+\r\n                                '</table>'+\r\n                            '</div>'+\r\n                        '<%/if%>'+\r\n                    '</div>'+\r\n                    '<%/if%>'+\r\n                '<%/each%>',\r\n            thead:\r\n                '<thead class=\"table-thead\">'+\r\n                    '<%each v%>'+\r\n                    '<tr class=\"table-row\">'+\r\n                        '<%var cellLastIndex = $value.length-1%>'+\r\n                        '<%each $value val key%>'+\r\n                        '<%var isTitle = true%>'+\r\n                        '<%var _classNames = val.className%>'+\r\n                        '<%if typeof _classNames === \"function\"%>'+\r\n                            '<%if _classNames = Nui.trim(val.className()||\"\")%>'+\r\n                                '<%var _classNames = \" \" + _classNames%>'+\r\n                            '<%/if%>'+\r\n                        '<%/if%>'+\r\n                        '<th class=\"table-cell<%_classNames%> table-cell-<%key%><%if cellLastIndex === key%> table-cell-last<%/if%>\"<%include \"attr\"%>>'+\r\n                            '<span class=\"cell-wrap\"<%if val.width > 0 && (val.fixed === \"left\" || val.fixed === \"right\")%> style=\"width:<%val.width%>px\"<%/if%>>'+\r\n                            '<span class=\"cell-text\">'+\r\n                            '<%if val.title%>'+\r\n                            '<%val.title%>'+\r\n                            '<%if typeof val.order === \"object\"%>'+\r\n                            '<%var asc = Nui.type(val.order.asc, [\"String\", \"Number\"]), desc = Nui.type(val.order.desc, [\"String\", \"Number\"])%>'+\r\n                            '<em class=\"datagrid-order<%if asc && desc%> datagrid-order-both<%/if%>\" field=\"<%val.order.field%>\">'+\r\n                            '<%if asc%>'+\r\n                            '<b class=\"datagrid-order-asc\" type=\"asc\" value=\"<%val.order.asc%>\"><i></i><s></s></b>'+\r\n                            '<%/if%>'+\r\n                            '<%if desc%>'+\r\n                            '<b class=\"datagrid-order-desc\" value=\"<%val.order.desc%>\"><i></i><s></s></b>'+\r\n                            '<%/if%>'+\r\n                            '</em>'+\r\n                            '<%/if%>'+\r\n                            '<%elseif val.content === \"checkbox\"%>'+\r\n                            '<span class=\"ui-checkradio\">'+\r\n                            '<input type=\"checkbox\" name=\"datagrid-checkbox-all\" class=\"datagrid-checkbox datagrid-checkbox-choose\">'+\r\n                            '</span>'+\r\n                            '<%/if%>'+\r\n                            '</span>'+\r\n                            '</span>'+\r\n                        '</th>'+\r\n                        '<%/each%>'+\r\n                    '</tr>'+\r\n                    '<%/each%>'+\r\n                '</thead>',\r\n            rows:\r\n                '<%if list && list.length%>'+\r\n                '<%var toLower = function(str){'+\r\n                    'return str.replace(/([A-Z])/g, function(a){'+\r\n                        'return \"-\"+a.toLowerCase()'+\r\n                    '})'+\r\n                '}%>'+\r\n                '<%each list%>'+\r\n                '<%var rowData = rowRender($value, $index)||{}%>'+\r\n                '<%var className = (rowData.className ? \" \"+rowData.className : \"\")%>'+\r\n                '<%delete rowData.className%>'+\r\n                '<tr class=\"table-row table-row-<%$index%><%className%>\" row-pagenum=\"<%pageNum??%>\" row-index=\"<%$index%>\"<%include \"data\"%><%each rowData _v _n%> <%_n%>=\"<%_v%>\"<%/each%>>'+\r\n                    '<%var colLastIndex = cols.length-1%>'+\r\n                    '<%each cols val key%>'+\r\n                    '<%var _value%>'+\r\n                    '<%if val.field && (!val.content || \"number checkbox input\".indexOf(val.content)===-1)%>'+\r\n                    '<%var _value=$value[val.field]%>'+\r\n                    '<%elseif val.content === \"number\"%>'+\r\n                    '<%var _value=$index+1%>'+\r\n                    '<%elseif val.content === \"checkbox\"%>'+\r\n                    '<%var _value={\"name\":val.field ? val.field : \"datagrid-checkbox\", \"class\":\"datagrid-checkbox\"+(!val.title ? \" datagrid-checkbox-choose\" : \"\"), \"value\":$value[val.field]!==undefined?$value[val.field]:\"\"}%>'+\r\n                    '<%elseif val.content === \"input\"%>'+\r\n                    '<%var _value={\"name\":val.field ? val.field : \"datagrid-input\", \"class\":\"datagrid-input\", \"value\":$value[val.field]!==undefined?$value[val.field]:\"\"}%>'+\r\n                    '<%else%>'+\r\n                    '<%var _value=val.content%>'+\r\n                    '<%/if%>'+\r\n                    '<%var _classNames = val.className%>'+\r\n                    '<%if typeof _classNames === \"function\"%>'+\r\n                        '<%if _classNames = Nui.trim(val.className(_value, val.field, $value, $index)||\"\")%>'+\r\n                            '<%var _classNames = \" \" + _classNames%>'+\r\n                        '<%/if%>'+\r\n                    '<%/if%>'+\r\n                    '<td class=\"table-cell<%_classNames%> table-cell-<%key%><%if colLastIndex === key%> table-cell-last<%/if%>\"<%include \"attr\"%>>'+\r\n                        '<%if typeof val.filter === \"function\"%>'+\r\n                        '<%var _value = val.filter(_value, val.field, $value, $index)%>'+\r\n                        '<%/if%>'+\r\n                        '<span class=\"cell-wrap<%if val.nowrap === true%> cell-nowrap<%/if%>\"<%if val.width > 0 && (val.fixed === \"left\" || val.fixed === \"right\")%> style=\"width:<%val.width%>px\"<%/if%>>'+\r\n                        '<span class=\"cell-text'+\r\n                            '<%if val.content === \"checkbox\"%> cell-text-checkbox<%/if%>'+\r\n                            '<%if val.content === \"input\"%> cell-text-input<%/if%>\"'+\r\n                            '<%if val.showtitle === true%> title=\"<%_value%>\"<%/if%>>'+\r\n                        '<%if val.content === \"checkbox\" && typeof _value === \"object\"%>'+\r\n                        '<%if checked === true && !val.title && (_value[\"checked\"]=checked)%><%/if%>'+\r\n                        '<span class=\"ui-checkradio\">'+\r\n                        '<input type=\"checkbox\"<%include \"_attr\"%>>'+\r\n                        '</span>'+\r\n                        '<%elseif val.content === \"input\" && typeof _value === \"object\"%>'+\r\n                        '<input type=\"text\" autocomplete=\"off\"<%include \"_attr\"%>>'+\r\n                        '<%else%>'+\r\n                        '<%include \"content\"%>'+\r\n                        '<%/if%>'+\r\n                        '</span>'+\r\n                        '</span>'+\r\n                    '</td>'+\r\n                    '<%/each%>'+\r\n                '</tr>'+\r\n                '<%/each%>'+\r\n                '<%elseif type === \"all\"%>'+\r\n                '<tr>'+\r\n                    '<td class=\"table-cell table-cell-void\" colspan=\"<%cols.length%>\">'+\r\n                        '<span class=\"ui-void\"><%placeholder??%></span>'+\r\n                    '</td>'+\r\n                '</tr>'+\r\n                '<%/if%>',\r\n            _attr:\r\n                '<%if !_value[\"class\"]%>'+\r\n                '<%var _class = _value[\"class\"] = \"\"%>'+\r\n                '<%/if%>'+\r\n                '<%if _value.className%>'+\r\n                '<%var _class = (_value[\"class\"]+=\" \"+Nui.trim(_value.className))%>'+\r\n                '<%delete _value.className%>'+\r\n                '<%/if%>'+\r\n                '<%each _value _v _k%>'+\r\n                ' <%_k%>=\"<%_v%>\"'+\r\n                '<%/each%>',\r\n            attr:\r\n                '<%each val value name%>'+\r\n                '<%if !isTitle?? && name === \"style\"%>'+\r\n                'style=\"<%each value _v _k%><%_k%>:<%_v%>;<%/each%>\"'+\r\n                '<%elseif \"width field colspan rowspan cellid\".indexOf(name) !== -1%>'+\r\n                ' <%name%>=\"<%value%>\"'+\r\n                '<%/if%>'+\r\n                '<%/each%>',\r\n            data:\r\n                '<%if fields%>'+\r\n                '<%each $value value field%>'+\r\n                '<%if fields === true || $.inArray(field, fields) !== -1%>'+\r\n                '<%var _value = stringify(value)%>'+\r\n                ' data-<%toLower(field)%>=<%if typeof _value !== \"undefined\"%><%_value%><%else%>\"<%value%>\"<%/if%>'+\r\n                '<%/if%>'+\r\n                '<%/each%>'+\r\n                '<%/if%>'\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, _class = self.constructor, container = opts.container;\r\n            if(container && Nui.isArray(opts.columns) && opts.columns.length){\r\n                self._container = _class._jquery(container);\r\n                self._columns = {\r\n                    all:[],\r\n                    left:[],\r\n                    right:[]\r\n                }\r\n                self._checked = false;\r\n                Nui.each(opts.columns, function(v, k){\r\n                    if(v.fixed === 'left' || v.fixed === true){\r\n                        self._columns.left.push(v)\r\n                    }\r\n                    else if(v.fixed === 'right'){\r\n                        self._columns.right.push(v)\r\n                    }\r\n                    self._columns.all.push(v)\r\n                })\r\n                self._keyCode = [];\r\n                if(opts.isDir === true){\r\n                    self._keyCode = self._keyCode.concat([37, 38, 39, 40]);\r\n                }\r\n                if(opts.keyCode){\r\n                    self._keyCode = self._keyCode.concat(opts.keyCode);\r\n                }\r\n                \r\n                self._create()\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._rows = {};\r\n            self._cols = {};\r\n            self._colTemplates = {};\r\n            self._rowNumber = self._getRowNumber(opts.columns, 0, []);\r\n            self._setTemplate();\r\n\r\n            Nui.each(self._columns, function(v, k){\r\n                self._setRowCol(v, k)\r\n            })\r\n\r\n            self._hasLeftRight = this._cols.left.length || this._cols.right.length;\r\n\r\n            self.element = self._bindComponentName($(self._tpl2html('layout', self._tplData({\r\n                rows:self._rows,\r\n                isFixed:opts.isFixed === true,\r\n                isBorder:opts.isBorder === true,\r\n                paging:opts.paging && typeof opts.paging === 'object' && opts.paging.isPage !== false,\r\n                footer:opts.footer\r\n            }))).appendTo(self._container));\r\n\r\n            self.element.find('.table-thead .datagrid-checkbox').checkradio(self._checkradio());\r\n\r\n            self._body = self.element.children('.datagrid-body');\r\n            self._tableAll = self._body.children('.datagrid-table-all');\r\n            self._tableAllBox =  self._tableAll.find('.datagrid-box');\r\n            self._tableAllTitle = self._tableAll.children('.datagrid-title');\r\n            self._tableAllThead = self._tableAll.find('.datagrid-thead');\r\n            self._tableLeft = self._body.children('.datagrid-table-left');\r\n            self._tableRight = self._body.children('.datagrid-table-right');\r\n            self._tableFixed = self._body.children('.datagrid-table-fixed');\r\n            self._tableFixedBox = self._tableFixed.find('.datagrid-box');\r\n            self._foot = self.element.children('.datagrid-foot');\r\n            self._tableTbody = self._body.find('.datagrid-tbody');\r\n\r\n            if(opts.width){\r\n                self._tableAllThead.children().css('width', opts.width);\r\n                self._tableAllBox.children().css('width', opts.width);\r\n            }\r\n\r\n            self._theadHeight();\r\n            self._initList();\r\n            self._bindEvent();\r\n        },\r\n        _setTemplate:function(){\r\n            var self = this;\r\n            var tpl = '';\r\n            Nui.each(self._colTemplates, function(v, k){\r\n                tpl += '<%'+ (tpl ? 'else' : '') +'if (\"content_\"+val.cellid) === \"'+ k +'\"%><%include \"'+ k +'\"%>'\r\n            })\r\n            if(tpl){\r\n                tpl += '<%else%><%_value??%><%/if%>'\r\n            }\r\n            else{\r\n                tpl = '<%_value??%>'\r\n            }\r\n            self._template.content = tpl;\r\n        },\r\n        //获取表格标题行数\r\n        _getRowNumber:function(array, index, arr, cellid, parent){\r\n            var self = this, _class = self.constructor;\r\n            if(!arr[index]){\r\n                arr[index] = true;\r\n            }\r\n\r\n            if(cellid === undefined){\r\n                cellid = 0;\r\n            }\r\n            \r\n            Nui.each(array, function(v){\r\n                v.cellid = cellid++;\r\n                var order = v.order;\r\n                var className = v.className;\r\n                if(order === true){\r\n                    order = 'desc'\r\n                }\r\n                if(order === 'asc' || order === 'desc'){\r\n                    v.order = {};\r\n                    v.order[order] = 1;\r\n                }\r\n                if(v.order && !v.order.field){\r\n                    v.order.field = v.field\r\n                }\r\n\r\n                if(v.template === true){\r\n                    var tplid = 'content_'+v.cellid;\r\n                    self._template[tplid] = self._colTemplates[tplid] = v.filter || v.content;\r\n                }\r\n\r\n                if(!v.style){\r\n                    v.style = {};\r\n                }\r\n                \r\n                if(v.align){\r\n                    v.style['text-align'] = v.align;\r\n                }\r\n\r\n                if(v.valign){\r\n                    v.style['vertical-align'] = v.valign;\r\n                }\r\n\r\n                if(v.width){\r\n                    v.width = v.width.toString().replace(/px$/, '');\r\n                }\r\n\r\n                if(typeof className !== 'function'){\r\n                    if(!className){\r\n                        className = '';\r\n                    }\r\n    \r\n                    if(className){\r\n                        className = ' ' + Nui.trim(className);\r\n                    }\r\n    \r\n                    v.className = className;\r\n                }\r\n\r\n                if($.isEmptyObject(v.style)){\r\n                    delete v.style\r\n                }\r\n\r\n                if(parent && parent.fixed){\r\n                    v.fixed = parent.fixed\r\n                }\r\n\r\n                if(_class._hasChildren(v)){\r\n                    cellid = self._getRowNumber(v.children, index+1, arr, cellid, v)\r\n                }\r\n            })\r\n\r\n            if(parent){\r\n                return cellid\r\n            }\r\n\r\n            return arr.length\r\n        },\r\n        _initList:function(){\r\n            var self = this, opts = self._options;\r\n            if(opts.paging){\r\n                delete opts.paging.wrap;\r\n                opts.paging.wrap = self._foot.children('.datagrid-paging');\r\n                opts.paging.container = self._tableAllBox;\r\n                var pagingId = 'paging_'+self.__id;\r\n                var echoData = opts.paging.echoData;\r\n                opts.paging.echoData = function(data, type){\r\n                    if(self.element){\r\n                        self.data = data;\r\n                        self._render(type);\r\n                        if(typeof echoData === 'function'){\r\n                            echoData.call(opts, data, type)\r\n                        }\r\n                    }\r\n                }\r\n                self.paging = window[pagingId] = new Paging(opts.paging);\r\n\r\n                if(opts.isPaging === true){\r\n                    self.paging.query(true)\r\n                }\r\n            }\r\n            else if(opts.data){\r\n                self.data = opts.data;\r\n                self._render();\r\n            }\r\n        },\r\n        _bindEvent:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('scroll', self._tableAllBox, function(e, elem){\r\n                self._scroll(elem);\r\n                self._callback('Scroll', [e, elem, {left:elem.scrollLeft(), top:elem.scrollTop()}]);\r\n            })\r\n            self._event()\r\n        },\r\n        _getList:function(){\r\n            var self = this, opts = self._options, field = opts.dataField, list = self.data, _list;\r\n            if(field && Nui.type(list, 'Object')){\r\n                Nui.each(field.split('.'), function(v){\r\n                    if(list[v]){\r\n                        list = list[v]\r\n                    }\r\n                    else{\r\n                        list = null;\r\n                        return false;\r\n                    }\r\n                })\r\n            }\r\n            if(_list = self._callback('RenderBefore', [list])){\r\n                if(Nui.type(_list, 'Array')){\r\n                    list = _list\r\n                }\r\n            }\r\n            return list||[]\r\n        },\r\n        _render:function(type){\r\n            var self = this, opts = self._options, rowHtml = '', isScroll = opts.paging && opts.paging.scroll && opts.paging.scroll.enable === true;\r\n            self.list = self._getList();\r\n            if(isScroll && type === 'reload'){\r\n                self.element.find('.datagrid-tbody [row-pagenum=\"'+ (self.paging.current) +'\"]').nextAll().addBack().remove();\r\n            }\r\n            Nui.each(self._cols, function(v, k){\r\n                if(v.length){\r\n                    if(self.list.length && typeof opts.rowRender === 'function'){\r\n                        rowHtml = opts.rowRender.call(opts, self, self.list, v, k)\r\n                    }\r\n                    else{\r\n                        rowHtml = self._tpl2html('rows', {\r\n                            type:k,\r\n                            isFixed:opts.isFixed === true,\r\n                            cols:v,\r\n                            fields:opts.fields ? (opts.fields === true ? opts.fields : [].concat(opts.fields)) : null,\r\n                            list:self.list,\r\n                            placeholder:opts.placeholder,\r\n                            pageNum:opts.paging && self.paging ? self.paging.current : undefined,\r\n                            checked:self._checked,\r\n                            stringify:function(val){\r\n                                if(typeof opts.stringify=== 'function'){\r\n                                    return opts.stringify.call(opts, val)\r\n                                }\r\n                            },\r\n                            rowRender:function(val, i){\r\n                                if(typeof opts.onRowRender === 'function'){\r\n                                    return opts.onRowRender.call(opts, self, val, i)\r\n                                }\r\n                                return opts.onRowRender\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    var tbody = self.element.find('.datagrid-table-'+k+' .datagrid-tbody');\r\n                    var elems;\r\n                    if(isScroll && (type === 'jump' || type === 'reload')){\r\n                        elems = $(rowHtml).appendTo(tbody);\r\n                    }\r\n                    else{\r\n                        elems = tbody.html(rowHtml);\r\n                    }\r\n                    elems.find('.datagrid-checkbox').checkradio(self._checkradio());\r\n                }\r\n            })\r\n            self._resetSize();\r\n            self._callback('Render');\r\n        },\r\n        _checkradio:function(){\r\n            var self = this, opts = self._options;\r\n            var callback = function(elem, e){\r\n                var className = 'datagrid-checkbox-choose';\r\n                if(elem.hasClass(className)){\r\n                    var checked = elem.prop('checked');\r\n                    if(!elem.closest('.datagrid-table').hasClass('datagrid-table-all')){\r\n                        self._tableAllBox.find('.table-row[row-index=\"'+ elem.closest('.table-row').attr('row-index') +'\"]').find('.'+className).checkradio('checked', checked)\r\n                    }\r\n                    if(elem.attr('name') === 'datagrid-checkbox-all'){\r\n                        self._checked = checked;\r\n                        self._tableTbody.find('.'+ className +':enabled').checkradio('checked', checked)\r\n                    }\r\n                    else{\r\n                        var checked = self._tableTbody.find('.'+ className +':checked').length === self._tableTbody.find('.'+className).length;\r\n                        self._checked = checked;\r\n                        self._body.find('.table-thead .'+className).checkradio('checked', checked)\r\n                    }\r\n                }\r\n                self._callback('CheckboxChange', [e, elem]);\r\n            }\r\n            var _opts = {\r\n                callback:callback\r\n            }\r\n            return _opts;\r\n        },\r\n        _resetSize:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            self._rowHeight();\r\n            if(opts.height !== 'auto'){\r\n                var stop = self._tableAllBox.scrollTop();\r\n                self._tableAllBox.css('height', 'auto');\r\n                var conntailerHeight = self._container.height();\r\n                if(opts.height > 0){\r\n                    conntailerHeight = opts.height\r\n                }\r\n                var height = conntailerHeight - \r\n                    self._tableAllTitle.outerHeight() - \r\n                    _class._getSize(self._tableAllTitle, 'tb', 'margin') - \r\n                    self._foot.outerHeight() - \r\n                    _class._getSize(self._foot, 'tb', 'margin');\r\n                self._tableAllBox.height(height);\r\n                if(opts.isFixed === true){\r\n                    var table = self._tableAllBox.children();\r\n                    var barWidth = self._tableAllBox.height() >= table.outerHeight() ? 0 : scrollBarWidth;\r\n                    var fixedHeight = height;\r\n\r\n                    if(table.outerWidth() > self._tableAllBox.width()){\r\n                        fixedHeight -= scrollBarWidth;\r\n                    }\r\n                    \r\n                    if(Nui.browser.msie && Nui.browser.version <= 7 && opts.width === '100%'){\r\n                        table.width(self._tableAllBox.width() - barWidth)\r\n                    }\r\n\r\n                    self._tableFixedBox.height(fixedHeight);\r\n\r\n                    self._tableAllTitle.css({'margin-right':barWidth});\r\n\r\n                    self._tableRight.css('right', barWidth)\r\n                }\r\n                self._tableAllBox.scrollTop(stop);\r\n            }\r\n        },\r\n        _theadHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                self._tableFixed.find('.table-thead .table-cell').each(function(i){\r\n                    var item = $(this), cellid = item.attr('cellid');\r\n                    var elem = self._tableAll.find('.table-thead .table-cell[cellid=\"'+ cellid +'\"]');\r\n                    var height = elem.height();\r\n                    var _height = item.height(height).height() - height;\r\n                    item.height(height - _height);\r\n                })\r\n            }\r\n        },\r\n        _rowHeight:function(){\r\n            var self = this;\r\n            if(self._hasLeftRight){\r\n                var LeftRow = self._tableLeft.find('.table-tbody .table-row');\r\n                var RightRow = self._tableLeft.find('.table-tbody .table-row');\r\n\r\n                self._tableAll.find('.table-tbody .table-row').each(function(i){\r\n                    var height = $(this).outerHeight();\r\n                    LeftRow.eq(i).height(height);\r\n                    RightRow.eq(i).height(height);\r\n                })\r\n            }\r\n        },\r\n        _setRowCol:function(array, type, row){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            if(row === undefined){\r\n                row = 0;\r\n            }\r\n\r\n            if(!self._rows[type]){\r\n                self._rows[type] = []\r\n            }\r\n\r\n            if(!self._cols[type]){\r\n                self._cols[type] = []\r\n            }\r\n\r\n            if(array.length && !self._rows[type][row]){\r\n                self._rows[type][row] = []\r\n            }\r\n\r\n            Nui.each(array, function(v){\r\n                var hasChild = _class._hasChildren(v);\r\n                var data = {};\r\n\r\n                if(hasChild){\r\n                    data.colspan = _class._colspan(v.children);\r\n                    self._setRowCol(v.children, type, row + 1)\r\n                }\r\n\r\n                Nui.each(v, function(val, key){\r\n                    if(key !== 'children'){\r\n                        data[key] = val\r\n                    }\r\n                })\r\n\r\n                if(!hasChild){\r\n                    data.rowspan = self._rowNumber - row;\r\n                    self._cols[type].push(v)\r\n                }\r\n\r\n                self._rows[type][row].push(data)\r\n            })\r\n        },\r\n        _editInput:function(e, elem){\r\n            var dom = elem.get(0);\r\n            var keycode = e.keyCode;\r\n            if(keycode === 37 || keycode === 39){\r\n                var index = util.getFocusIndex(dom);\r\n                var edge;\r\n                if(keycode === 37){\r\n                    edge = index !== 0;\r\n                }\r\n                else{\r\n                    edge = index !== dom.value.length;\r\n                }\r\n                if(util.isTextSelect() || edge){\r\n                    return false\r\n                }\r\n            }\r\n        },\r\n        _horzFocus:function(e, elem, type, isTab){\r\n            var td = elem.closest('td.table-cell');\r\n            var _td = td[type]();\r\n            if(isTab){\r\n                e.preventDefault();\r\n            }\r\n            if(_td.length){\r\n                var input = _td.find('.datagrid-input');\r\n                if(input.length && !input.prop('readonly') && !input.prop('disabled')){\r\n                    input.focus();\r\n                    setTimeout(function(){\r\n                        input.select();\r\n                    })\r\n                }\r\n                else{\r\n                    this._horzFocus(e, _td.children(), type, isTab)\r\n                }\r\n            }\r\n            else{\r\n                var input;\r\n                var elems = td.closest('.table-row').children('td.table-cell');\r\n                if(type === 'prev'){\r\n                    $.each($.makeArray(elems).reverse(), function(k, v){\r\n                        var _input = $(v).find('.datagrid-input');\r\n                        if(_input.length){\r\n                            input = _input;\r\n                            return false;\r\n                        }\r\n                    });\r\n                }\r\n                else{\r\n                    elems.each(function(){\r\n                        var _input = $(this).find('.datagrid-input');\r\n                        if(_input.length){\r\n                            input = _input;\r\n                            return false;\r\n                        }\r\n                    })\r\n                }\r\n                if(input){\r\n                    this._verticalFocus(e, input, type)\r\n                }\r\n            }\r\n        },\r\n        _verticalFocus:function(e, elem, type){\r\n            var td = elem.closest('td.table-cell');\r\n            var index = td.index();\r\n            var tr = td.closest('.table-row')[type]();\r\n            if(tr.length){\r\n                var _td = tr.children('td.table-cell').eq(index);\r\n                var input = _td.find('.datagrid-input');\r\n                if(input.length && !input.prop('readonly') && !input.prop('disabled')){\r\n                    input.focus();\r\n                    setTimeout(function(){\r\n                        input.select();\r\n                    })\r\n                }\r\n                else{\r\n                    this._verticalFocus(e, _td.children(), type)\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        },\r\n        _dirFocus:function(e, elem){\r\n            var self = this, keycode = e.keyCode;\r\n            if($.inArray(keycode, self._keyCode) !== -1){\r\n                switch(keycode){\r\n                    case 37:\r\n                        self._horzFocus(e, elem, 'prev')\r\n                        break;\r\n                    case 38:\r\n                        self._verticalFocus(e, elem, 'prev')\r\n                        break;\r\n                    case 39:\r\n                        self._horzFocus(e, elem, 'next')\r\n                        break;\r\n                    case 40:\r\n                        self._verticalFocus(e, elem, 'next')\r\n                        break;\r\n                    default:\r\n                        self._horzFocus(e, elem, 'next', true)\r\n                }\r\n            }\r\n        },\r\n        _events:{\r\n            'click .table-tbody .table-row':'_getRowData _active',\r\n            'mouseenter .table-tbody .table-row':function(e, elem){\r\n                if(this._tableFixed.length){\r\n                    this._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').addClass('s-hover');\r\n                }\r\n                elem.addClass('s-hover');\r\n                this._callback('RowMouseover', [e, elem]);\r\n            },\r\n            'mouseleave .table-tbody .table-row':function(e, elem){\r\n                if(this._tableFixed.length){\r\n                    this._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').removeClass('s-hover');\r\n                }\r\n                elem.removeClass('s-hover');\r\n                this._callback('RowMouseout', [e, elem]);\r\n            },\r\n            'dblclick .table-tbody .table-row':'_getRowData _rowdblclick',\r\n            'focus .datagrid-input':'_enable _getRowData _focus',\r\n            'blur .datagrid-input':'_enable _getRowData _blur',\r\n            'focusin .table-tbody .table-cell':'_focusin',\r\n            'focusout .table-tbody .table-cell':'_focusout',\r\n            'click .datagrid-order > b':'_order',\r\n            'keydown .datagrid-input':'_editInput _dirFocus'\r\n        },\r\n        _order:function(e, elem){\r\n            elem.toggleClass('s-crt');\r\n            elem.siblings().removeClass('s-crt');\r\n            var parent = elem.parent();\r\n            var field = parent.attr('field');\r\n            var value = parent.children('b.s-crt').attr('value');\r\n            if(this.paging){\r\n                this.paging.condition[field] = value;\r\n                this.paging.query(true)\r\n            }\r\n        },\r\n        _enable:function(e, elem){\r\n            if(elem.prop('readonly') || elem.prop('disabled')){\r\n                e.stopPropagation();\r\n                return false\r\n            }\r\n        },\r\n        _active:function(e, elem, data){\r\n            var self = this;\r\n            self._callback('RowClick', [e, elem, data]);\r\n            if(self._options.isActive === true){\r\n                self.cancelActive();\r\n                self._activeElem = elem.addClass('s-crt');\r\n                if(self._tableFixed.length){\r\n                    self._activeFixedElem = self._tableFixed.find('.datagrid-tbody .table-row[row-index=\"'+ elem.attr('row-index') +'\"]').addClass('s-crt');\r\n                }\r\n                self._callback('Active', [e, elem, data]);\r\n            }\r\n        },\r\n        _getRowData:function(e, elem){\r\n            if(elem.hasClass('table-row')){\r\n                return elem.data()\r\n            }\r\n            return elem.closest('.table-row').data()\r\n        },\r\n        _focus:function(e, elem, data){\r\n            this._active(e, elem.closest('.table-row'), data)\r\n            return this._callback('Focus', arguments)\r\n        },\r\n        _blur:function(e, elem, data){\r\n            return this._callback('Blur', arguments)\r\n        },\r\n        _focusin:function(e, elem){\r\n            elem.addClass('s-focus');\r\n            return this._callback('Focusin', arguments)\r\n        },\r\n        _focusout:function(e, elem){\r\n            elem.removeClass('s-focus');\r\n            return this._callback('Focusout', arguments)\r\n        },\r\n        _rowdblclick:function(e, elem, data){\r\n            return this._callback('RowDblclick', arguments)\r\n        },\r\n        _scroll:function(elem){\r\n            var self = this;\r\n            var scrollTop = elem.scrollTop();\r\n            var scrollLeft = elem.scrollLeft();\r\n            self._tableFixedBox.scrollTop(scrollTop);\r\n            self._tableAllThead.scrollLeft(scrollLeft);\r\n        },\r\n        resize:function(){\r\n            this._theadHeight();\r\n            this._resetSize();\r\n            this._callback('Resize')\r\n        },\r\n        scrollTo:function(x, y){\r\n            var elem = this._tableAllBox;\r\n            elem.scrollTop(y||0);\r\n            elem.scrollLeft(x||0);\r\n        },\r\n        cancelActive:function(){\r\n            if(this._options.isActive === true && this._activeElem){\r\n                this._activeElem.removeClass('s-crt');\r\n                delete this._activeElem\r\n            }\r\n        },\r\n        checkedData:function(field){\r\n            var self = this;\r\n            var data = [];\r\n            self._tableAllBox.find('.datagrid-checkbox-choose:checked').each(function(){\r\n                var _data = $(this).closest('.table-row').data();\r\n                if(field){\r\n                    data.push(_data[field]);\r\n                }\r\n                else{\r\n                    data.push(_data);\r\n                }\r\n            })\r\n            return data;\r\n        }\r\n    })\r\n})\nNui[define]('pages/components/datagrid/script/checkradio',function(require,imports,renders,extend){\n\tvar module=this;\n\t/**\r\n\t * @filename jquery.checkradio.js\r\n\t * @author Aniu[2016-04-27 14:00]\r\n\t * @update Aniu[2016-08-23 22:44]\r\n\t * @version v1.4\r\n\t * @description 模拟单选复选框\r\n\t */\r\n\t\r\n\t;!(function($, undefined){\r\n\t    $.fn.checkradio = function(attr, value){\r\n\t\t\tif(!attr || $.isPlainObject(attr)){\r\n\t\t\t\tvar o = $.extend({\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 配置开关按钮\r\n\t\t\t\t\t * @type <Object>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tswitches:{\r\n\t\t\t\t\t\toff:'',\r\n\t\t\t\t\t\ton:''\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 点击元素状态改变前回调，如返回值为false则将阻止状态改变\r\n\t\t\t\t\t * @type <Function>\r\n\t\t\t\t\t * @return <undefined, Boolean>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tbeforeCallback:$.noop,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @func 点击元素状态改变后回调\r\n\t\t\t\t\t * @type <Function>\r\n\t\t\t\t\t */\r\n\t\t\t\t\tcallback:$.noop\r\n\t\t\t\t}, attr||{});\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tvar me = $(this);\r\n\t\t\t\t\tvar checkradio = me.closest('.ui-checkradio');\r\n\t\t\t\t\tif(!checkradio.length){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar checked = me.prop('checked') ? ' s-checked' : '';\r\n\t\t\t\t\tvar disabled = me.prop('disabled') ? ' s-dis' : '';\r\n\t\t\t\t\tvar name = me.attr('name');\r\n\t\t\t\t\tvar switches = $.extend({}, o.switches, me.data()||{});\r\n\t\t\t\t\tvar switchElem = checkradio.find('.text');\r\n\t\t\t\t\tvar type = 'radio';\r\n\t\t\t\t\tif(me.is(':checkbox')){\r\n\t\t\t\t\t\ttype = 'checkbox';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(checkradio.children().attr('checkname')){\r\n\t\t\t\t\t\tcheckradio.children().attr('class', 'ui-'+ type + checked + disabled);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(switches.off && switches.on){\r\n\t\t\t\t\t\t\tcheckradio.addClass('ui-switches');\r\n\t\t\t\t\t\t\tswitchElem = $('<s class=\"text\">'+ (me.prop('checked') ? switches.on : switches.off) +'</s>').insertBefore(me);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tme.css({position:'absolute', top:'-999em', left:'-999em', opacity:0}).wrap('<i></i>');\r\n\t\t\t\t\t\tcheckradio.wrapInner('<em class=\"ui-'+ type + checked + disabled +'\" checkname=\"'+ name +'\"></em>')\r\n\t\t\t\t\t\t.children().click(function(e){\r\n\t\t\t\t\t\t\tvar ele = $(this);\r\n\t\t\t\t\t\t\tif(me.is(':disabled') || o.beforeCallback(me, e) === false){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(me.is(':checkbox')){\r\n\t\t\t\t\t\t\t\tvar checked = me.prop('checked');\r\n\t\t\t\t\t\t\t\tme.prop('checked', !checked);\r\n\t\t\t\t\t\t\t\tele[(checked ? 'remove' : 'add') + 'Class']('s-checked');\r\n\t\t\t\t\t\t\t\tif(switchElem.length){\r\n\t\t\t\t\t\t\t\t\tswitchElem.text(checked ? switches.off : switches.on);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tif(me.prop('checked')){\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tme.prop('checked', true);\r\n\t\t\t\t\t\t\t\t$('.ui-radio[checkname=\"'+ name +'\"]').removeClass('s-checked');\r\n\t\t\t\t\t\t\t\tele.addClass('s-checked');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\to.callback(me, e)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(o.init && !me.is(':disabled') && o.beforeCallback(me) !== false){\r\n\t\t\t\t\t\to.callback(me, 'init')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn $(this).prop(attr, value == true).checkradio();\r\n\t\t\t}\r\n\t    }\r\n\t})(jQuery);\n});\nNui[define]('pages/components/datagrid/script/paging',function(require,imports,renders,extend){\n\tvar module=this;\n\t/**\n\t * @filename jquery.paging.js\n\t * @author Aniu[2014-03-29 10:07]\n\t * @update Aniu[2016-12-06 11:23]\n\t * @version v2.9.1\n\t * @description 分页组件\n\t */\n\t\n\t;!(function(window, document, $, undefined){\n\t    var resize = function(){\n\t        \n\t    };\n\t    var request = function(op){\n\t        op.dataType = 'json';\n\t        return $.ajax(op)\n\t    };\n\t    \n\t    function Paging(options){\n\t        var that = this;\n\t        that.load = false;\n\t        //获取实例对象的名称\n\t        that.instance = function(){\n\t            for(var attr in window){\n\t                if(window[attr] == that){\n\t                    return attr.toString();\n\t                }\n\t            }\n\t        }\n\t        $.extend(that, $.extend(true, {\n\t            /**\n\t             * @function ajax请求url\n\t             * @type <String>\n\t             */\n\t            url:'',\n\t            /**\n\t             * @function 页码容器\n\t             * @type <Object>\n\t             */\n\t            wrap:null,\n\t            /**\n\t             * @function 传递参数值\n\t             * @type <String>\n\t             * @desc 将传递参数封装为json字符串，后台接收该参数来获取该json\n\t             */\n\t            paramJSON:'',\n\t            /**\n\t             * @function 当页显示数量\n\t             * @type <Number>\n\t             */\n\t            pCount:10,\n\t            /**\n\t             * @function 当前页码\n\t             * @type <Number>\n\t             */\n\t            current:1,\n\t            /**\n\t             * @function 列表数据总数\n\t             * @type <Number>\n\t             */\n\t            aCount:0,\n\t            /**\n\t             * @function 是否初始化展示最后一页\n\t             * @type <Boolean>\n\t             */\n\t            last:false,\n\t            /**\n\t             * @function 是否读取全部数据\n\t             * @type <Boolean>\n\t             * @desc 该参数启用后，接口将无法接收到pCount和current参数，前后端约定好，若没接收到这2个参数，将返回全部数据\n\t             */\n\t            allData:false,\n\t            /**\n\t             * @function 是否完整形式展示分页\n\t             * @type <Boolean>\n\t             */\n\t            isFull:true,\n\t\t\t\t/**\n\t             * @function 滚动分页配置\n\t             * @type <Obejct>\n\t             */\n\t            container:window,\n\t\t\t\tscroll:{\n\t\t\t\t\tenable:false\n\t\t\t\t},\n\t            /**\n\t             * @function ajax配置信息\n\t             * @type <JSON Obejct, Function>\n\t             */\n\t            ajax:{},\n\t            /**\n\t             * @function 接口接收参数\n\t             * @type <JSON Obejct>\n\t             */\n\t            condition:{},\n\t            /**\n\t             * @function loading加载效果\n\t             * @type <JSON Obejct>\n\t             */\n\t            loading:{\n\t                //loading容器\n\t                wrap:null,\n\t                //显示loading\n\t                show:function(){\n\t                    var that = this;\n\t                    that.hide();\n\t                    var wrap = that.wrap;\n\t                    wrap && wrap.append('<i class=\"ui-loading\" style=\"position:absolute;\">正在加载数据...</i>').css({position:'relative'});\n\t                },\n\t                //隐藏loading\n\t                hide:function(){\n\t                    $('.ui-loading').remove();\n\t                }\n\t            },\n\t            /**\n\t             * @function 上一页下一页按钮文字\n\t             * @type <JSON Obejct>\n\t             */\n\t            button:{\n\t                prev:'«',\n\t                next:'»',\n\t                first:'',\n\t                last:''\n\t            },\n\t            /**\n\t             * @function 拓展分页部分\n\t             * @type <JSON Obejct>\n\t             */\n\t            extPage:{\n\t                wrap:null,\n\t                desc:'',\n\t                prev:'上一页',\n\t                next:'下一页'\n\t            },\n\t            /**\n\t             * @function 传统页面刷新方式\n\t             * @type <Null, Function>\n\t             * @param current <Number> 目标页码\n\t             * @desc 值为函数将启用\n\t             */\n\t            refreshCallback:null,\n\t            /**\n\t             * @function ajax响应数据并且分页创建完毕后回调函数\n\t             * @type <Function>\n\t             * @param data <JSON Object> 响应数据\n\t             */\n\t            endCallback:$.noop,\n\t            /**\n\t             * @function 点击分页按钮回调函数\n\t             * @type <Function>\n\t             * @param current <Number> 目标页码\n\t             */\n\t            jumpCallback:$.noop,\n\t            /**\n\t             * @function 分页数据处理\n\t             * @type <Function>\n\t             * @param data <JSON Object> 响应数据\n\t             */\n\t            echoData:$.noop\n\t        }, Paging.options, options||{}));\n\t        that.container = $(that.container||window);\n\t\t\tif(that.scroll.enable === true){\n\t\t\t\tthat.wrap = null;\n\t\t\t\tthat.children = that.container[0] === window ? $(document.body) : that.container.children();\n\t\t\t\tthat.container.scroll(function(){\n\t\t\t\t\tthat.resize();\n\t\t\t\t}).resize(function(){\n\t\t\t\t\tthat.resize();\n\t\t\t\t});\n\t\t\t}\n\t    }\n\t    \n\t    Paging.options = {};\n\t    Paging.config = function(options){\n\t    \t$.extend(true, Paging.options, options||{})\n\t    }\n\t\n\t    Paging.prototype = {\n\t        constructor:Paging,\n\t        //页面跳转\n\t        jump:function(page){\n\t            var that = this, count = Math.ceil(that.aCount/that.pCount), current;\n\t            that.showload = true;\n\t            if(that.aCount > 0){\n\t                if(typeof(page) === 'object'){\n\t                    var val = $(page).prevAll('input').val();\n\t                    if(val <= count && val != that.current){\n\t                        current = parseInt(val);\n\t                    }\n\t                    else{\n\t                        current = that.current;\n\t                    }\n\t                }\n\t                else if(page > 0 && page <= count){\n\t                    current = page;\n\t                }\n\t                else if(page < 0){\n\t                    current = count + page + 1;\n\t                }\n\t                else{\n\t                    current = count;\n\t                }\n\t            }\n\t            else{\n\t                current = page;\n\t            }\n\t            that.current = that.condition.current = current;\n\t            that.jumpCallback(current);\n\t            if(typeof that.refreshCallback === 'function'){\n\t                that.refreshCallback(current);\n\t                that.create();\n\t                return;\n\t            }\n\t            that.getData('jump');\n\t        },\n\t        query:function(type){\n\t            var that = this;\n\t            that.showload = true;\n\t            that.load = false;\n\t            if(typeof that.refreshCallback !== 'function' || type !== 'refresh'){\n\t                if(type){\n\t                    if(type === 'noloading'){\n\t                        that.showload = false;\n\t                    }\n\t                    else if(type !== 'reload'){\n\t                        that.current = 1;\n\t                    }\n\t                    that.filter();\n\t                    that.condition.current = that.current;\n\t                }\n\t                else{\n\t                    that.condition = {current:that.current = 1};\n\t                }\n\t                that.getData(type||'');\n\t            }\n\t            else{\n\t                that.create();\n\t            }\n\t            \n\t        },\n\t        filter:function(){\n\t            var that = this;\n\t            for(var i in that.condition){\n\t                if(!that.condition[i]){\n\t                    delete that.condition[i];\n\t                }\n\t            }\n\t        },\n\t        //ajax请求数据\n\t        getData:function(type){\n\t            var that = this;\n\t            //that.showload && that.loading.show(type);\n\t            that.condition.pCount = that.pCount;\n\t            if(that.allData === true){\n\t                delete that.condition.pCount;\n\t                delete that.condition.current;\n\t            }\n\t            var param = that.condition;\n\t            if(that.paramJSON){\n\t                param = [];\n\t                $.each(that.condition, function(key, val){\n\t                    param.push(key+':'+val);\n\t                });\n\t                var temp = param.length ? '{'+param.join(',')+'}' : '';\n\t                param = {};\n\t                param[that.paramJSON] = temp;\n\t            }\n\t            \n\t            var ajax = typeof that.ajax === 'function' ? that.ajax() : that.ajax;\n\t            delete ajax.success;\n\t\n\t            if(!that.load){\n\t            \tthat.load = true;\n\t            \trequest($.extend({}, true, {\n\t                    url:that.url,\n\t                    data:param,\n\t                    success:function(data){\n\t                        //that.showload && that.loading.hide();\n\t                        try{\n\t                            data.current = that.current;\n\t                        }\n\t                        catch(e){}\n\t                        var stop = 0, index;\n\t                        if(that.container[0] !== window && type !== 'reload' && type !== 'noloading' && (type !== 'jump' || (type === 'jump' && !that.scroll.enable))){\n\t                        \tthat.container.scrollTop(0)\n\t                        \tthat.container.scrollLeft(0)\n\t                        }\n\t                        if(type === 'reload'){\n\t                            var box = that.container;\n\t                            if(that.selector){\n\t                                box = that.container.find(that.selector);\n\t                                stop = box.scrollTop()\n\t                            }\n\t                            else{\n\t                                stop = box.scrollTop()\n\t                            }\n\t                            index = box.find('tr.rows.s-crt').index();\n\t                        }\n\t                        that.echoData(data, type);\n\t\n\t                        that.aCount = data.aCount;\n\t                        that.load = false;\n\t\t\t\t\t\t\tif(that.scroll.enable === true){\n\t\t\t\t\t\t\t\tthat.resize();\n\t\t\t\t\t\t\t}\n\t                        resize();\n\t                        if(stop > 0){\n\t                            var box = that.container;\n\t                            if(that.selector){\n\t                                box = that.container.find(that.selector);\n\t                                box.scrollTop(stop)\n\t                            }\n\t                            else{\n\t                                box.scrollTop(stop)\n\t                            }\n\t                            if(index >= 0){\n\t                                box.find('tr.rows').eq(index).addClass('s-crt');\n\t                            }\n\t                        }\n\t                        if(that.last === true){\n\t                            that.last = false;\n\t                            that.jump(-1);\n\t                            return;\n\t                        }\n\t                        that.create();\n\t                        that.endCallback(data);\n\t                    },\n\t                    error:function(){\n\t                        that.showload && that.loading.hide();\n\t                        that.load = false;\n\t                    }\n\t                }, ajax||{}));\n\t            }\n\t        },\n\t        //过滤分页中input值\n\t        trim:function(o){\n\t            var val = Math.abs(parseInt($(o).val()));\n\t            !val && (val = 1);\n\t            $(o).val(val);\n\t        },\n\t        echoList:function(html, i, instance){\n\t            var that = this;\n\t            if(that.current == i){\n\t                html = '<li><span class=\"s-crt\">'+ i +'</span></li>';\n\t            }\n\t            else{\n\t                html = '<li><a href=\"javascript:'+ instance +'.jump('+ i +');\" target=\"_self\">'+ i +'</a></li>';\n\t            }\n\t            return html;\n\t        },\n\t\t\tresize:function(){\n\t\t\t\tvar that = this;\n\t\t\t\ttry{\n\t\t\t\t\tvar stop = that.container.scrollTop();\n\t\t\t\t\tvar height = that.container.height();\n\t\t\t\t\tvar cheight = that.children.outerHeight();\n\t\t\t\t\tif(!that.load && Math.ceil(that.aCount/that.pCount) > that.current && ((stop === 0 && cheight <= height) || (height + stop >= cheight))){\n\t\t\t\t\t\tthat.jump(++that.current);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch(e){\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t        //创建分页骨架\n\t        create:function(){\n\t            var that = this, button = that.button,\n\t                count = Math.ceil(that.aCount/that.pCount), current = that.current,\n\t                html = '', next = count == current ? 1 : current+1,\n\t                instance = that.instance(), extPage = that.extPage;\n\t\n\t            if(extPage.wrap){\n\t                var page = '<div>';\n\t                page += current == count || count == 0 ?\n\t                     '<span>'+ extPage.next +'</span>' : '<a href=\"javascript:'+ instance +'.jump('+ (current+1) +');\" target=\"_self\">'+ extPage.next +'</a>';\n\t                page += current == 1 ?\n\t                     '<span>'+ extPage.prev +'</span>' : '<a href=\"javascript:'+ instance +'.jump('+ (current-1) +');\" target=\"_self\">'+ extPage.prev +'</a>';\n\t                page += '</div><em>'+ (count !== 0 ? current : 0) +'/'+ count +'</em><strong>共'+ that.aCount + extPage.desc +'</strong>';\n\t                extPage.wrap.html(page);\n\t            }\n\t            \n\t            if(!that.wrap){\n\t                return;\n\t            }\n\t            \n\t            if(!count){\n\t                that.wrap.empty();\n\t                return;\n\t            }\n\t\n\t            html += (function(){\n\t                var tpl = '';\n\t                if(current == 1){\n\t                    if(button.first){\n\t                        tpl += '<li><span>'+ button.first +'</span></li>';\n\t                    }\n\t                    tpl += '<li><span>'+ button.prev +'</span></li>';\n\t                }\n\t                else{\n\t                    if(that.button.first){\n\t                        tpl += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">'+ button.first +'</a></li>';\n\t                    }\n\t                    tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ (current-1) +');\" target=\"_self\">'+ button.prev +'</a></li>';\n\t                }\n\t                return tpl;\n\t            })();\n\t            if(count <= 7){\n\t                for(var i = 1; i <= count; i++){\n\t                    html += that.echoList(html, i, instance);\n\t                }\n\t            }\n\t            else{\n\t                if(current-3 > 1 && current+3 < count){\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">1</a></li>';\n\t                    html += '<li><em>...</em></li>';\n\t                    for(var i = current-2; i <= current+2; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                    html += '<li><em>...</em></li>';\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ count +'</a></li>';\n\t                }\n\t                else if(current-3 <= 1 && current+3 < count){\n\t                    for(var i = 1; i <= 5; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                    html += '<li><em>...</em></li>';\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ count +'</a></li>';\n\t                }\n\t                else if(current-3 > 1 && current+3 >= count){\n\t                    html += '<li><a href=\"javascript:'+ instance +'.jump(1);\" target=\"_self\">1</a></li>';\n\t                    html += '<li><em>...</em></li>';\n\t                    for(var i = count-5; i <= count; i++){\n\t                        html += that.echoList(html, i, instance);\n\t                    }\n\t                }\n\t            }\n\t            html += (function(){\n\t                var tpl = '';\n\t                if(current == count){\n\t                    tpl += '<li><span>'+ button.next +'</span></li>';\n\t                    if(button.last){\n\t                        tpl += '<li><span>'+ button.last +'</span></li>';\n\t                    }\n\t                }\n\t                else{\n\t                    tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ (current+1) +');\" target=\"_self\">'+ button.next +'</a></li>';\n\t                    if(button.last){\n\t                        tpl += '<li><a href=\"javascript:'+ instance +'.jump('+ count +');\" target=\"_self\">'+ button.last +'</a></li>';\n\t                    }\n\t                }\n\t                return tpl;\n\t            })();\n\t            if(that.isFull){\n\t                html += '<li><em>跳转到第</em><input type=\"text\" onblur=\"'+ instance +'.trim(this);\" value=\"'+ next +'\" /><em>页</em><button type=\"button\" onclick=\"'+ instance +'.jump(this);\">确定</button></li>';\n\t            }\n\t            html = '<ul class=\"ui-paging\">' + html + '</ul>';\n\t            that.wrap.html(html);\n\t        }\n\t    }\n\t    \n\t    $.extend({\n\t        paging:function(name, options){\n\t            if(options === undefined){\n\t                options = name;\n\t                name = 'paging';\n\t            }\n\t            var page = window[name] = new Paging(options);\n\t            if(typeof window[name].refreshCallback !== 'function'){\n\t                page.query(true);\n\t                return page;\n\t            }\n\t            page.query('refresh');\n\t            return page\n\t        }\n\t    });\n\t    \n\t    window.Paging = Paging;\n\t    \n\t})(window, document, jQuery);\n});\nNui[define]('./script/demo',function(require,imports,renders,extend){\n\tvar module=this;\n\tvar paging = require('pages/components/datagrid/script/paging');\r\n\tvar checkradio = require('pages/components/datagrid/script/checkradio');\r\n\tvar template = require('src/core/template');\r\n\tvar datagrid = require('src/components/datagrid');\r\n\t\r\n\tvar a = datagrid({\r\n\t    container:'#data',\r\n\t    paging:{\r\n\t        url:'http://127.0.0.1:8001/data/',\r\n\t        pCount:20\r\n\t    },\r\n\t    width:'110%',\r\n\t    columns:[{\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname',\r\n\t        fixed:'left'\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname1',\r\n\t        fixed:'left'\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:200,\r\n\t        field:'buname',\r\n\t        children:[{\r\n\t            children:[{\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }, {\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }]\r\n\t        }]\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname',\r\n\t        children:[{\r\n\t            title:'名称',\r\n\t            width:100,\r\n\t            field:'buname',\r\n\t            children:[{\r\n\t                title:'名称',\r\n\t                width:100,\r\n\t                field:'buname'\r\n\t            }]\r\n\t        }]\r\n\t    }, {\r\n\t        title:'名称',\r\n\t        width:100,\r\n\t        field:'buname'\r\n\t    }],\r\n\t    rowRender:function(self, list, v, k){\r\n\t        return template.render(renders(''+''\r\n\t            +'<%each list%>'+''\r\n\t                +'<tr class=\"table-row\">'+''\r\n\t                    +'<%each cols col%>'+''\r\n\t                    +'<td class=\"table-cell\" width=\"<%col.width%>\">'+''\r\n\t                    \r\n\t                    +'</td>'+''\r\n\t                    +'<%/each%>'+''\r\n\t                +'</tr>'+''\r\n\t            +'<%/each%>'+''\r\n\t        +''), {\r\n\t            cols:v,\r\n\t            list:list\r\n\t        })\r\n\t    }\r\n\t})\r\n\t\r\n\t$('h1').click(function(){\r\n\t    a.option('isBorder', true)\r\n\t})\n});\n\n})('_module_2_define');"]}