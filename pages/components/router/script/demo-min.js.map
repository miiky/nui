{"version":3,"sources":["demo-debug.js"],"names":["define","Nui","text","color","opts","self","this","that","constr","constructor","isComponent","__component_name","elem","element","doc","events","_events","call","jQuery","evt","ele","ret","callback","e","cbs","_cb","_that","each","cb","i","evts","trim","split","shift","replace","join","_on","on","regex","mobile","tel","email","idcard","cn","taxnum","toFixed","digit","decimal","number","isNaN","undefined","value","toString","mend","num","zero","pre","indexOf","integer","parseInt","substr","_decimal","Math","round","len","length","getParam","name","urls","url","decodeURI","location","href","startIndex","temp","param","val","setParam","type","key","reg","RegExp","and","supportCss3","style","prefix","humpString","htmlStyle","document","documentElement","_toHumb","string","$0","$1","toUpperCase","push","supportHtml5","attr","createElement","target","appendTo","children","click","end","remove","formatDate","timestamp","format","date","Date","map","M","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","all","single","getFullYear","getData","item","field","data","result","voids","total","arr","serializeArray","find","div","v","isArray","k","once","$","getFocusIndex","index","setSelectionRange","selectionStart","selection","createRange","textRange","createTextRange","setEndPoint","isTextSelect","navigator","userAgent","toLowerCase","textArea","activeElement","substring","selectionEnd","window","getSelection","isInstallPDF","flag","browser","webkit","mozilla","version","plugins","test","ActiveXObject","prototype","eval","isInstallFlash","msie","formatNumber","dot","toLocaleString","numberToCN","integerNum","decimalNum","parts","cnNums","Array","cnIntRadice","cnIntUnits","cnDecUnits","chineseStr","isMinus","abs","parseFloat","zeroCount","IntLen","n","p","q","decLen","Number","util","template","tplid","caches","render","getElementById","nodeName","innerHTML","options","openTag","closeTag","methods","isstr","snippet","iscode","code","joinCode","joinSnippet","replaceInclude","tpl","regs","rege","str","tid","tmp","isNode","HTMLElement","obj","nodeType","isDom","$list","compile","variables","Rander","Function","error","dom","out","line","msg","codes","JSON","stringify","message","console","logic","res","match","exists","lastIndexOf","_call","slice","start","trimLeft","isVal","a","b","rep","syntax","regexp","method","config","args","arguments","module","require","extend","callMethod","id","_options","__id","apply","bsie7","blur","statics","__instances","__setMethod","apis","components","methodName","container","mod","nui","_mod","exports","_init","noop","_jquery","_getSize","selector","dir","size","group","l","r","lr","t","tb","border","padding","margin","css","_$fn","fn","object","option","_$ready","init","hasInstance","exist","instances","_static","skin","className","onInit","onReset","onDestroy","_template","_exec","_getTarget","_class","_bindComponentName","_tplData","getName","arrs","__parent","_pclass","_name","unshift","_event","dalegate","trigger","_callback","__eventList","_off","_eventList","off","_delete","removeAttr","_reset","_tpl2html","isOriginal","isdef","isPlainObject","reset","destroy","component","_paths","back","forward","_setpaths","rule","paths","_replace","hash","protocol","host","_getWrapper","_split","params","_change","_active","isEmptyObject","_hash","query","path","isRender","_isRender","unWrapper","_wrapper","loaded","_defaultOptions","_send","onData","wrapper","onChange","tmpl","html","main","show","siblings","hide","onAfter","_initialize","_setHistory","_isEntry","entry","_render","eq","_oldhash","_bindHashchange","hashchange","setInterval","win","_router","active","history","_history","_isHistory","level","onBefore","router","_bind","_getpath","sub","change","preventDefault","animate","equal","restore","list","wrap","_deftext","_val","_text","_create","_setStyle","position","display","width","outerWidth","overflow","cursor","height","outerHeight","isText","is","left","top","line-height","insertAfter","addClass","_createStyle","_createRules","head","appendChild","sheet","deleteRule","rules","addRule","insertRule","pleft","focus","stop","opacity","unwrap","removeClass","renders","async","detail","title"],"mappings":"CAAC,SAAUA,QACXC,IAAID,QAAQ,yCAAyC,WACjD,OACIE,KAAK,OACLC,MAAM,UAGdF,IAAID,QAAQ,kBAAmB,WAC3B,MAAO,UAASI,GACZ,GAAIC,GAAOC,KAAMC,EAAOH,GAAQC,EAC5BG,EAASD,EAAKE,YACdC,EAAcF,GAAUA,EAAOG,iBAC/BC,EAAOP,EAAKQ,SAAWN,EAAKM,SAAWZ,IAAIa,IAC3CC,EAASL,EAAcH,EAAKS,QAAUT,EAAKQ,MAE/C,KAAIH,IAASG,EACT,MAAOR,EAGU,mBAAXQ,KACNA,EAASA,EAAOE,KAAKV,IAGpBK,YAAgBM,UACjBN,EAAOM,OAAON,GAGlB,IAAIO,GAAKC,EAAKC,EACVC,EAAW,SAASC,EAAGX,EAAMY,GAC7B,GAAkB,kBAARA,GACNA,EAAIP,KAAKV,EAAMgB,EAAGX,OAElB,CACA,GAAIa,GAAKC,CACTzB,KAAI0B,KAAKH,EAAK,SAASI,EAAIC,GAOvB,GAN+B,mBAApBJ,EAAMlB,EAAKqB,IAClBF,EAAQnB,EAEwB,mBAApBkB,EAAMpB,EAAKuB,MACvBF,EAAQrB,GAETqB,EACC,MAAOL,GAAMI,EAAIR,KAAKS,EAAOH,EAAGX,EAAMS,MA4BtD,OAtBApB,KAAI0B,KAAKZ,EAAQ,SAASS,EAAKM,IACxBN,GAAuB,gBAARA,IAAmC,kBAARA,KACvB,gBAARA,KACNA,EAAMvB,IAAI8B,KAAKP,GAAKQ,MAAM,QAE9BF,EAAO7B,IAAI8B,KAAKD,GAAME,MAAM,OAE5Bb,EAAMW,EAAKG,QAAQC,QAAQ,KAAM,KACjCd,EAAMU,EAAKK,KAAK,KAEbzB,EACCH,EAAK6B,IAAIjB,EAAKP,EAAMQ,EAAK,SAASG,EAAGX,GACjCU,EAASC,EAAGX,EAAMY,KAItBZ,EAAKyB,GAAGlB,EAAKC,EAAK,SAASG,GACvBD,EAASC,EAAGL,OAAOZ,MAAOkB,QAKnCjB,KAUfN,IAAID,QAAQ,iBAKRsC,OAEIC,OAAO,+BAEPC,IAAI,qBAEJC,MAAM,yEAENC,OAAO,wBAEPC,GAAG,qBAEHC,OAAO,wBAUXC,QAAQ,SAASC,EAAOC,EAASC,GAC7B,GAAGC,MAAMH,IAAoB,KAAVA,EACf,MAAOA,OAIGI,KAAXF,IACCA,EAAS,GAGbD,EAAUA,GAAW,CAGrB,IAAII,GAAQL,EAAMM,WAGdC,EAAO,SAASC,GAEhB,IADA,GAAIC,GAAO,GACLD,EAAM,GACRC,GAAQ,IACRD,GAEJ,OAAOC,IAIPC,EAAM,EACPL,GAAQ,IACPA,EAAQA,EAAMjB,QAAQ,IAAK,IAC3BsB,EAAM,IAIV,IAAI3B,GAAIsB,EAAMM,QAAQ,IAEtB,KAAU,IAAP5B,GAAYkB,GAAW,EAAE,CACxB,GAAIW,GAAUC,SAASR,EAAMS,OAAO,EAAG/B,IAEnCgC,EAAW,IAAMV,EAAMS,OAAO/B,GAC9ByB,EAAM,IAAMD,EAAKN,EACrBc,IAAYC,KAAKC,MAAMF,EAASP,GAAKA,GAAKT,QAAQE,GAE/Cc,GAAY,IACXH,GAAWA,EAAU,GAAGN,YAE5BD,EAAQK,EAAME,EAAUG,EAASD,OAAO,OAGpCb,GAAU,IACdI,EAAQK,EAAML,EAAQ,IAAME,EAAKN,GAGrC,IAAc,OAAXC,GAAmBA,GAAU,GAAKA,EAASD,EAAQ,CAClDI,EAAQA,EAAMjB,QAAQ,MAAO,GAC7B,IAAIL,GAAIsB,EAAMM,QAAQ,KAAMO,EAAM,CAIlC,MAHU,IAAPnC,IACCmC,EAAMb,EAAMS,OAAO/B,EAAE,GAAGoC,QAEtBD,EAAMhB,GACRG,GAAgB,IAChBa,GAEJb,GAAQA,EAAMjB,QAAQ,MAAO,IAGjC,MAAOiB,IASXe,SAAS,SAASC,EAAMC,GACpB,GAAIC,GAAMC,UAAUF,GAAMG,SAASC,MAAOrB,IAE1C,IADAsB,WAAaJ,EAAIZ,QAAQ,KACtBgB,aAAe,EAAE,CAChB,GAA+CC,GAA3CC,EAAQN,EAAIT,OAAOa,YAAYzC,MAAM,IACzC/B,KAAI0B,KAAKgD,EAAO,SAASC,GACrBF,EAAOE,EAAI5C,MAAM,KACjBmB,EAAMuB,EAAK,IAAMA,EAAK,KAM9B,MAHmB,gBAATP,IAAqBA,IAC3BhB,MAAiCD,MAAxBwB,EAAOvB,EAAMgB,IAAuBO,EAAO,IAEjDvB,GAUX0B,SAAS,SAASV,EAAMhB,EAAOiB,GAC3B,GAAiBC,GAAbhE,EAAOC,IACX,IAAGL,IAAI6E,KAAKX,EAAM,UACdE,EAAMlB,GAAOoB,SAASC,KACtBvE,IAAI0B,KAAKwC,EAAM,SAASS,EAAKG,GACtBH,IACCP,EAAMhE,EAAKwE,SAASE,EAAKH,EAAKP,UAStC,IAJAA,EAAMD,GAAMG,SAASC,MACI,IAAtBH,EAAIZ,QAAQ,OACXY,GAAO,MAEmB,IAA3BA,EAAIZ,QAAQU,EAAK,KAAY,CAC5B,GAAIa,GAAM,GAAIC,QAAO,IAAId,EAAK,UAC9BE,GAAMA,EAAInC,QAAQ8C,EAAK,KAAK7B,OAE5B,CACA,GAAI+B,GAAM,IACe,IAAtBb,EAAIZ,QAAQ,OACXyB,EAAM,KAEVb,GAAOa,EAAIf,EAAK,IAAIhB,EAG5B,MAAOkB,IAQXc,YAAY,SAASC,GACjB,GACIvD,GADAwD,GAAU,SAAU,MAAO,KAAM,KAC9BC,KACHC,EAAYC,SAASC,gBAAgBL,MACrCM,EAAU,SAAUC,GAChB,MAAOA,GAAOzD,QAAQ,SAAU,SAAU0D,EAAIC,GAC1C,MAAOA,GAAGC,gBAGtB,KAAKjE,IAAKwD,GACNC,EAAWS,KAAKL,EAAQL,EAAOxD,GAAK,IAAMuD,GAC9CE,GAAWS,KAAKL,EAAQN,GACxB,KAAKvD,IAAKyD,GACN,GAAIA,EAAWzD,IAAM0D,GAAW,OAAO,CAC3C,QAAO,GASXS,aAAa,SAASC,EAAMpF,GACxB,MAAOoF,KAAQT,UAASU,cAAcrF,IAS1C0D,SAAS,SAASF,EAAK8B,GAChB9B,GACCnD,OAAO,YAAamD,EAAK,KAAM8B,EAAS,YAAaA,GAAQ,SAAU,IAAM,IAAM,sBAC9EC,SAAS,QAAQC,WAAWC,QAAQC,MAAMC,UAUvDC,WAAW,SAASC,EAAWC,GAC3B,GAAGD,EAAY/C,SAAS+C,GAAW,CAC/B,IAAIC,EACA,MAAOD,EAEX,IAAIE,GAAO,GAAIC,MAAKH,GAChBI,GACAC,IAAIH,EAAKI,WAAW,EACpBC,IAAIL,EAAKM,UACTC,IAAIP,EAAKQ,WACTC,IAAIT,EAAKU,aACTC,IAAIX,EAAKY,aAgBb,OAdAb,GAASA,EAAOzE,QAAQ,eAAgB,SAASuF,EAAKC,GAClD,GAAIvE,GAAQ2D,EAAIY,EAChB,YAAaxE,KAAVC,GACIsE,EAAIxD,OAAS,IACbd,EAAQ,IAAMA,EACdA,EAAQA,EAAMS,OAAOT,EAAMc,OAAO,IAE/Bd,GAES,MAAXuE,GACId,EAAKe,cAAgB,IAAI/D,OAAO,EAAE6D,EAAIxD,QAE3CwD,IAIf,MAAO,KAiCXG,QAAQ,SAAS/G,EAASgH,EAAMC,GAC5B,GAAIvH,GAAOD,KACVyH,GACHC,YACAC,QAAQ,EACFC,QAAQ,EAEZ,IAAGrH,EAAQoD,OAAO,CACd,GAAIkE,GAAMtH,EAAQuH,gBACdD,GAAIlE,SACJkE,EAAMtH,EAAQwH,KAAK,UAAUD,iBAEjC,IAAIE,GAAM,GAmBV,IAlBGT,GAAwB,gBAATA,KAAsBC,IACpCQ,EAAMT,GAEV5H,IAAI0B,KAAKwG,EAAK,SAASI,EAAG1G,GACtB,GAAI+C,GAAM3E,IAAI8B,KAAKwG,EAAEpF,MACrB4E,GAAKG,QACDtD,GACAmD,EAAKE,OAET,IAAI9D,GAAOoE,EAAEpE,IACTlE,KAAIuI,QAAQT,EAAKC,OAAO7D,MACxB4D,EAAKC,OAAO7D,OAEhB4D,EAAKC,OAAO7D,GAAM4B,KAAKnB,KAE3B3E,IAAI0B,KAAKoG,EAAKC,OAAQ,SAASO,EAAGE,GAC9BV,EAAKC,OAAOS,GAAKF,EAAEpG,KAAKmG,KAEzBT,GAAQC,EAAM,CACb,GAAIY,IAAO,CACXX,GAAKC,OAAOF,MACZjH,EAAQwH,KAAKR,GAAMlG,KAAK,WACpB,GAAIqG,GAASzH,EAAKqH,QAAQe,EAAErI,MAAM+H,KAAK,WAAWL,QACtC,IAATH,GAAkBa,IACjBzI,IAAI0B,KAAKqG,EAAQ,SAASO,EAAGE,SAClBV,GAAKC,OAAOS,KAEvBC,GAAO,GAEXX,EAAKC,OAAOF,GAAO/B,KAAKiC,MAIpC,MAAOD,IAOXa,cAAc,SAAS/H,GACnB,GAAI+D,GAAM3E,IAAI8B,KAAKlB,EAAQsC,OACvB0F,EAAQjE,EAAIX,MAChB,IAAGpD,EAAQiI,kBACPD,EAAQhI,EAAQkI,mBAIhB,KACI,GAAIrE,GAAOc,SAASwD,UAAUC,cAC1BC,EAAYrI,EAAQsI,iBACxBD,GAAUE,YAAY,WAAY1E,GAClCmE,EAAQK,EAAUhJ,KAAK+D,OAE3B,MAAM1C,IAEV,MAAOsH,IAMXQ,aAAa,WACT,GAAInJ,GAAO,EAEX,IAAGsF,SAASwD,UACR9I,EAAQsF,SAASwD,UAAUC,cAAc/I,SAGxC,KAA2D,IAAxDoJ,UAAUC,UAAUC,cAAc/F,QAAQ,SAAgB,CAC9D,GAAIgG,GAAWjE,SAASkE,aACxBxJ,GAAOuJ,EAAStG,MAAMwG,UAAUF,EAASV,eAAgBU,EAASG,kBAG9DC,QAAOC,aACX5J,EAAO2J,OAAOC,eAAe1G,WAGzBoC,SAASsE,eACb5J,EAAOsF,SAASsE,eAAe1G,WAEnC,SAASlD,GAMb6J,aAAa,WACT,GAAIlI,GAAGmC,IAEHgG,MAAO,CAMX,KAJG/J,IAAIgK,QAAQC,QAAWjK,IAAIgK,QAAQE,SAAWlK,IAAIgK,QAAQG,QAAU,MACnEJ,MAAO,GAGRV,UAAUe,UAAYrG,IAAMsF,UAAUe,QAAQpG,QAC7C,IAAIpC,EAAI,EAAGA,EAAImC,IAAKnC,IAChB,GAAG,mDAAmDyI,KAAKhB,UAAUe,QAAQxI,GAAGsC,MAAM,CAClF6F,MAAO,CACP,OAIZ,IACI,GAAGH,OAAOU,eAAiBV,OAAOU,cAAcC,UAAU,CACtD,IAAI3I,EAAI,EAAGA,EAAI,GAAIA,IACf,IACI,GAAG4I,KAAK,mCAAoC5I,EAAI,QAAO,CACnDmI,MAAO,CACP,QAGR,MAAMzI,GACFyI,MAAO,EAIf,GAAI7B,MAAO,cAAe,gBAAiB,uBAAwB,gBAAiB,oBAEpF,KADAnE,IAAMmE,IAAIlE,OACNpC,EAAI,EAAGA,EAAImC,IAAKnC,IAChB,IACI,GAAG,GAAI0I,eAAcpC,IAAItG,IAAI,CACzBmI,MAAO,CACP,QAIR,MAAMzI,GACFyI,MAAO,IAKvB,MAAMzI,IAEN,MAAOyI,OAMXU,eAAe,WACX,OAAkC,KAAxBb,OAAOU,cACb,IACI,GAAK,GAAIA,eAAc,iCACnB,OAAO,EAGf,MAAMhJ,QAGN,IAAK+H,UAAUe,QAAQ,mBACnB,OAAO,CAGf,OAAGpK,KAAIgK,QAAQU,KACJ,6CAGA,8CAQfC,aAAa,SAAS5H,GAClB,GAAIU,GAAUC,SAASX,EACvB,KAAIC,MAAMS,IAAYA,IAAYV,EAASA,EAAOI,YAAY,CAC1D,GAAIyH,GAAM7H,EAAOS,QAAQ,KACrBV,EAAU,EAId,OAHG8H,GAAM,IACL9H,EAAUC,EAAOY,OAAOiH,IAErBnH,EAAQoH,iBAAiB5I,QAAQ,SAAU,IAAMa,EAE5D,MAAOC,IAOX+H,WAAW,SAAS/H,GAEhB,GAcIgI,GAEAC,EAIAC,EApBAC,EAAS,GAAIC,OAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEhEC,EAAc,GAAID,OAAM,GAAI,IAAK,IAAK,KAEtCE,EAAa,GAAIF,OAAM,GAAI,IAAK,IAAK,KAErCG,EAAa,GAAIH,OAAM,IAAK,IAAK,IAAK,KAYtCI,EAAa,EAGjB,IAAc,IAAVxI,EAAgB,MAAO,EAC3B,IAAIyI,GAAUzI,EAAS,CAEvB,KADAA,EAASc,KAAK4H,IAAIC,WAAW3I,MAXhB,KAcT,MAAO,EAEX,IAAc,GAAVA,EAEA,MADAwI,GAAaL,EAAO,GAnBR,IAiChB,IAVAnI,EAASA,EAAOI,YACY,GAAxBJ,EAAOS,QAAQ,MACfuH,EAAahI,EACbiI,EAAa,KAEbC,EAAQlI,EAAOhB,MAAM,KACrBgJ,EAAaE,EAAM,GACnBD,EAAaC,EAAM,GAAGtH,OAAO,EAAG,IAGhCD,SAASqH,EAAY,IAAM,EAAG,CAG9B,IAAK,GAFDY,GAAY,EACZC,EAASb,EAAW/G,OACfpC,EAAI,EAAGA,EAAIgK,EAAQhK,IAAK,CACjC,GAAIiK,GAAId,EAAWpH,OAAO/B,EAAG,GACzBkK,EAAIF,EAAShK,EAAI,EACjBmK,EAAID,EAAI,EACR1E,EAAI0E,EAAI,CACH,MAALD,EACAF,KAEIA,EAAY,IAChBJ,GAAcL,EAAO,IAGrBS,EAAY,EACZJ,GAAcL,EAAOxH,SAASmI,IAAMT,EAAYhE,IAE3C,GAALA,GAAUuE,EAAY,IACtBJ,GAAcF,EAAWU,IAG7BR,GAvDY,IA0DhB,GAAkB,IAAdP,EAEA,IAAK,GADDgB,GAAShB,EAAWhH,OACfpC,EAAI,EAAGA,EAAIoK,EAAQpK,IAAK,CACjC,GAAIiK,GAAIb,EAAWrH,OAAO/B,EAAG,EACpB,MAALiK,IACAN,GAAcL,EAAOe,OAAOJ,IAAMP,EAAW1J,IAYrD,MARkB,IAAd2J,EACAA,GAAcL,EAAO,GApET,KAqES,IAAdF,IACPO,GAxEY,KA0EbC,IACCD,EAAa,IAAMA,GAEhBA,KAWfvL,IAAID,QAAQ,qBAAsB,iBAAkB,SAASmM,GAEzD,GAAIC,GAAW,SAASC,EAAOtE,EAAM3H,GACjC,GAAGE,KAAK+L,MAAQA,EAAM,CAClB,GAAGC,EAAOD,GACN,MAAOE,GAAOtL,KAAKX,KAAMgM,EAAOD,GAAQtE,EAAM3H,EAElD,IAAIgB,GAAMoE,SAASgH,eAAeH,EAClC,IAAGjL,GAAsB,WAAfA,EAAIqL,UAAoC,cAAbrL,EAAI0D,KACrC,MAAOyH,GAAOtL,KAAKX,KAAMgM,EAAOD,GAASjL,EAAIsL,UAAW3E,EAAM3H,GAGtE,MAAO,IAGPkM,KAEAK,GACAC,QAAQ,KACRC,SAAS,MAGTC,GACA/K,KAAK9B,IAAI8B,KACT0E,WAAW0F,EAAK1F,WAChBmE,aAAauB,EAAKvB,aAClB/F,SAASsH,EAAKtH,SACdhC,QAAQsJ,EAAKtJ,QACbkI,WAAWoB,EAAKpB,YAGhBgC,IAAU,GAAGhL,KAEbiL,EAAU,2CAGdA,IAAWD,EAAQ,KAAKC,EAAU,KAAKA,EAAQ,aAAa,GAE5D,IAAI7K,GAAO,SAAS8K,GAChB,MAAGF,GACIE,EACQ,SAASC,GACZ,MAAO,iBAAiBA,EAAK,KAG9B,SAASA,EAAMF,GAClB,MAAOE,IAAQF,GAGpBC,EACQ,SAASC,GACZ,MAAO,mBAAmBA,EAAK,MAGhC,SAASA,EAAMF,GAElB,MADAE,GAAKnH,KAAKiH,GACHE,IAIXC,EAAWhL,GAAK,GAEhBiL,EAAcjL,IAEdkL,EAAiB,SAASC,EAAKV,EAASC,EAAUzM,GAClD,GAAIG,GAAOD,KACPiN,EAAOX,EAAQ1K,QAAQ,WAAY,QACnCsL,EAAOX,EAAS3K,QAAQ,WAAY,OACxC,OAAOoL,GAAIpL,QAAQ,GAAI+C,QAAOsI,EAAK,yCAA4CC,EAAM,KAAM,SAASC,EAAKC,GACrG,GAAGA,EAAI,CACH,GAAIC,GAAMpN,EAAKmN,EAIf,OAHkB,kBAARC,KACNA,EAAMA,KAEQ,gBAARA,GACCpB,EAAOtL,KAAKV,EAAMoN,EAAK,KAAMvN,GAG7BgM,EAASsB,EAAK,KAAMtN,GAGnC,MAAO,MAKXwN,EAAgC,gBAAhBC,aACpB,SAASC,GACL,MAAOA,aAAeD,cAE1B,SAASC,GACL,MAAwB,KAAjBA,EAAIC,UAA0C,gBAAjBD,GAAIrB,UAExCuB,EAAQ,SAASF,GACjB,GAAGA,GAAsB,gBAARA,GAAiB,CAE9B,GAAI1M,GAAM0M,EAAI,EACd,OACWF,GADRxM,EACeA,EAGJ0M,KAIlBvB,EAAS,SAASe,EAAKvF,EAAM3H,GAC7B,GAAIG,GAAOD,IACX,IAAkB,gBAARgN,GAAiB,CACvBlN,EAAOA,KACP,IAAIwM,GAAUxM,EAAKwM,SAAWD,EAAQC,QAASC,EAAWzM,EAAKyM,UAAYF,EAAQE,QAEnF,IADAS,EAAMD,EAAepM,KAAKV,EAAM+M,EAAKV,EAASC,GAC3C9E,GAAwB,gBAATA,GAAkB,CAC7B9H,IAAIuI,QAAQT,KACXA,GACIkG,MAAMlG,GAGd,IAAImF,GAAOH,EAAQ,KACnBO,GAAMA,EAAIpL,QAAQ,OAAQ,KAC1BjC,IAAI0B,KAAK2L,EAAItL,MAAM4K,GAAU,SAAShI,EAAKG,GACvCH,EAAMA,EAAI5C,MAAM6K,GACb9H,GAAO,EACNmI,EAAOE,EAAYF,EAAMgB,EAAQjO,IAAI8B,KAAK6C,EAAI,KAAK,IAGnDA,EAAI,GAAKA,EAAI,GAEjBsI,EAAOE,EAAYF,EAAMgB,EAAQtJ,EAAI,GAAG1C,QAAQ,KAAM,QAAOA,QAAQ,KAAM,UAG/E,IAAIiM,GAAYpB,EAAQ,KAExB,KAAI,GAAItE,KAAKV,GACToG,EAAYf,EAAYe,EAAW1F,EAAE,UAAUA,EAAE,IAGjDsE,KACAG,EAAOA,EAAK/K,KAAK,IACjBgM,EAAYA,EAAUhM,KAAK,KAG/B+K,EAAO,OAAQiB,EAAW,8DAA+DnB,EAAS,YAAcE,EAAO,+CAEvH,KACI,GAAIkB,GAAS,GAAIC,UAAS,QAASnB,EACnCkB,GAAO5D,UAAUsC,QAAUA,EAC3BsB,EAAO5D,UAAU8D,MAAQA,EAAMpB,EAAMnF,EAAMxH,EAAK8L,OAChD+B,EAAO5D,UAAU+D,IAAMP,EACvBV,EAAM,GAAIc,GAAOrG,GAAMyG,MACvBJ,EAAS,KAEb,MAAM7M,GACF+M,EAAMpB,EAAMnF,EAAMxH,EAAK8L,OAAO9K,IAItC,MAAO+L,GAEX,MAAO,IAGPgB,EAAQ,SAASpB,EAAMnF,EAAMsE,GAC7B,MAAO,UAAS9K,EAAGkN,GACf,GAAIC,GAAM,KACNC,IACJzB,GAAO,+BAA+BA,EAAK,MAC3CA,EAAOA,EAAKlL,MAAM,MAClB/B,IAAI0B,KAAKuL,EAAM,SAAS3E,EAAGE,GACvBkG,EAAM5I,KAAM0C,EAAE,EAAI,SAAUF,EAAErG,QAAQ,gBAAiB,OAE3DwM,GAAO,SACPA,GAAOC,EAAMxM,KAAK,MAAM,WACLe,WAAT0L,QACNF,GAAO,SACPA,GAAOE,KAAKC,UAAU9G,GAAM,QAE7BsE,IACCqC,GAAO,eACPA,GAAOrC,EAAM,QAEdoC,IACCC,GAAO,SACPA,GAAOD,EAAK,QAEhBC,GAAO,YACPA,GAAOnN,EAAEuN,QACTC,QAAQT,MAAMI,KAIlBR,EAAU,SAASZ,EAAK0B,GACxB,IAAI1B,EACA,MAAO,EAEX,IAAIJ,GAAK+B,CACT,IAAGD,EACC,OAAgC9L,MAA5B+L,EAAMC,EAAM5B,EAAK,OACjBJ,EAAO,MAAMiC,EAAOF,GAAK,SAExB,QAAoC/L,MAAhC+L,EAAMC,EAAM5B,EAAK,WACtBJ,EAAO,gBAAgBiC,EAAOF,GAAK,SAElC,IAAW,SAAR3B,EACJJ,EAAO,iBAEN,IAAW,QAARI,EACJJ,EAAO,QAEN,QAA0ChK,MAAtC+L,EAAMC,EAAM5B,EAAK,QAAS,QAC/BJ,EAAO,YAAa+B,EAAI,GAAI,eAAeA,EAAI,IAAI,UAAU,KAAKA,EAAI,IAAI,UAAU,SAEnF,IAAW,UAAR3B,EACJJ,EAAO,UAEN,QAA4ChK,MAAxC+L,EAAMC,EAAM5B,EAAK,MAAO,YAA0B,CACvD,GAAIG,GAAMwB,EAAI,GACVpN,EAAI4L,EAAI2B,YAAY,KACpBC,EAAQ,IAAKF,EAAOF,EAAIK,MAAM,GAAGlM,YAAa,GAElD,KAAU,IAAPvB,EAAS,CACR,GAAI0N,GAAQ9B,EAAI7J,OAAO,EAAG/B,GACtB0E,EAAMtG,IAAIuP,SAAS/B,EAAI7J,OAAO/B,EAAE,GACpCqL,GAAOC,EAASoC,EAAM,kBAAoBhJ,EAAM8I,OAGhDnC,GAAOC,EAAS,iBAAkBM,EAAM4B,OAI5CnC,GADI,oCAAoC5C,KAAKgD,GACtC6B,EAAO7B,GAAK,IAGZH,EAASgC,EAAO7B,GAAK,QAIhCJ,GAAOC,EAAS,KAAKG,EAAI,KAE7B,OAAOJ,GAAO,mBAKdiC,EAAS,SAASjC,EAAMuC,GACxB,MAAOvC,GAAKhL,QAAQ,gDAAiD,SAASwN,EAAGC,GAC7E,GAAIC,GAAM,WAAYD,EAAI,mBAAoBA,EAAG,YAAaA,EAAG,4BAA6BA,EAAG,GAIjG,OAHGF,KACCG,GAAO,IAAMD,EAAI,OAEdC,EAAM,OAIjBV,EAAQ,SAASzB,EAAKoC,EAAQC,GAC9B,GAAI5N,EAOJ,IAN2B,IAAxBuL,EAAIhK,QAAQoM,GACX3N,EAAU,GAEK,QAAX2N,GAAoBpC,EAAIhK,QAAQoM,GAAU,IAC9C3N,EAAU,SAECgB,KAAZhB,EAEC,MADAuL,GAAMxN,IAAIuP,SAAS/B,EAAIvL,QAAQ2N,EAAQ3N,IAChC4N,EAASrC,EAAIzL,MAAM8N,GAAUrC,EAwB5C,OApBArB,GAAS2D,OAAS,SAAS5L,EAAM7C,GACzBwL,EAAQ3I,KACR2I,EAAQ3I,GAAQ7C,IAIxB8K,EAAS4D,OAAS,WACd,GAAIC,GAAOC,SACRjQ,KAAI6E,KAAKmL,EAAK,GAAI,UACjBhQ,IAAI0B,KAAKsO,EAAK,GAAI,SAAS1H,EAAGE,GAC1BkE,EAAQlE,GAAKF,IAGb0H,EAAKhM,OAAS,GAAwB,gBAAZgM,GAAK,KACnCtD,EAAQsD,EAAK,IAAMA,EAAK,KAIhC7D,EAASG,OAASA,EAEXH,IAUXnM,IAAID,QAAQ,sBAAuB,oBAAqB,mBAAoB,SAASsN,IAAKvM,QACtF,GAAIoP,QAAS7P,KACT8P,QAAU9P,KAAK8P,QACfC,OAAS/P,KAAK+P,OACdC,WAAa,SAASP,EAAQE,EAAMnC,GAEpC,GAAGmC,EAAKhM,OAAS8L,EAAO9L,OAAO,CAC3B,GAAIsM,GAAKN,EAAKA,EAAKhM,OAAO,EAC1B,IAAGsM,GAAMtQ,IAAI6E,KAAKyL,GAAK,SAAU,YAAczC,EAAI0C,SAASD,KAAOA,GAAMzC,EAAI2C,OAASF,EAClF,OAGRR,EAAOW,MAAM5C,EAAKmC,GAGnBhQ,KAAI0Q,OACH1Q,IAAIa,IAAIuB,GAAG,QAAS,+BAAgC,WAChD/B,KAAKsQ,QAQb,IAAIC,UAEAJ,KAAK,EAELK,eAMAC,YAAY,SAASC,KAAMC,YACvB,GAAI5Q,MAAOC,IAoEX,OAnEAL,KAAI0B,KAAKqP,KAAM,SAASpM,IAAKsM,gBACDhO,KAArB7C,KAAK6Q,cACJ7Q,KAAK6Q,YAAc,WACf,GAAI7Q,MAAOC,KAAM2P,KAAOC,UAAWiB,UAAYlB,KAAK,GAAI9L,KAAO9D,KAAKM,gBACpE,IAAGwD,MAAiB,cAATA,KACP,GAAGgN,WAAaA,oBAAqBjQ,QACjC,GAAkB,SAAfgQ,WAAsB,CACrB,GAAIE,KAAMH,WAAW9M,KAClBiN,MACCD,UAAU9I,KAAK,SAASlE,KAAK,aAAaxC,KAAK,WAE3C,IAAGrB,KAAK+Q,MAAO/Q,KAAK+Q,IAAIlN,MAAxB,CAGA,GAAIvD,MAAOM,OAAOZ,MACdqM,QAAU/L,KAAKmH,KAAK5D,KAAK,WACzBmN,IACD3E,UAA8B,gBAAZA,WACd,cAAcrC,KAAKqC,SAClBA,QAAUlC,KAAK,IAAKkC,QAAS,MAEzB2E,KAAOlB,QAAQzD,SAAS,MAExBA,QADuB,kBAAjB2E,MAAKC,QACDD,KAAKC,QAAQ3Q,MAGb0Q,KAAKC,UAIL,gBAAZ5E,WACNA,YAEJyE,IAAIf,OAAO1D,SACPxG,OAAOvF,eAMnBuQ,WAAU9I,KAAK,kBAAmBlE,KAAM,KAAKxC,KAAK,WAC9C,GAAImM,GAAKiC,CACNzP,MAAK+Q,MAAQvD,EAAMxN,KAAK+Q,IAAIlN,QAAgD,mBAA9B4L,EAASjC,EAAIoD,cAC1DZ,WAAWP,EAAQ3E,MAAMZ,UAAU8E,MAAMrO,KAAKgP,KAAM,GAAInC,SAMpE7N,KAAI0B,KAAKtB,KAAKyQ,YAAa,SAAShD,GAChC,GAAIiC,GAASjC,EAAIoD,WACI,mBAAXnB,IACNO,WAAWP,EAAQE,KAAMnC,SAMrC7N,KAAI0B,KAAKsP,WAAY,SAAS1I,EAAGE,GACpB,cAANA,GAA8C,kBAAlBF,GAAE2I,aAC7B3I,EAAE2I,YAAYR,MAAMnI,EAAG0H,YAOxC5P,MAGXmQ,YAEAgB,MAAMtQ,OAAOuQ,KACbC,QAAQ,SAAS9Q,GACb,MAAGA,aAAgBM,QACRN,EAEJM,OAAON,IAElB+Q,SAAS,SAASC,EAAUC,EAAK5L,GAC7B,GAAI6L,GAAO,CAGX,IAFA7L,EAAOA,GAAQ,SACf4L,EAAMA,GAAO,KACD,QAAT5L,EACC,MAAQ3F,MAAKqR,SAASC,EAAUC,GACxBvR,KAAKqR,SAASC,EAAUC,EAAK,WAC7BvR,KAAKqR,SAASC,EAAUC,EAAK,SAEzC,IAAIE,IACAC,GAAG,QACHC,GAAG,SACHC,IAAI,OAAQ,SACZC,GAAG,OACHxC,GAAG,UACHyC,IAAI,MAAO,WAEXjK,IACAkK,QACIL,GAAG,aACHC,GAAG,cACHC,IAAI,YAAa,cACjBC,GAAG,YACHxC,GAAG,eACHyC,IAAI,WAAY,kBAGpBE,QAAQP,IAERQ,OAAOR,GAUX,OARA9R,KAAI0B,KAAKwG,EAAK,SAASvD,GAChBA,EAAIqB,IACHhG,IAAI0B,KAAKiD,EAAIqB,GAAM4L,GAAM,SAAStJ,GAC9B,GAAIpF,GAAQwI,WAAWiG,EAASY,IAAIvM,EAAKsC,GACzCuJ,IAAQ7O,MAAME,GAAS,EAAIA,MAIhC2O,GAEXW,KAAK,SAAStO,EAAMiN,GAChBlQ,OAAOwR,GAAGvO,GAAQ,WACd,GAAI8L,GAAOC,UACPvD,EAAUsD,EAAK,EACnB,OAAO3P,MAAKqB,KAAK,WACb,GAAsB,gBAAZgL,GACH1M,IAAI6E,KAAK6H,EAAS,UACjBA,EAAQxG,OAAS7F,KAGjBqM,GACIxG,OAAO7F,MAGf8Q,EAAIzE,OAEH,IAAGA,EAAQ,CACZ,GAAIgG,EACJ,IAAGrS,KAAK+Q,MAAQsB,EAAOrS,KAAK+Q,IAAIlN,KAAmC,IAAzBwI,EAAQlJ,QAAQ,KACtD,GAAe,YAAZkJ,EACCgG,EAAOC,OAAO3C,EAAK,GAAIA,EAAK,QAE5B,CACA,GAAIhK,GAAO0M,EAAOhG,EACC,mBAAT1G,IACNA,EAAKyK,MAAMiC,EAAQvH,MAAMZ,UAAU8E,MAAMrO,KAAKgP,EAAM,UAQhF4C,QAAQ,SAAS1O,EAAMiN,GACK,kBAAd9Q,MAAKwS,MACXxS,KAAKwS,KAAK7S,IAAIa,MAGtBkP,OAAO,WACH,GAAIC,GAAOC,UAEPjK,GADMgK,EAAKhM,OACJgM,EAAK,GAChB,OAAGhQ,KAAI6E,KAAKmB,EAAM,UACP3F,KAAKkQ,SAAWtP,OAAOmP,QAAO,EAAM/P,KAAKkQ,SAAUvK,GAEtDhG,IAAI6E,KAAKmB,EAAM,UACA,IAAhBgK,EAAKhM,OACG3D,KAAKkQ,SAASvK,GAElB3F,KAAKkQ,SAASvK,GAAQgK,EAAK,OAJjC,IAOT8C,YAAY,SAASxC,GACjB,GAAIyC,IAAQ,EACRC,EAAY3S,KAAKwQ,WACrB,IAAGP,EACCtQ,IAAI0B,KAAKsR,EAAW,SAAS1K,GACzB,GAAGA,EAAEiI,SAASD,KAAOA,EAEjB,MADAyC,IAAQ,GACD,QAKf,KAAInR,IAAKoR,GACL,OAAO,CAGf,OAAOD,IAIf,QACIE,QAAQrC,QACRL,UACIrK,OAAO,KAEPoK,GAAG,GAEH4C,KAAK,GAELC,UAAU,GACVC,OAAO,KACPC,QAAQ,KACRC,UAAU,MAEdC,aACAhC,MAAM,WACFlR,KAAKmT,SAETA,MAAMvS,OAAOuQ,KACbiC,WAAW,WACP,GAAIrT,GAAOC,IACX,KAAID,EAAK8F,OAAO,CACZ,GAAIA,GAAS9F,EAAKmQ,SAASrK,OACvBwN,EAAStT,EAAKI,WAClB,KAAI0F,EACA,MAAO,KAEXA,GAASwN,EAAOjC,QAAQvL,GACxB9F,EAAK8F,OAAS9F,EAAKuT,mBAAmBzN,GAE1C,MAAO9F,GAAK8F,QAEhByN,mBAAmB,SAAS/S,GACxB,GAAIR,GAAOC,KAAMqT,EAAStT,EAAKI,YAC3BwF,EAAO,iBAAiB0N,EAAOhT,gBAOnC,OANAE,GAAQoF,KAAKA,EAAM,IAAItE,KAAK,WACpBrB,KAAK+Q,MACL/Q,KAAK+Q,QAET/Q,KAAK+Q,IAAIsC,EAAOhT,kBAAoBN,IAEjCQ,GAEXgT,SAAS,SAAS9L,GACd,GAAI3H,GAAOE,KAAKkQ,SACZmD,EAASrT,KAAKG,YACd0D,EAAO,OAASwP,EAAOhT,iBACvBwS,EAAOlT,IAAI8B,KAAK3B,EAAK+S,MACrBW,EAAU,SAASH,EAAQI,GACvB,GAAGJ,EAAOK,SAAS,CACf,GAAIC,GAAUN,EAAOK,SAASvT,YAC1ByT,EAAQD,EAAQtT,gBACpB,IAAa,cAAVuT,EAKC,MAJGf,IACCY,EAAKI,QAAQ,OAAOD,EAAM,IAAIf,GAElCY,EAAKI,QAAQ,OAAOD,GACbJ,EAAQG,EAASF,GAGhC,MAAOA,IACRX,EAAYU,EAAQH,KAgB3B,OAdAP,GAAUrN,KAAK5B,GACZgP,GACCC,EAAUrN,KAAK5B,EAAK,IAAIgP,GAEzB/S,EAAKmQ,IACJ6C,EAAUrN,KAAK4N,EAAOhT,iBAAmB,IAAMP,EAAKmQ,IAEpDxI,IACAA,MAED3H,EAAKgT,WACJA,EAAUrN,KAAK3F,EAAKgT,WAExBrL,EAAKqL,UAAYA,EAAUjR,KAAK,KACzB4F,GAEXqM,OAAO,WACH,GAAI/T,GAAOC,KAAMF,EAAOC,EAAKmQ,QAK7B,OAJGnQ,GAAKQ,SAAWT,EAAKW,SACpBX,EAAKS,QAAUR,EAAKQ,QACpBE,OAAOE,KAAKZ,EAAMD,IAEfW,OAAOE,KAAKZ,IAEvB+B,IAAI,SAAS0C,EAAMuP,EAAUzC,EAAUtQ,EAAUgT,GAC7C,GAAIjU,GAAOC,IACY,mBAAbsR,KACN0C,EAAUhT,EACVA,EAAWsQ,EACXA,EAAWyC,EACXA,EAAW,KACXzC,EAAWvR,EAAKI,YAAYiR,QAAQE,GAGxC,IAAI2C,GAAY,SAAShT,GACrB,MAAOD,GAASL,KAAKX,KAAMiB,EAAGL,OAAOZ,OA6BzC,OA1BG+T,IACwB,gBAAbzC,MACNA,EAAWA,EAASA,YAEhBA,EAAWvR,EAAKmQ,SAASrK,SAGjCkO,EAAShS,GAAGyC,EAAM8M,EAAU2C,GACzBD,GACCD,EAAShM,KAAKuJ,GAAU0C,QAAQxP,KAIpC8M,EAASvP,GAAGyC,EAAMyP,GACfD,GACC1C,EAAS0C,QAAQxP,IAIzBzE,EAAKmU,YAAYzO,MACbsO,SAASA,EACTzC,SAASA,EACT9M,KAAKA,EACLxD,SAASiT,IAGNlU,GAEXoU,KAAK,WACD,GAAIpU,GAAOC,KAAMoU,EAAarU,EAAKmU,WAYnC,OAXAvU,KAAI0B,KAAK+S,EAAY,SAAS9P,EAAKG,GAC5BH,EAAIyP,SACHzP,EAAIyP,SAASM,IAAI/P,EAAIE,KAAMF,EAAIgN,SAAUhN,EAAItD,UAG7CsD,EAAIgN,SAAS+C,IAAI/P,EAAIE,KAAMF,EAAItD,UAEnCoT,EAAW3P,GAAO,WACX2P,GAAW3P,KAEtB1E,EAAKmU,eACEnU,GAEXuU,QAAQ,WACJ,GAAIvU,GAAOC,KAAMqT,EAAStT,EAAKI,WAC/B,IAAGJ,EAAK8F,OAAO,CACX,GAAIF,GAAO,iBAAiB0N,EAAOhT,gBACnCN,GAAK8F,OAAO0O,WAAW5O,GAAMtE,KAAK,WAC3BrB,KAAK+Q,MACJ/Q,KAAK+Q,IAAIsC,EAAOhT,kBAAoB,WAC7BL,MAAK+Q,IAAIsC,EAAOhT,qBAInCgT,EAAO7C,YAAYzQ,EAAKoQ,MAAQ,WACzBkD,GAAO7C,YAAYzQ,EAAKoQ,OAEnCqE,OAAO,WAMH,MALAxU,MAAKmU,OACFnU,KAAKO,UACJP,KAAKO,QAAQ2F,SACblG,KAAKO,QAAU,MAEZP,MAEXyU,UAAU,SAASxE,EAAIxI,GACnB,GAAI3H,IACAwM,QAAQ,KACRC,SAAS,KAEb,OAAwB,KAArBqD,UAAUjM,OACFqJ,IAAIf,OAAOjM,KAAKkT,UAAWjD,EAAInQ,GAEnCkN,IAAIf,OAAOtL,KAAKX,KAAKkT,UAAWlT,KAAKkT,UAAUjD,GAAKxI,EAAM3H,IAErEmU,UAAU,SAASxE,EAAQE,GACvB,GAAI5P,GAAOC,KAAMF,EAAOC,EAAKmQ,SACzBlP,EAAWlB,EAAK,KAAK2P,EACzB,IAAuB,kBAAbzO,GACN,MAAG2O,IACC7E,MAAMZ,UAAU2J,QAAQlT,KAAKgP,EAAM5P,GAC5BiB,EAASoP,MAAMtQ,EAAM6P,IAEzB3O,EAASL,KAAKb,EAAMC,IAGnCuS,OAAO,SAASxS,EAAM4U,GAClB,GAEIrI,GAFAsD,EAAOC,UACP+E,GAAQ,CAmBZ,QAjBe,IAAZhF,EAAK,GACJgF,GAAQ,EAEJ/T,OAAOgU,cAAcjF,EAAK,KAC9BtD,EAAUsD,EAAK,GACfgF,EAAQhF,EAAK,IAETA,EAAKhM,OAAS,GAAwB,gBAAZgM,GAAK,KACnCtD,KACAA,EAAQsD,EAAK,IAAMA,EAAK,GACxBgF,EAAQhF,EAAK,KAEdtD,GAASsI,KACR3U,KAAKkQ,SAAWtP,OAAOmP,QAAO,KAAU/P,MAAe,IAAV2U,EAAiB,kBAAoB,YAAatI,GAC/FrM,KAAKwU,SACLxU,KAAKmT,SAEFnT,MAEX6U,MAAM,WAGF,MAFA7U,MAAKsS,QAAO,GACZtS,KAAKiU,UAAU,SACRjU,MAEX8U,QAAQ,WACJ9U,KAAKsU,UACLtU,KAAKwU,SACLxU,KAAKiU,UAAU,eAY3BtU,IAAID,QAAQ,yBAAyB,qBAAsB,oBAAqB,mBAAoB,SAASqV,EAAWjJ,EAAUrL,GAC9H,GAAI8P,IACAyE,UACA9D,MAAM,WACF,GAAInR,GAAOC,IACXL,KAAIa,IAAIuB,GAAG,QAAS,mBAAoB,WACpC,MAAOhC,GAAKkV,SACblT,GAAG,QAAS,sBAAuB,WAClC,MAAOhC,GAAKmV,aAGpBC,UAAU,SAASC,EAAMC,GACjBrV,KAAKgV,OAAOI,KACZpV,KAAKgV,OAAOI,GAAQC,IAG5BC,SAAS,SAASC,GAEd,MAAOA,GAAK3T,QAAQqC,SAASuR,SAAS,KAAKvR,SAASwR,KAAM,IAE9C7T,QAAQ,OAAQ,IAEhBA,QAAQ,SAAU,IAElBA,QAAQ,WAAY,OAEpBA,QAAQ,MAAO,KAE/B8T,YAAY,SAAS7E,GACjB,MAAOxI,GAAE,0CAA0CvC,SAAS+K,IAEhE8E,OAAO,SAAS5R,GACZ,GAAIhD,IACAgD,IAAIA,EACJ6R,WAEAhH,EAAQ7K,EAAI6K,MAAM,cACtB,IAAGA,EAAM,CACL,GAAIgH,GAAShH,EAAM,EACnB7N,GAAIgD,IAAMA,EAAInC,QAAQgU,EAAQ,IAC9BA,EAASA,EAAOhU,QAAQ,IAAK,IAAIF,MAAM,KACvC/B,IAAI0B,KAAKuU,EAAQ,SAAS3N,EAAGE,GACzB,GAAIN,GAAMI,EAAEvG,MAAM,IAClBX,GAAI6U,OAAO/N,EAAI,IAAMA,EAAI,KAGjC,MAAO9G,IAEX8U,QAAQ,WACJ,GAAI9V,GAAOC,IAEX,UADOD,GAAK+V,SACRzN,EAAE0N,cAAchW,EAAKiV,QAAQ,CAC7B,GAAIgB,GAAQ/R,SAASsR,KAAMxU,EAAMf,KAAK2V,OAAOK,GAAQT,EAAOxV,EAAKuV,SAASvU,EAAIgD,KAAMkS,EAAQlV,EAAI6U,MAChGjW,KAAI0B,KAAKtB,EAAKiV,OAAQ,SAAS/M,GAC3B,GAAGsN,IAAStN,EAAEiO,MAAiC,IAAzBX,EAAKpS,QAAQ8E,EAAEiO,MAAY,CAC7C,GAAIN,GAASL,EAAK3T,QAAQqG,EAAEiO,KAAM,IAAItU,QAAQ,MAAO,IACjDyQ,EAAStS,EAAKyQ,YAAYvI,EAAEgI,IAAKnQ,EAAOuS,EAAOnC,SAAU7L,IAE7D,IADAuR,EAASA,EAASA,EAAOlU,MAAM,QAC5BkU,EAAOjS,SAAWsE,EAAE2N,OAAOjS,OAAO,CACjC,GAAIwS,IAAgC,IAArB9D,EAAO+D,UAClBC,GAAiC,IAArBhE,EAAO+D,YAAwB/D,EAAOiE,SAClDF,GAAa/D,EAAOkE,QAAUJ,GAAYE,QACvChE,GAAO+D,WAEXC,GAAchE,EAAOiE,UAAYH,KAChCrW,EAAK2H,KAAOY,EAAE0H,QAAO,KAAUsC,EAAOmE,gBAAgB/O,OAG1D9H,IAAI0B,KAAK4G,EAAE2N,OAAQ,SAAStR,EAAKG,GAC7BJ,EAAMC,GAAOsR,EAAOnR,KAGxB9E,IAAI0B,KAAK4U,EAAO,SAAS3R,EAAKG,GAC1BJ,EAAMC,GAAO2R,EAAMxR,KAGvB1E,EAAK+V,SACDI,KAAKjO,EAAEiO,KAAK,IACZnS,IAAIwR,EAAK,IACTK,OAAOvR,EACP4R,MAAMA,GAGVnW,EAAK2H,KAAOY,EAAE0H,QAAO,EAAMjQ,EAAK2H,KAAM1H,EAAK+V,SAExCzD,EAAOoE,OAASpE,EAAOoE,MAAMhP,MAA+B,kBAAhB3H,GAAK4W,SAChD5W,EAAK4W,OAAO/V,KAAKb,EAAMuS,EAAOoE,MAAMhP,YAC7B4K,GAAOoE,OAGfL,IACItW,EAAK6W,UAAYtE,EAAOiE,SACI,iBAAjBxW,GAAK6W,QACXtE,EAAOiE,SAAWjE,EAAOxB,UAAU9K,SAASjG,EAAK6W,SAGjDtE,EAAOiE,SAAWvW,EAAK2V,YAAYrD,EAAOxB,WAGzC9Q,EAAKuW,WACVvW,EAAKuW,SAAWvW,EAAK2V,YAAYrD,EAAOxB,YAE5CkE,EAAUD,SAASzC,EAAOiE,UAAUvW,EAAKuW,UAAUjC,OAGvD,IAAIsC,GAAU7W,EAAKS,QAAU8R,EAAOiE,UAAYvW,EAAKuW,QAErD,IAA4B,kBAAlBxW,GAAK8W,WAAwD,IAA7B9W,EAAK8W,SAASjW,KAAKb,GACzD,OAAO,CAGX,IAAGsW,EAAU,CACT,GAAIS,GAAO/W,EAAKgM,QACb+K,KACoB,gBAATA,GACNF,EAAQG,KAAKhL,EAASG,OAAO4K,EAAM/W,EAAK2H,OAGxCkP,EAAQG,KAAKhL,EAASG,OAAOtL,KAAKkW,EAAMA,EAAKE,KAAMjX,EAAK2H,QAGtC,kBAAhB3H,GAAKiT,QACXjT,EAAKiT,OAAOpS,KAAKb,GAErBW,EAAOE,KAAKb,GACZiV,EAAUvC,KAAKmE,GACftE,EAAOkE,QAAS,EAWpB,MARAI,GAAQK,OAAOC,SAAS,uBAAuBC,OACpB,kBAAjBpX,GAAKqX,SACXrX,EAAKqX,QAAQxW,KAAKb,GAEtBC,EAAKqX,aAAc,EAChBzX,IAAI0Q,OACHtQ,EAAKsX,YAAYrB,IAEd,MAKfjW,EAAKqX,aACLzX,IAAI0B,KAAKtB,EAAKyQ,YAAa,SAASvI,GAChC,IAAIlI,EAAKuX,WAAiC,IAArBrP,EAAEiI,SAASqH,MAS5B,MARAxX,GAAKuX,UAAW,EACbrP,EAAEpC,OACDoC,EAAEuP,QAAQvP,EAAEpC,OAAO4R,GAAG,IAElBxP,EAAEiO,MACNjO,EAAEuP,QAAQvP,EAAEiO,MAEhBnW,EAAKqX,aAAc,GACZ,IAKvBrX,EAAK2X,SAAW1B,GAEpB2B,gBAAgB,WACZ,GAAI5X,GAAOC,IACX,IAAGL,IAAI0Q,MAAM,CACT,GAAIuH,GAAa,SAAS7W,GACtB,GAAIwU,GAAOtR,SAASsR,IACpB,OAAGxV,GAAK2X,WAAanC,IACTxU,EAIhB8W,aAAY,WACLD,KACC7X,EAAK8V,WAEV,KACH+B,GAAW,OAGXjY,KAAImY,IAAI/V,GAAG,aAAc,WACrBhC,EAAK8V,aAIjBtD,QAAQ,KACRJ,KAAK,KACLK,KAAK,KACLvD,MAAM,WACEjP,KAAKoX,aACLpX,KAAK6V,WAGb5R,SAAS,SAASF,EAAK0D,EAAMwE,GACzB,GAAIlM,GAAOC,IACX,IAAG+D,EAAI,CACA6L,UAAUjM,QAAS,GAAqB,iBAAT8D,KAC9BwE,EAASxE,EACTA,EAAO,KAEX,IAAIrD,GAAM2T,EAAS9B,EAAQ,GACvBrH,EAAQ7K,EAAI6K,MAAM,cACnBA,KACCqH,EAAQrH,EAAM,IAElB7K,EAAM/D,KAAKsV,SAASvR,EAAInC,QAAQ,cAAe,KAC/CjC,IAAI0B,KAAKrB,KAAKgV,OAAQ,SAAS1Q,EAAK8Q,GAChC,GAAGA,IAASrR,GAAkC,IAA1BA,EAAIZ,QAAQmB,EAAI4R,QACf9R,EAAOL,EAAInC,QAAQ,GAAI+C,QAAO,IAAIL,EAAI4R,MAAO,IAAItU,QAAQ,MAAO,MACjEwC,EAAK1C,MAAM,KAAKiC,SAAWW,EAAIsR,OAAOjS,OAEtD,MADAoU,GAAUhY,EAAKyQ,YAAYlM,EAAI2L,KACxB,IAGZ8H,IACCA,EAAQtB,OACJhP,KAAKA,GAETsQ,EAAQ3B,UAAYnK,EACpB8L,EAAQP,QAAQzT,EAAMkS,QAI1BlW,GAAKkP,SAGb+I,OAAO,WACH,MAAOhY,MAAK8V,SAEhBZ,QAAQ,SAAS3M,GAEb,MADA0P,SAAQ/C,QAAQ3M,IACT,GAEX0M,KAAK,SAAS1M,GAEV,MADA0P,SAAQhD,KAAK1M,IACN,GA6Cf,OAzCG5I,KAAI0Q,QACHE,EAAQ2H,YACR3H,EAAQ8G,YAAc,SAAS9B,GACvBvV,KAAKmY,aACLxY,IAAI0B,KAAKrB,KAAKkY,SAAU,SAAS5T,GAC7BA,EAAI0T,QAAS,IAEjBhY,KAAKkY,SAASzS,MACV8P,KAAKA,EACLyC,QAAO,KAGfhY,KAAKmY,YAAa,GAEtBxY,IAAI0B,MAAM,UAAW,QAAS,SAAS4G,GACnC,GAAIpF,GAAY,YAAJoF,EAAgB,GAAK,CACjCsI,GAAQtI,GAAK,WACT,GAAIlI,GAAOC,KAAM0D,EAAM3D,EAAKmY,SAASvU,MAmBrC,OAlBA4M,GAAQ4H,YAAa,EACrBxY,IAAI0B,KAAKtB,EAAKmY,SAAU,SAAS5T,EAAK/C,GAClC,GAAIgH,GAAQhH,EAAIsB,CAChB,IAAGyB,EAAI0T,OAAO,CAEV,IAAc,IAAXzP,GAAgBA,IAAU7E,EAEzB,MADA6F,QAAO0O,QAAQhQ,MACR,CAEX,IAAIiQ,GAAWnY,EAAKmY,SAAS3P,EAM7B,OALG2P,KACCjU,SAASsR,KAAO2C,EAAS3C,KACzB2C,EAASF,QAAS,GAEtB1T,EAAI0T,QAAS,GACN,MAGR,MAKZhY,KAAK+P,OAAOgF,GACfnC,QAAQrC,EACRL,UACIgG,KAAK,GACLpK,SAAS,GACT+E,UAAU,KACVpJ,QACA8P,OAAM,EACNZ,SAAQ,EACRyB,MAAM,EACNC,SAAS,KACTzB,SAAS,KACTF,OAAO,KACP3D,OAAO,KACPoE,QAAQ,MAEZjG,MAAM,WACF,GAAInR,GAAOC,KAAMsY,EAASvY,EAAKI,WAC5BJ,GAAKoT,UAAYmF,EAAOC,QACvBD,EAAOC,OAAQ,EACfD,EAAOX,oBAGfxE,MAAM,WACF,GAAIpT,GAAOC,KAAMF,EAAOC,EAAKmQ,SAAUoI,EAASvY,EAAKI,WAErD,IADAJ,EAAK8Q,UAAYyH,EAAOlH,QAAQtR,EAAK+Q,WAClC/Q,EAAKoW,MAAQnW,EAAK8Q,UAAU,CAC3B9Q,EAAKmW,KAAOoC,EAAOhD,SAASxV,EAAKoW,KACjC,IAAIb,GAAQtV,EAAKyY,WACb9U,EAAM2R,EAAMO,OAAOjS,MAIvB,MAHKD,GAAsB,IAAf5D,EAAKsY,OAA+B,IAAftY,EAAKsY,QAClCE,EAAOnD,UAAUE,EAAMD,KAAMC,GAE9B3R,GAAO5D,EAAKsY,MAAQ,EAEnB,IADA,GAA+B/T,GAAOoU,EAAlC7C,KACEvR,EAAQgR,EAAMO,OAAOjU,SACvBiU,EAAOnQ,KAAKpB,GACZoU,EAAM7C,EAAO/T,KAHQ,MAIrByW,EAAOnD,UAAUE,EAAMD,KAJF,KAIaqD,EAAKpQ,EAAE0H,UAAWsF,GAChDO,OAAO6C,EAAI/W,MALM,QAY7B,OAHG3B,GAAKqT,cACJrT,EAAK+T,SAEF/T,IAGfyY,SAAS,WACL,GAAIzY,GAAOC,KAAMkW,EAAOnW,EAAKmW,KAAMpW,EAAOC,EAAKmQ,SAAU3H,EAAQ2N,EAAK/S,QAAQ,MAC1EkS,GACApF,GAAGlQ,EAAKoQ,KACRyF,UACAR,KAAKc,EACLA,KAAKA,EAST,QAPc,IAAX3N,IACC8M,EAAMO,OAASM,EAAK5S,OAAOiF,EAAM,GAAG7G,MAAM,MAC1C3B,EAAKmW,KAAOb,EAAMa,KAAOA,EAAK5S,OAAO,EAAGiF,GACrCzI,EAAKsY,MAAQ,IACZ/C,EAAMD,KAAOC,EAAMa,OAGpBb,GAEXmC,QAAQ,SAASzT,GACb,GAAIhE,GAAOC,KAAMF,EAAOC,EAAKmQ,SAAUhM,EAAOH,YAAenD,QAASmD,EAAI4B,KAAK,QAAU5B,CACzF,IAAGG,EAAK,CACJ,GAAI8P,IAAU,EACV0E,EAAS,SAAS1X,GAClBgT,GAAU,CACV,IAAIuB,GAAO,KAAKxV,EAAKI,YAAYmV,SAASpR,EACnB,mBAAblD,KACNuU,EAAOvU,EAASuU,IAASA,GAE7BtR,SAASsR,KAAOA,EAEpB,IAA4B,kBAAlBzV,GAAKuY,WAAgE,IAArCvY,EAAKuY,SAAS1X,KAAKb,EAAM4Y,GAC/D,OAAO,CAEP1E,IACA0E,MAIZ5E,OAAO,WACH,GAAI/T,GAAOC,IAAaD,GAAKmQ,QAK7B,OAJAnQ,GAAK+B,IAAI,QAASnC,IAAIa,IAAKT,EAAK8F,OAAQ,SAAS5E,EAAGX,GAChDP,EAAKyX,QAAQlX,GACbW,EAAE0X,mBAEC5Y,GAEXyU,OAAO,WACH,GAAIzU,GAAOC,KAAMsY,EAASvY,EAAKI,WAO/B,OANAJ,GAAKoU,OACLxU,IAAI0B,KAAKiX,EAAOtD,OAAQ,SAAS1Q,EAAK/C,GAC/B+C,EAAI2L,KAAOlQ,EAAKoQ,YACRmI,GAAOtD,OAAOzT,KAGtBxB,GAEXuS,OAAO,KACPuC,MAAM,SAUdlV,IAAID,QAAQ,8BAA8B,sBAAuB,SAASqV,GACtE,MAAO/U,MAAK+P,OAAOgF,GACf7E,UAKItQ,KAAK,GAKLgZ,SAAQ,EAKRC,OAAM,EAKNC,SAAQ,EAKRjZ,MAAM,OAKN+W,SAAS,MAEb1D,WACI6F,KAAK,gDACLC,KAAK,kEACL1Y,KAAK,gDAET6S,MAAM,WACF,GAAIpT,GAAOC,KAAMF,EAAOC,EAAKmQ,SAAUrK,EAAS9F,EAAKqT,YACrD,IAAGvN,EAAO,CACN,GAAIjG,GAAOG,EAAKkZ,SAAWpT,EAAOF,KAAK,gBACnC5F,EAAKkZ,UAAYnZ,EAAKF,MACtBiG,EAAOF,KAAK,cAAe/F,EAAOE,EAAKF,UAE1BgD,KAAd7C,EAAKmZ,OACJnZ,EAAKmZ,KAAOvZ,IAAI8B,KAAKoE,EAAOvB,SAE7BvE,EAAKoZ,MAAQxZ,IAAI8B,KAAK7B,KACrBG,EAAKqZ,YAIjBA,QAAQ,WACJ,GAAIrZ,GAAOC,KAAMF,EAAOC,EAAKmQ,SAAUmD,EAAStT,EAAKI,WACrD,KAAGL,EAAK8Y,UAAa9Y,EAAK8Y,SAAa,eAAiB1T,UAASU,cAAc,UAiC3E7F,EAAKsZ,gBAjCiF,CACnFvZ,EAAK8Y,SACJ7Y,EAAK8F,OAAO0O,WAAW,cAE3B,IAAI9M,GAAO1H,EAAKwT,UAChB9L,GAAK3C,OACDwU,WAAW,WACXC,UAAU,eACVC,QAAQzZ,EAAK8F,OAAO4T,aAAa,KACjCC,WAAW,SACXC,SAAS,QAEb5Z,EAAK8F,OAAOmT,KAAKjZ,EAAK0U,UAAU,OAAQhN,IACxC1H,EAAKQ,QAAU8H,EAAEtI,EAAK0U,UAAU,QACxB7U,KAAKG,EAAKoZ,MACVrU,MAAM,WACF,GAAI8U,GAAS7Z,EAAK8F,OAAOgU,cACrBC,EAAS/Z,EAAK8F,OAAOkU,GAAG,WAC5B,QACIR,UAAU5Z,IAAI8B,KAAK1B,EAAK8F,OAAOvB,OAAS,OAAS,SACjDgV,WAAW,WACXU,OAAO3G,EAAOhC,SAAStR,EAAK8F,OAAQ,IAAK,WAAWwN,EAAOhC,SAAStR,EAAK8F,OAAQ,KAAK,KACtFoU,MAAM5G,EAAOhC,SAAStR,EAAK8F,OAAQ,IAAK,WAAWwN,EAAOhC,SAAStR,EAAK8F,OAAQ,KAAK,KACrF+T,SAASE,EAAS,OAASF,EAAO,KAClCM,cAAcJ,EAAS,SAAWF,EAAO,KACzC/Z,QAAQC,EAAKD,aAGrBsa,YAAYpa,EAAK8F,QAEzB9F,EAAKW,YAMb2Y,UAAU,WACN,GAAItZ,GAAOC,IAAaD,GAAKmQ,QAC7BnQ,GAAK+S,UAAY,gBAAgB/S,EAAKoQ,KACtCpQ,EAAK8F,OAAOuU,SAASra,EAAK+S,WACtB/S,EAAKI,YAAY2E,OACjB/E,EAAKsa,eAETta,EAAKua,gBAETD,aAAa,WACT,GAAIta,GAAOC,KACP8E,EAAQI,SAASU,cAAc,QACnCV,UAASqV,KAAKC,YAAY1V,GAC1B/E,EAAKI,YAAY2E,MAAQA,EAAM2V,OAEnCH,aAAa,WACT,GAAIva,GAAOC,KACPya,EAAQ1a,EAAKI,YAAY2E,MACzBmL,EAAKlQ,EAAKoQ,IACd,KACIsK,EAAMC,WAAWzK,GAErB,MAAMhP,IACNtB,IAAI0B,MAAM,8BAA+B,yBAA0B,sBAAuB,SAAS4G,GAC/F,GAAIqJ,GAAW,IAAIvR,EAAK+S,UAAU7K,EAC9B0S,EAAQ,qBAAqB5a,EAAKmQ,SAASrQ,OAAO,GACtD,KACO,WAAa4a,GACZA,EAAMG,QAAQtJ,EAAUqJ,EAAO1K,GAE3B,cAAgBwK,IACpBA,EAAMI,WAAWvJ,EAAW,IAAMqJ,EAAQ,IAAK1K,GAGvD,MAAMhP,QAGdP,QAAQ,WACJ,GAAIX,GAAOC,KAAMF,EAAOC,EAAKmQ,SAAUmD,EAAStT,EAAKI,YACjD2a,EAAQzH,EAAOhC,SAAStR,EAAK8F,OAAQ,IAAK,WAAawN,EAAOhC,SAAStR,EAAK8F,OAAQ,IACxF9F,GAAK+B,IAAI,QAAS/B,EAAKQ,QAAS,WAC5BR,EAAK8F,OAAOkV,UAGhBhb,EAAK+B,IAAI,QAAS/B,EAAK8F,OAAQ,WAC3B/F,EAAK8Y,SAAW7Y,EAAKQ,QAAQya,MAAK,GAAM,GAAOpC,SAASoB,KAAKc,EAAM,GAAIG,QAAQ,UAGnFlb,EAAK+B,IAAI,cAAe/B,EAAK8F,OAAQ,SAAS5E,EAAGX,GAC7CP,EAAK8C,UAGT9C,EAAK+B,IAAI,gBAAiB/B,EAAK8F,OAAQ,SAAS5E,EAAGX,GAC/CX,IAAI8B,KAAKnB,EAAKgE,OAASvE,EAAKQ,QAAQ2W,OAASnX,EAAKQ,QAAQyW,UAGlExC,OAAO,WACH,GAAIzU,GAAOC,IACXD,GAAKoU,OACFpU,EAAKQ,UACJR,EAAKQ,QAAQ2F,SACbnG,EAAK8F,OAAOqV,WAEa,IAA1Bnb,EAAKmQ,SAAS4I,SACb/Y,EAAK8F,OAAOvB,IAAIvE,EAAKmZ,MAEzBnZ,EAAK8F,OAAOsV,YAAYpb,EAAK+S,WAC1B/S,EAAKkZ,SACJlZ,EAAK8F,OAAOF,KAAK,cAAe5F,EAAKkZ,UAGrClZ,EAAK8F,OAAO0O,WAAW,gBAG/B1R,MAAM,SAASyB,GACX,GAAI+O,GAASrT,KAAKG,YAAa0F,EAAS7F,KAAK6F,OACzCiV,EAAQzH,EAAOhC,SAASxL,EAAQ,IAAK,WAAawN,EAAOhC,SAASxL,EAAQ,KAC1EoC,EAAItI,IAAI8B,KAAMmO,UAAUjM,OAAwBkC,EAAOvB,IAAIA,GAAKA,MAA/BuB,EAAOvB,QACvCtE,KAAKkQ,SAAS2I,OAAS5Q,IAAMjI,KAAKJ,OAAUqI,GAC7CpC,EAAOvB,IAAI,IACXtE,KAAKO,SAAWP,KAAKO,QAAQyW,OAC1BhX,KAAKkQ,SAAS0I,SACb5Y,KAAKO,QAAQya,MAAK,GAAM,GAAOpC,SAASoB,KAAKc,EAAOG,QAAQ,OAG5Djb,KAAKO,SACTP,KAAKO,QAAQ2W,OAEjBlX,KAAKiU,UAAU,eAK3BtU,IAAID,QAAQ,gBAAgB,WAC3B,GACIoQ,UADU9P,KAAKob,QACLpb,KAAK8P,SAEfwI,GADcxI,QAAQ,8BACbA,QAAQ,yBAErBA,SAAQuL,MAAM,MAAO,SAASjM,MAI9BkJ,GACCzS,OAAO,QACP0R,OAAM,EACNrB,KAAK,SACLS,QAAQ,MACR9F,UAAU,UAGXyH,GACCzS,OAAO,eACP0R,OAAM,EACNrB,KAAK,mBACLrF,UAAU,QACVuH,MAAM,EACNtM,UACCiN,KAAK,sHAKLuC,OAAO,uHAbcxL,QAAQ,0CAA0C,GAeuCG,GAAI,gBAGnHxI,MACCsR,OACChV,IAAI,UACJwX,MAAM,QAENxX,IAAI,UACJwX,MAAM,QAENxX,IAAI,UACJwX,MAAM,SAGR3E,SAAS,WACR,GAAI5J,GAAMhN,KAAK8L,SAAU8J,EAAS5V,KAAKyH,KAAKmO,MACzCA,GAAO3F,IAAM2F,EAAO2F,MAEtBvO,EAAI+J,KAAO/J,EAAIsO,OAGftO,EAAI+J,KAAO/J,EAAI+L,MAGjBhG,OAAO,eAKRuF,EAAOrJ,WAGL","file":"demo-min.js.map?v=acce7c0","sourcesContent":[";(function(define){\nNui[define]('pages/components/router/script/options',function(){\r\n    return {\r\n        text:'1111',\r\n        color:'#f60'\r\n    }\r\n})\nNui[define]('src/core/events', function(){\r\n    return function(opts){\r\n        var self = this, that = opts || self,\r\n            constr = that.constructor,\r\n            isComponent = constr && constr.__component_name,\r\n            elem = self.element || that.element || Nui.doc, \r\n            events = isComponent ? that._events : that.events;\r\n            \r\n        if(!elem || !events){\r\n            return that\r\n        }\r\n\r\n        if(typeof events === 'function'){\r\n            events = events.call(that)\r\n        }\r\n\r\n        if(!(elem instanceof jQuery)){\r\n            elem = jQuery(elem)\r\n        }\r\n\r\n        var evt, ele, ret;\r\n        var callback = function(e, elem, cbs){\r\n            if(typeof cbs === 'function'){\r\n                cbs.call(that, e, elem);\r\n            }\r\n            else{\r\n                var _cb, _that;\r\n                Nui.each(cbs, function(cb, i){\r\n                    if(typeof (_cb = that[cb]) === 'function'){\r\n                        _that = that;\r\n                    }\r\n                    else if(typeof (_cb = self[cb]) === 'function'){\r\n                        _that = self;\r\n                    }\r\n                    if(_that){\r\n                        return ret = _cb.call(_that, e, elem, ret);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        Nui.each(events, function(cbs, evts){\r\n            if(cbs && (typeof cbs === 'string' || typeof cbs === 'function')){\r\n                if(typeof cbs === 'string'){\r\n                    cbs = Nui.trim(cbs).split(/\\s+/);\r\n                }\r\n                evts = Nui.trim(evts).split(/\\s+/);\r\n                // keyup:kupdown:focus a => elem.on('keyup kupdown focus', 'a', callback)\r\n                evt = evts.shift().replace(/:/g, ' ');\r\n                ele = evts.join(' ');\r\n                //组件内部处理\r\n                if(isComponent){\r\n                    that._on(evt, elem, ele, function(e, elem){\r\n                        callback(e, elem, cbs)\r\n                    })\r\n                }\r\n                else{\r\n                    elem.on(evt, ele, function(e){\r\n                        callback(e, jQuery(this), cbs)\r\n                    })\r\n                }\r\n            }\r\n        })\r\n        return that\r\n    }\r\n})\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 实用工具集\r\n */\r\n\r\nNui[define]('src/core/util', {\r\n    \r\n    /**\r\n     * @func 常用正则表达式\r\n     */\r\n    regex:{\r\n        //手机\r\n        mobile:/^0?(13|14|15|17|18)[0-9]{9}$/,\r\n        //电话\r\n        tel:/^[0-9-()（）]{7,18}$/,\r\n        //邮箱\r\n        email:/^\\w+((-w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/,\r\n        //身份证\r\n        idcard:/^\\d{17}[\\d|x]|\\d{15}$/,\r\n        //中文\r\n        cn:/^[\\u4e00-\\u9fa5]+$/,\r\n        //税号\r\n        taxnum:/^[a-zA-Z0-9]{15,20}$/\r\n    },\r\n\r\n    /**\r\n     * @func 四舍五入保留小数，原生toFixed会有精度问题\r\n     * @return <String>\r\n     * @param digit <String, Number> 待转换数字\r\n     * @param decimal <Number> 保留位数\r\n     * @param number <Number> 小数部分末尾最多显示0的数量\r\n     */\r\n    toFixed:function(digit, decimal, number){\r\n        if(isNaN(digit) || digit === ''){\r\n            return digit\r\n        }\r\n\r\n        //默认末尾只保留2个0\r\n        if(number === undefined){\r\n            number = 2\r\n        }\r\n\r\n        decimal = decimal || 0;\r\n\r\n        //将数字转换为字符串，用于分割\r\n        var value = digit.toString();\r\n\r\n        //补零\r\n        var mend = function(num){\r\n            var zero = '';\r\n            while(num > 0){\r\n                zero += '0';\r\n                num--\r\n            }\r\n            return zero\r\n        }\r\n\r\n        //正负数\r\n        var pre = '';\r\n        if(value < 0){\r\n            value = value.replace('-', '');\r\n            pre = '-';\r\n        }\r\n\r\n        //获取小数点所在位置\r\n        var i = value.indexOf('.');\r\n        //存在小数点\r\n        if(i !== -1 && decimal >= 0){\r\n            var integer = parseInt(value.substr(0, i));\r\n            //小数部分转为0.xxxxx\r\n            var _decimal = '0' + value.substr(i);\r\n            var num = '1' + mend(decimal);\r\n            _decimal = (Math.round(_decimal*num)/num).toFixed(decimal);\r\n            //小数四舍五入后，若大于等于1，整数部分需要加1\r\n            if(_decimal >= 1){\r\n                integer = (integer + 1).toString()\r\n            }\r\n            value = pre + integer + _decimal.substr(1)\r\n        }\r\n        //整数就直接补零\r\n        else if(decimal > 0){\r\n            value = pre + value + '.' + mend(decimal)\r\n        }\r\n\r\n        if(number !== null && number >= 0 && number < decimal){\r\n            value = value.replace(/0+$/, '');\r\n            var i = value.indexOf('.'), len = 0;\r\n            if(i !== -1){\r\n                len = value.substr(i+1).length;\r\n            }\r\n            while(len < number){\r\n                value = value + '0';\r\n                len++;\r\n            }\r\n            value = value.replace(/\\.$/, '');\r\n        }\r\n        \r\n        return value\r\n    },\r\n\r\n    /**\r\n     * @func 获取url参数值\r\n     * @return <String, Object>\r\n     * @param name <String, Undefined> 参数名，不传则以对象形式返回全部参数\r\n     * @param urls <String, Undefined> url地址，默认为当前访问地址\r\n     */\r\n    getParam:function(name, urls){\r\n        var url = decodeURI(urls||location.href), value = {};\r\n        startIndex = url.indexOf('?');\r\n        if(startIndex++ > 0){\r\n            var param = url.substr(startIndex).split('&'), temp;\r\n            Nui.each(param, function(val){\r\n                temp = val.split('=');\r\n                value[temp[0]] = temp[1];\r\n            });\r\n        }\r\n        if(typeof name === 'string' && name){\r\n            value = (temp = value[name]) !== undefined ? temp : '';\r\n        }\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * @func 设置url参数值\r\n     * @return <String> 设置后的url\r\n     * @param name <String, Object> 参数名或者{key:value, ...}参数集合\r\n     * @param value <String> 参数值或者url\r\n     * @param urls <String, Undefined> url，没有则获取浏览器url\r\n     */\r\n    setParam:function(name, value, urls){\r\n        var self = this, url;\r\n        if(Nui.type(name, 'Object')){\r\n            url = value||location.href;\r\n            Nui.each(name, function(val, key){\r\n                if(val){\r\n                    url = self.setParam(key, val, url);\r\n                }\r\n            });\r\n        }\r\n        else{\r\n            url = urls||location.href;\r\n            if(url.indexOf('?') === -1){\r\n                url += '?';\r\n            }\r\n            if(url.indexOf(name+'=') !== -1){\r\n                var reg = new RegExp('('+name+'=)[^&]*');\r\n                url = url.replace(reg, '$1'+value);\r\n            }\r\n            else{\r\n                var and = '';\r\n                if(url.indexOf('=') !== -1){\r\n                    and = '&';\r\n                }\r\n                url += and+name+'='+value;\r\n            }\r\n        }\r\n        return url;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持CSS3属性\r\n     * @return <Boolean>\r\n     * @param style <String> 样式属性\r\n     */\r\n    supportCss3:function(style){\r\n        var prefix = ['webkit', 'Moz', 'ms', 'o'],\r\n            i, humpString = [],\r\n            htmlStyle = document.documentElement.style,\r\n            _toHumb = function (string) {\r\n                return string.replace(/-(\\w)/g, function ($0, $1) {\r\n                    return $1.toUpperCase();\r\n                });\r\n            };\r\n        for (i in prefix)\r\n            humpString.push(_toHumb(prefix[i] + '-' + style));\r\n        humpString.push(_toHumb(style));\r\n        for (i in humpString)\r\n            if (humpString[i] in htmlStyle) return true;\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * @func 检测浏览器是否支持Html5属性\r\n     * @return <Boolean>\r\n     * @param attr <String> 属性\r\n     * @param element <String> DOM元素标签\r\n     */\r\n    supportHtml5:function(attr, element){\r\n        return attr in document.createElement(element);\r\n    },\r\n\r\n    /**\r\n     * @func 模拟location.href跳转\r\n     * @return <Undefined>\r\n     * @param url <String> 跳转的url\r\n     * @param target <String> 跳转类型，默认为_self\r\n     */\r\n    location:function(url, target){\r\n        if(url){\r\n            jQuery('<a href=\"'+ url +'\"'+ (target ? 'target=\"'+ (target||'_self') +'\"' : '' ) +'><span></span></a>')\r\n                .appendTo('body').children().click().end().remove();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @func 格式化日期\r\n     * @return <String>\r\n     * @param timestamp <String, Number> 时间戳，为空返回横杠“-”\r\n     * @param format <String, Undefined> 输出格式，为空则返回时间戳\r\n     */\r\n    formatDate:function(timestamp, format){\r\n        if(timestamp = parseInt(timestamp)){\r\n            if(!format){\r\n                return timestamp;\r\n            }\r\n            var date = new Date(timestamp);\r\n            var map = {\r\n                'M':date.getMonth()+1,\r\n                'd':date.getDate(),\r\n                'h':date.getHours(),\r\n                'm':date.getMinutes(),\r\n                's':date.getSeconds()\r\n            }\r\n            format = format.replace(/([yMdhms])+/g, function(all, single){\r\n                var value = map[single];\r\n                if(value !== undefined){\r\n                    if(all.length > 1){\r\n                       value = '0' + value;\r\n                       value = value.substr(value.length-2);\r\n                   }\r\n                   return value;\r\n                }\r\n                else if(single === 'y'){\r\n                    return (date.getFullYear() + '').substr(4-all.length);\r\n                }\r\n                return all;\r\n            });\r\n            return format;\r\n        }\r\n        return '-';\r\n    },\r\n\r\n    /**\r\n     * @func 获取表单数据集合\r\n     * @return <Object>\r\n     * @param element <jQuery Object> 表单元素集合或者form元素\r\n     * @param item <String> 将name相同表单元素值分隔，当设置为jquery选择器时，配合field参数使用，用于获取item中表单元素的数据集合\r\n     * @param field <String> 字段名，配合item参数使用，返回对象中会包含该字段\r\n     * @example\r\n     * <form id=\"form\">\r\n     *  <input type=\"hidden\" name=\"name0\" value=\"0\">\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"1\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"2\">\r\n     * </div>\r\n     * <div>\r\n     *  <input type=\"hidden\" name=\"name1\" value=\"3\">\r\n     *  <input type=\"hidden\" name=\"name2\" value=\"4\">\r\n     * </div>\r\n     * <form>\r\n     * getData($('#form'), 'div', 'list').result => \r\n     * {\r\n     *  name0:'0',\r\n     *  list:[{\r\n     *      name1:'1',\r\n     *      name2:'2'\r\n     *  }, {\r\n     *      name1:'3',\r\n     *      name2:'4'\r\n     *  }]\r\n     * }\r\n     */\r\n    getData:function(element, item, field){\r\n        var that = this;\r\n    \tvar data = {\r\n    \t\t'result':{},\r\n    \t\t'voids':0, //字段中空值数量\r\n            'total':0 //总计多少个字段\r\n        }\r\n        if(element.length){\r\n            var arr = element.serializeArray();\r\n            if(!arr.length){\r\n                arr = element.find('[name]').serializeArray();\r\n            }\r\n            var div = ',';\r\n            if(item && typeof item === 'string' && !field){\r\n                div = item\r\n            }\r\n            Nui.each(arr, function(v, i){\r\n                var val = Nui.trim(v.value)\r\n                data.total++;\r\n                if(!val){\r\n                    data.voids++\r\n                }\r\n                var name = v.name;\r\n                if(!Nui.isArray(data.result[name])){\r\n                    data.result[name] = [];\r\n                }\r\n                data.result[name].push(val)\r\n            })\r\n            Nui.each(data.result, function(v, k){\r\n                data.result[k] = v.join(div)\r\n            })\r\n            if(item && field){\r\n                var once = false;\r\n                data.result[field] = [];\r\n                element.find(item).each(function(){\r\n                    var result = that.getData($(this).find('[name]')).result;\r\n                    if(item !== true && !once){\r\n                        Nui.each(result, function(v, k){\r\n                            delete data.result[k];\r\n                        });\r\n                        once = true\r\n                    }\r\n                    data.result[field].push(result)\r\n                })\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    /**\r\n     * @func 获取输入框内光标位置\r\n     * @return <Number>\r\n     * @param element <DOM Object> 表单元素dom对象\r\n     */\r\n    getFocusIndex:function(element){\r\n        var val = Nui.trim(element.value);\r\n        var index = val.length;\r\n        if(element.setSelectionRange){\r\n            index = element.selectionStart;\r\n        }\r\n        else{\r\n            //ie\r\n            try{\r\n                var temp = document.selection.createRange();\r\n                var textRange = element.createTextRange();\r\n                textRange.setEndPoint('endtoend', temp);\r\n                index = textRange.text.length;\r\n            }\r\n            catch(e){}\r\n        }\r\n        return index;\r\n    },\r\n    /**\r\n     * @func 检测页面是否有文本被选择\r\n     * @return <Boolean>\r\n     */\r\n    isTextSelect:function(){\r\n        var text = '';\r\n        //ie10以及以下浏览器\r\n        if(document.selection){\r\n            text =  document.selection.createRange().text;\r\n        }\r\n        //火狐和ie11浏览器getSelection无法获取表单元素选中文本\r\n        else if(navigator.userAgent.toLowerCase().indexOf('gecko') !== -1){\r\n            var textArea = document.activeElement;\r\n            text = textArea.value.substring(textArea.selectionStart, textArea.selectionEnd);\r\n        }\r\n        //chrome safari opera\r\n        else if(window.getSelection){\r\n            text = window.getSelection().toString();\r\n        }\r\n        //低版本chrome\r\n        else if(document.getSelection){\r\n            text = document.getSelection().toString();\r\n        }\r\n        return !!text;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装PDF阅读器\r\n     * @return <Boolean>\r\n     */\r\n    isInstallPDF:function(){\r\n        var i, len;\r\n\r\n        var flag = true;\r\n\r\n        if(Nui.browser.webkit || (Nui.browser.mozilla && Nui.browser.version > 19)){\r\n            flag = false;\r\n        }\r\n\r\n        if(navigator.plugins && (len = navigator.plugins.length)){\r\n            for(i = 0; i < len; i++){\r\n                if(/Adobe Reader|Adobe PDF|Acrobat|Chrome PDF Viewer/.test(navigator.plugins[i].name)){\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        try{\r\n            if(window.ActiveXObject || window.ActiveXObject.prototype){\r\n                for(i = 1; i < 10; i++){\r\n                    try{\r\n                        if(eval(\"new ActiveXObject('PDF.PdfCtrl.\" + i + \"');\")){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n\r\n                var arr = ['PDF.PdfCtrl', 'AcroPDF.PDF.1', 'FoxitReader.Document', 'Adobe Acrobat', 'Adobe PDF Plug-in'];\r\n                len = arr.length;\r\n                for(i = 0; i < len; i++){\r\n                    try{\r\n                        if(new ActiveXObject(arr[i])){\r\n                            flag = false;\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    catch(e){\r\n                        flag = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch(e){}\r\n\r\n        return flag;\r\n    },\r\n    /**\r\n     * @func 检测是否需要安装flash，没有安装则返回安装路径\r\n     * @return <Boolean, String>\r\n     */\r\n    isInstallFlash:function(){\r\n        if(typeof window.ActiveXObject != 'undefined'){\r\n            try{\r\n                if(!!new ActiveXObject('ShockwaveFlash.ShockwaveFlash')){\r\n                    return false\r\n                }\r\n            }\r\n            catch(e){}\r\n        }\r\n        else{\r\n            if(!!navigator.plugins['Shockwave Flash']){\r\n                return false\r\n            }\r\n        }\r\n        if(Nui.browser.msie){\r\n            return 'http://rj.baidu.com/soft/detail/17153.html'\r\n        }\r\n        else{\r\n            return 'http://rj.baidu.com/soft/detail/15432.html'\r\n        }\r\n    },\r\n    /**\r\n     * @func 将数字转换为逗号千分位分隔\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    formatNumber:function(number){\r\n        var integer = parseInt(number);\r\n        if(!isNaN(integer) && integer && (number = number.toString())){\r\n            var dot = number.indexOf('.');\r\n            var decimal = '';\r\n            if(dot > 0){\r\n                decimal = number.substr(dot);\r\n            }\r\n            return integer.toLocaleString().replace(/\\.\\d+$/, '') + decimal\r\n        }\r\n        return number\r\n    },\r\n    /**\r\n     * @func 将数字转换为中文大写\r\n     * @param number <String> 数字\r\n     * @return <String>\r\n     */\r\n    numberToCN:function(number){\r\n        //汉字的数字\r\n        var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');\r\n        //基本单位\r\n        var cnIntRadice = new Array('', '拾', '佰', '仟');\r\n        //对应整数部分扩展单位\r\n        var cnIntUnits = new Array('', '万', '亿', '兆');\r\n        //对应小数部分单位\r\n        var cnDecUnits = new Array('角', '分', '毫', '厘');\r\n        //整数金额时后面跟的字符\r\n        var cnInteger = '整';\r\n        //整型完以后的单位\r\n        var cnIntLast = '元';\r\n        //最大处理的数字\r\n        var maxNum = 999999999999999.9999;\r\n        //金额整数部分\r\n        var integerNum;\r\n        //金额小数部分\r\n        var decimalNum;\r\n        //输出的中文金额字符串\r\n        var chineseStr = '';\r\n        //分离金额后用的数组，预定义\r\n        var parts;\r\n        if (number == '') { return ''; }\r\n        var isMinus = number < 0;\r\n        number = Math.abs(parseFloat(number));\r\n        if (number >= maxNum) {\r\n            //超出最大处理数字\r\n            return '';\r\n        }\r\n        if (number == 0) {\r\n            chineseStr = cnNums[0] + cnIntLast + cnInteger;\r\n            return chineseStr;\r\n        }\r\n        //转换为字符串\r\n        number = number.toString();\r\n        if (number.indexOf('.') == -1) {\r\n            integerNum = number;\r\n            decimalNum = '';\r\n        } else {\r\n            parts = number.split('.');\r\n            integerNum = parts[0];\r\n            decimalNum = parts[1].substr(0, 4);\r\n        }\r\n        //获取整型部分转换\r\n        if (parseInt(integerNum, 10) > 0) {\r\n            var zeroCount = 0;\r\n            var IntLen = integerNum.length;\r\n            for (var i = 0; i < IntLen; i++) {\r\n            var n = integerNum.substr(i, 1);\r\n            var p = IntLen - i - 1;\r\n            var q = p / 4;\r\n            var m = p % 4;\r\n            if (n == '0') {\r\n                zeroCount++;\r\n            } else {\r\n                if (zeroCount > 0) {\r\n                chineseStr += cnNums[0];\r\n                }\r\n                //归零\r\n                zeroCount = 0;\r\n                chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];\r\n            }\r\n            if (m == 0 && zeroCount < 4) {\r\n                chineseStr += cnIntUnits[q];\r\n            }\r\n            }\r\n            chineseStr += cnIntLast;\r\n        }\r\n        //小数部分\r\n        if (decimalNum != '') {\r\n            var decLen = decimalNum.length;\r\n            for (var i = 0; i < decLen; i++) {\r\n            var n = decimalNum.substr(i, 1);\r\n            if (n != '0') {\r\n                chineseStr += cnNums[Number(n)] + cnDecUnits[i];\r\n            }\r\n            }\r\n        }\r\n        if (chineseStr == '') {\r\n            chineseStr += cnNums[0] + cnIntLast + cnInteger;\r\n        } else if (decimalNum == '') {\r\n            chineseStr += cnInteger;\r\n        }\r\n        if(isMinus){\r\n            chineseStr = '负' + chineseStr\r\n        }\r\n        return chineseStr;\r\n    }\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 模版引擎\r\n */\r\n\r\nNui[define]('src/core/template', ['src/core/util'], function(util){\r\n\r\n    var template = function(tplid, data, opts){\r\n        if(this.tplid = tplid){\r\n            if(caches[tplid]){\r\n                return render.call(this, caches[tplid], data, opts)\r\n            }\r\n            var ele = document.getElementById(tplid);\r\n            if(ele && ele.nodeName==='SCRIPT' && ele.type === 'text/html'){\r\n                return render.call(this, caches[tplid] = ele.innerHTML, data, opts)\r\n            }\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var caches = {};\r\n\r\n    var options = {\r\n        openTag:'<%',\r\n        closeTag:'%>'\r\n    }\r\n\r\n    var methods = {\r\n        trim:Nui.trim,\r\n        formatDate:util.formatDate,\r\n        formatNumber:util.formatNumber,\r\n        setParam:util.setParam,\r\n        toFixed:util.toFixed,\r\n        numberToCN:util.numberToCN\r\n    }\r\n\r\n    var isstr = !!''.trim;\r\n\r\n    var snippet = ';$that.out = function(){return $that.code';\r\n\r\n    //低版本IE用push拼接字符串效率更高\r\n    snippet = (isstr ? '\"\"'+snippet : '[]'+snippet+'.join(\"\")')+'}';\r\n\r\n    var join = function(iscode){\r\n        if(isstr){\r\n            if(iscode){\r\n                return function(code){\r\n                    return '$that.code += '+code+';'\r\n                }\r\n            }\r\n            return function(code, snippet){\r\n                return code += snippet\r\n            }\r\n        }\r\n        if(iscode){\r\n            return function(code){\r\n                return '$that.code.push('+code+');'\r\n            }\r\n        }\r\n        return function(code, snippet){\r\n            code.push(snippet);\r\n            return code\r\n        }\r\n    }\r\n\r\n    var joinCode = join(true);\r\n\r\n    var joinSnippet = join();\r\n\r\n    var replaceInclude = function(tpl, openTag, closeTag, opts){\r\n        var that = this;\r\n        var regs = openTag.replace(/([^\\s])/g, '\\\\$1');\r\n        var rege = closeTag.replace(/([^\\s])/g, '\\\\$1');\r\n        return tpl.replace(new RegExp(regs+'\\\\s*include\\\\s+[\\'\\\"]([^\\'\\\"]*)[\\'\\\"]\\\\s*'+rege, 'g'), function(str, tid){\r\n            if(tid){\r\n                var tmp = that[tid];\r\n                if(typeof tmp === 'function'){\r\n                    tmp = tmp();\r\n                }\r\n                if(typeof tmp === 'string'){\r\n                    return render.call(that, tmp, null, opts)\r\n                }\r\n                else{\r\n                    return template(tid, null, opts)\r\n                }\r\n            }\r\n            return ''\r\n        })\r\n    }\r\n\r\n    //部分浏览器中表单对象name属性如果和模版中需要使用的变量重名，而这个变量又不存在，返回值就会变成该dom....\r\n    var isNode = typeof HTMLElement === 'object' ? \r\n    function(obj){\r\n        return obj instanceof HTMLElement;\r\n    } : \r\n    function(obj){\r\n        return obj.nodeType === 1 && typeof obj.nodeName === 'string';\r\n    };\r\n    var isDom = function(obj){\r\n        if(obj && typeof obj === 'object'){\r\n            //元素集合\r\n            var ele = obj[0];\r\n            if(ele){\r\n                return isNode(ele)\r\n            }\r\n            //元素\r\n            return isNode(obj)\r\n        }\r\n    }\r\n\r\n    var render = function(tpl, data, opts){\r\n        var that = this;\r\n        if(typeof tpl === 'string'){\r\n            opts = opts || {};\r\n            var openTag = opts.openTag || options.openTag, closeTag = opts.closeTag || options.closeTag;\r\n            tpl = replaceInclude.call(that, tpl, openTag, closeTag);\r\n            if(data && typeof data === 'object'){\r\n                if(Nui.isArray(data)){\r\n                    data = {\r\n                        $list:data\r\n                    }\r\n                }\r\n                var code = isstr ? '' : [];\r\n                tpl = tpl.replace(/\\s+/g, ' ');\r\n                Nui.each(tpl.split(openTag), function(val, key){\r\n                    val = val.split(closeTag);\r\n                    if(key >= 1){\r\n                        code = joinSnippet(code, compile(Nui.trim(val[0]), true))\r\n                    }\r\n                    else{\r\n                        val[1] = val[0];\r\n                    }\r\n                    code = joinSnippet(code, compile(val[1].replace(/'/g, \"\\\\'\").replace(/\"/g, '\\\\\"')))\r\n                });\r\n\r\n                var variables = isstr ? '' : [];\r\n\r\n                for(var k in data){\r\n                    variables = joinSnippet(variables, k+'=$data.'+k+',')\r\n                }\r\n\r\n                if(!isstr){\r\n                    code = code.join('');\r\n                    variables = variables.join('');\r\n                }\r\n\r\n                code = 'var '+ variables +'$that=this,$method=$that.methods; $that.line=4; $that.code='+ snippet +';\\ntry{\\n' + code + ';}\\ncatch(e){\\n$that.error(e, $that.line)\\n};';\r\n                \r\n                try{\r\n                    var Rander = new Function('$data', code);\r\n                    Rander.prototype.methods = methods;\r\n                    Rander.prototype.error = error(code, data, that.tplid);\r\n                    Rander.prototype.dom = isDom;\r\n                    tpl = new Rander(data).out();\r\n                    Rander = null\r\n                }\r\n                catch(e){\r\n                    error(code, data, that.tplid)(e)\r\n                }\r\n                \r\n            }\r\n            return tpl\r\n        }\r\n        return ''\r\n    }\r\n\r\n    var error = function(code, data, tplid){\r\n        return function(e, line){\r\n            var msg = '\\n';\r\n            var codes = [];\r\n            code = 'function anonymous($data){\\n'+code+'\\n}';\r\n            code = code.split('\\n');\r\n            Nui.each(code, function(v, k){\r\n                codes.push((k+1)+ '      ' +v.replace('$that.line++;', ''))\r\n            })\r\n            msg += 'code\\n';\r\n            msg += codes.join('\\n')+'\\n\\n';\r\n            if(typeof JSON !== undefined){\r\n                msg += 'data\\n';\r\n                msg += JSON.stringify(data)+'\\n\\n'\r\n            }\r\n            if(tplid){\r\n                msg += 'templateid\\n';\r\n                msg += tplid+'\\n\\n'\r\n            }\r\n            if(line){\r\n                msg += 'line\\n';\r\n                msg += line+'\\n\\n'\r\n            }\r\n            msg += 'message\\n';\r\n            msg += e.message;\r\n            console.error(msg)\r\n        }\r\n    }\r\n\r\n    var compile = function(tpl, logic){\r\n        if(!tpl){\r\n            return ''\r\n        }\r\n        var code,res;\r\n        if(logic){\r\n            if((res = match(tpl, 'if')) !== undefined){\r\n                code = 'if('+exists(res)+'){'\r\n            }\r\n            else if((res = match(tpl, 'elseif')) !== undefined){\r\n                code = '\\n}\\nelse if('+exists(res)+'){'\r\n            }\r\n            else if(tpl === 'else'){\r\n                code = '\\n}\\nelse{'\r\n            }\r\n            else if(tpl === '/if'){\r\n                code = '}'\r\n            }\r\n            else if((res = match(tpl, 'each ', /\\s+/)) !== undefined){\r\n                code = 'Nui.each('+ res[0] +', function('+(res[1]||'$value')+','+(res[2]||'$index')+'){'\r\n            }\r\n            else if(tpl === '/each'){\r\n                code = '});'\r\n            }\r\n            else if((res = match(tpl, ' | ', /\\s*,\\s*/)) !== undefined){\r\n                var str = res[0];\r\n                var i = str.lastIndexOf('(');\r\n                var _call = '(' +exists(res.slice(1).toString()) +')';\r\n                //赋值操作必须要用括号包裹起来\r\n                if(i !== -1){\r\n                    var start = str.substr(0, i);\r\n                    var end = Nui.trimLeft(str.substr(i+1));\r\n                    code = joinCode(start+'($that.methods.' + end + _call)\r\n                }\r\n                else{\r\n                    code = joinCode('$that.methods.'+ str + _call)\r\n                }\r\n            }\r\n            else if(/^(var|let|const|return|delete)\\s+/.test(tpl)){\r\n                code = exists(tpl)+';'\r\n            }\r\n            else{\r\n                code = joinCode(exists(tpl, true))\r\n            }\r\n        }\r\n        else{\r\n            code = joinCode('\\''+tpl+'\\'')\r\n        }\r\n        return code + '\\n' + '$that.line++;'\r\n    }\r\n\r\n    //判断变量是否存在\r\n    //a.b??  a[b]??  a['b']??  a[b['c']]??\r\n    var exists = function(code, isVal){\r\n        return code.replace(/([\\.\\$\\w]+\\s*(\\[[\\'\\\"\\[\\]\\w\\.\\$\\s]+\\])?)\\?\\?/g, function(a, b){\r\n            var rep = '(typeof '+ b + '!==\"undefined\"&&'+ b +'!==null&&'+ b +'!==undefined&&!$that.dom('+ b +')';\r\n            if(isVal){\r\n                rep += '?' + b + ':' + '\"\"';\r\n            }\r\n            return rep + ')'\r\n        })\r\n    }\r\n\r\n    var match = function(str, syntax, regexp){\r\n        var replace;\r\n        if(str.indexOf(syntax) === 0){\r\n            replace = ''\r\n        }\r\n        else if(syntax === ' | ' && str.indexOf(syntax) > 0){\r\n            replace = ','\r\n        }\r\n        if(replace !== undefined){\r\n            str = Nui.trimLeft(str.replace(syntax, replace));\r\n            return regexp ? str.split(regexp) : str\r\n        }\r\n    }\r\n\r\n    template.method = function(name, callback){\r\n        if(!methods[name]){\r\n            methods[name] = callback\r\n        }\r\n    }\r\n\r\n    template.config = function(){\r\n        var args = arguments;\r\n        if(Nui.type(args[0], 'Object')){\r\n            Nui.each(args[0], function(v, k){\r\n                options[k] = v\r\n            })\r\n        }\r\n        else if(args.length > 1 && typeof args[0] === 'string'){\r\n            options[args[0]] = args[1]\r\n        }\r\n    }\r\n\r\n    template.render = render;\r\n\r\n    return template\r\n})\r\n\n/**\r\n * @author Aniu[2016-11-11 16:54]\r\n * @update Aniu[2016-11-11 16:54]\r\n * @version 1.0.1\r\n * @description 组件基类\r\n */\r\n\r\nNui[define]('src/core/component', ['src/core/template', 'src/core/events'], function(tpl, events){\r\n    var module = this;\r\n    var require = this.require;\r\n    var extend = this.extend;\r\n    var callMethod = function(method, args, obj){\r\n        //实参大于形参，最后一个实参表示id\r\n        if(args.length > method.length){\r\n            var id = args[args.length-1];\r\n            if(id && Nui.type(id, ['String', 'Number']) && obj._options.id !== id && obj.__id !== id){\r\n                return\r\n            }\r\n        }\r\n        method.apply(obj, args)\r\n    }\r\n    //去除IE67按钮点击黑边\r\n    if(Nui.bsie7){\r\n        Nui.doc.on('focus', 'button, input[type=\"button\"]', function(){\r\n            this.blur()\r\n        })\r\n    }\r\n    /**\r\n     * 单和双下划线开头表示私有方法或者属性，只能在内部使用，\r\n     * 单下划线继承后可重写或修改，双下划线为系统预置无法修改\r\n     * 系统预置属性方法：__id, __instances, __eventList, __parent, __component_name, __setMethod\r\n     */\r\n    var statics = {\r\n        //实例对象唯一标记\r\n        __id:0,\r\n        //实例对象容器\r\n        __instances:{},\r\n        /*\r\n        * 将实例方法接口设置为静态方法，这样可以操作多个实例，\r\n        * 默认有 init, option, reset, destroy\r\n        * init表示初始化组件，会查询容器内包含属性为 data-组件名-options的dom元素，并调用组件\r\n        */\r\n        __setMethod:function(apis, components){\r\n            var self = this;\r\n            Nui.each(apis, function(val, methodName){\r\n                if(self[methodName] === undefined){\r\n                    self[methodName] = function(){\r\n                        var self = this, args = arguments, container = args[0], name = self.__component_name;\r\n                        if(name && name !== 'component'){\r\n                            if(container && container instanceof jQuery){\r\n                                if(methodName === 'init'){\r\n                                    var mod = components[name];\r\n                                    if(mod){\r\n                                        container.find('[data-'+name+'-options]').each(function(){\r\n                                            //不能重复调用\r\n                                            if(this.nui && this.nui[name]){\r\n                                                return\r\n                                            }\r\n                                            var elem = jQuery(this);\r\n                                            var options = elem.data(name+'Options');\r\n                                            var _mod;\r\n                                            if(options && typeof options === 'string'){\r\n                                                if(/^{[\\s\\S]*}$/.test(options)){\r\n                                                    options = eval('('+ options +')');\r\n                                                }\r\n                                                else if(_mod = require(options, true)){\r\n                                                    if(typeof _mod.exports === 'function'){\r\n                                                        options = _mod.exports(elem)\r\n                                                    }\r\n                                                    else{\r\n                                                        options = _mod.exports;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            if(typeof options !== 'object'){\r\n                                                options = {};\r\n                                            }\r\n                                            mod(extend(options, {\r\n                                                target:elem\r\n                                            }))\r\n                                        })\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    container.find('[nui_component_'+ name +']').each(function(){\r\n                                        var obj, method;\r\n                                        if(this.nui && (obj = this.nui[name]) && typeof (method = obj[methodName]) === 'function'){\r\n                                            callMethod(method, Array.prototype.slice.call(args, 1), obj)\r\n                                        }\r\n                                    })\r\n                                }\r\n                            }\r\n                            else{\r\n                                Nui.each(self.__instances, function(obj){\r\n                                    var method = obj[methodName];\r\n                                    if(typeof method === 'function'){\r\n                                        callMethod(method, args, obj)\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                        else{\r\n                            Nui.each(components, function(v, k){\r\n                                if(k !== 'component' && typeof v[methodName] === 'function'){\r\n                                    v[methodName].apply(v, args)\r\n                                }\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            return self\r\n        },\r\n        //对所有实例设置默认选项\r\n        _options:{},\r\n        //创建组件模块时会调用一次，可用于在document上绑定事件操作实例\r\n        _init:jQuery.noop,\r\n        _jquery:function(elem){\r\n            if(elem instanceof jQuery){\r\n                return elem\r\n            }\r\n            return jQuery(elem)\r\n        },\r\n        _getSize:function(selector, dir, attr){\r\n            var size = 0;\r\n            attr = attr || 'border';\r\n            dir = dir || 'tb';\r\n            if(attr === 'all'){\r\n                return (this._getSize(selector, dir) + \r\n                        this._getSize(selector, dir, 'padding') +\r\n                        this._getSize(selector, dir, 'margin'))\r\n            }\r\n            var group = {\r\n                l:['Left'],\r\n                r:['Right'],\r\n                lr:['Left', 'Right'],\r\n                t:['Top'],\r\n                b:['Bottom'],\r\n                tb:['Top', 'Bottom']\r\n            }\r\n            var arr = [{\r\n                border:{\r\n                    l:['LeftWidth'],\r\n                    r:['RightWidth'],\r\n                    lr:['LeftWidth', 'RightWidth'],\r\n                    t:['TopWidth'],\r\n                    b:['BottomWidth'],\r\n                    tb:['TopWidth', 'BottomWidth']\r\n                }\r\n            }, {\r\n                padding:group\r\n            }, {\r\n                margin:group\r\n            }];\r\n            Nui.each(arr, function(val){\r\n                if(val[attr]){\r\n                    Nui.each(val[attr][dir], function(v){\r\n                        var value = parseFloat(selector.css(attr+v));\r\n                        size += isNaN(value) ? 0 : value\r\n                    });\r\n                }\r\n            });\r\n            return size\r\n        },\r\n        _$fn:function(name, mod){\r\n            jQuery.fn[name] = function(){\r\n                var args = arguments;\r\n                var options = args[0];\r\n                return this.each(function(){\r\n                    if(typeof options !== 'string'){\r\n                        if(Nui.type(options, 'Object')){\r\n                            options.target = this\r\n                        }\r\n                        else{\r\n                            options = {\r\n                                target:this\r\n                            }\r\n                        }\r\n                        mod(options);\r\n                    }\r\n                    else if(options){\r\n                        var object;\r\n                        if(this.nui && (object=this.nui[name]) && options.indexOf('_') !== 0){\r\n                            if(options === 'options'){\r\n                                object.option(args[1], args[2])\r\n                            }\r\n                            else{\r\n                                var attr = object[options];\r\n                                if(typeof attr === 'function'){\r\n                                    attr.apply(object, Array.prototype.slice.call(args, 1))\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        _$ready:function(name, mod){\r\n            if(typeof this.init === 'function'){\r\n                this.init(Nui.doc)\r\n            }\r\n        },\r\n        config:function(){\r\n            var args = arguments;\r\n            var len = args.length;\r\n            var attr = args[0];\r\n            if(Nui.type(attr, 'Object')){\r\n                return this._options = jQuery.extend(true, this._options, attr)\r\n            }\r\n            else if(Nui.type(attr, 'String')){\r\n                if(args.length === 1){\r\n                    return this._options[attr]\r\n                }\r\n                return this._options[attr] = args[1]\r\n            }\r\n        },\r\n        hasInstance:function(id){\r\n            var exist = false;\r\n            var instances = this.__instances;\r\n            if(id){\r\n                Nui.each(instances, function(v){\r\n                    if(v._options.id === id){\r\n                        exist = true;\r\n                        return false\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                for(i in instances){\r\n                    return true\r\n                }\r\n            }\r\n            return exist\r\n        }\r\n    }\r\n\r\n    return ({\r\n        _static:statics,\r\n        _options:{\r\n            target:null,\r\n            //组件id，element会增加class 组件名-组件id\r\n            id:'',\r\n            //组件皮肤，element会增加class nui-组件名-皮肤名\r\n            skin:'',\r\n            //element增加一个或多个类\r\n            className:'',\r\n            onInit:null,\r\n            onReset:null,\r\n            onDestroy:null\r\n        },\r\n        _template:{},\r\n        _init:function(){\r\n            this._exec()\r\n        },\r\n        _exec:jQuery.noop,\r\n        _getTarget:function(){\r\n            var self = this;\r\n            if(!self.target){\r\n                var target = self._options.target;\r\n                var _class = self.constructor;\r\n                if(!target){\r\n                    return null\r\n                }\r\n                target = _class._jquery(target);\r\n                self.target = self._bindComponentName(target);\r\n            }\r\n            return self.target\r\n        },\r\n        _bindComponentName:function(element){\r\n            var self = this, _class = self.constructor;\r\n            var attr = 'nui_component_'+_class.__component_name;\r\n            element.attr(attr, '').each(function(){\r\n                if(!this.nui){\r\n                    this.nui = {};\r\n                }\r\n                this.nui[_class.__component_name] = self\r\n            })\r\n            return element\r\n        },\r\n        _tplData:function(data){\r\n            var opts = this._options, \r\n                _class = this.constructor,\r\n                name = 'nui-' + _class.__component_name, \r\n                skin = Nui.trim(opts.skin),\r\n                getName = function(_class, arrs){\r\n                    if(_class.__parent){\r\n                        var _pclass = _class.__parent.constructor;\r\n                        var _name = _pclass.__component_name;\r\n                        if(_name !== 'component'){\r\n                            if(skin){\r\n                                arrs.unshift('nui-'+_name+'-'+skin);\r\n                            }\r\n                            arrs.unshift('nui-'+_name);\r\n                            return getName(_pclass, arrs)\r\n                        }\r\n                    }\r\n                    return arrs\r\n                }, className = getName(_class, []);\r\n\r\n            className.push(name);\r\n            if(skin){\r\n                className.push(name+'-'+skin)\r\n            }\r\n            if(opts.id){\r\n                className.push(_class.__component_name + '-' + opts.id)\r\n            }\r\n            if(!data){\r\n                data = {}\r\n            }\r\n            if(opts.className){\r\n                className.push(opts.className)\r\n            }\r\n            data.className = className.join(' ');\r\n            return data\r\n        },\r\n        _event:function(){\r\n            var self = this, opts = self._options;\r\n            if(self.element && opts.events){\r\n                opts.element = self.element;\r\n                events.call(self, opts)\r\n            }\r\n            return events.call(self)\r\n        },\r\n        _on:function(type, dalegate, selector, callback, trigger){\r\n            var self = this;\r\n            if(typeof selector === 'function'){\r\n                trigger = callback;\r\n                callback = selector;\r\n                selector = dalegate;\r\n                dalegate = null;\r\n                selector = self.constructor._jquery(selector)\r\n            }\r\n\r\n            var _callback = function(e){\r\n                return callback.call(this, e, jQuery(this))\r\n            }\r\n\r\n            if(dalegate){\r\n                if(typeof selector !== 'string'){\r\n                    selector = selector.selector;\r\n                    if(!selector){\r\n                        selector = self._options.target\r\n                    }\r\n                }\r\n                dalegate.on(type, selector, _callback);\r\n                if(trigger){\r\n                    dalegate.find(selector).trigger(type)\r\n                }\r\n            }\r\n            else{\r\n                selector.on(type, _callback);\r\n                if(trigger){\r\n                    selector.trigger(type)\r\n                }\r\n            }\r\n\r\n            self.__eventList.push({\r\n                dalegate:dalegate,\r\n                selector:selector,\r\n                type:type,\r\n                callback:_callback\r\n            });\r\n\r\n            return self\r\n        },\r\n        _off:function(){\r\n            var self = this, _eventList = self.__eventList;\r\n            Nui.each(_eventList, function(val, key){\r\n                if(val.dalegate){\r\n                    val.dalegate.off(val.type, val.selector, val.callback)\r\n                }\r\n                else{\r\n                    val.selector.off(val.type, val.callback)\r\n                }\r\n                _eventList[key] = null;\r\n                delete _eventList[key]\r\n            });\r\n            self.__eventList = [];\r\n            return self\r\n        },\r\n        _delete:function(){\r\n            var self = this, _class = self.constructor;\r\n            if(self.target){\r\n                var attr = 'nui_component_'+_class.__component_name;\r\n                self.target.removeAttr(attr).each(function(){\r\n                    if(this.nui){\r\n                        this.nui[_class.__component_name] = null;\r\n                        delete this.nui[_class.__component_name];\r\n                    }\r\n                })\r\n            }\r\n            _class.__instances[self.__id] = null;\r\n            delete _class.__instances[self.__id]\r\n        },\r\n        _reset:function(){\r\n            this._off();\r\n            if(this.element){\r\n                this.element.remove();\r\n                this.element = null;\r\n            }\r\n            return this\r\n        },\r\n        _tpl2html:function(id, data){\r\n            var opts = {\r\n                openTag:'<%',\r\n                closeTag:'%>'\r\n            }\r\n            if(arguments.length === 1){\r\n                return tpl.render(this._template, id, opts)\r\n            }\r\n            return tpl.render.call(this._template, this._template[id], data, opts)\r\n        },\r\n        _callback:function(method, args){\r\n            var self = this, opts = self._options;\r\n            var callback = opts['on'+method];\r\n            if(typeof callback === 'function'){\r\n                if(args){\r\n                    Array.prototype.unshift.call(args, self);\r\n                    return callback.apply(opts, args);\r\n                }\r\n                return callback.call(opts, self)\r\n            }\r\n        },\r\n        option:function(opts, isOriginal){\r\n            var args = arguments;\r\n            var isdef = false;\r\n            var options;\r\n            if(args[0] === true){\r\n                isdef = true\r\n            }\r\n            else if(jQuery.isPlainObject(args[0])){\r\n                options = args[0]\r\n                isdef = args[1]\r\n            }\r\n            else if(args.length > 1 && typeof args[0] === 'string'){\r\n                options = {};\r\n                options[args[0]] = args[1]\r\n                isdef = args[2]\r\n            }\r\n            if(options||isdef){\r\n                this._options = jQuery.extend(true, {}, this[isdef === true ? '_defaultOptions' : '_options'], options)\r\n                this._reset();\r\n                this._exec();\r\n            }\r\n            return this\r\n        },\r\n        reset:function(){\r\n            this.option(true);\r\n            this._callback('Reset');\r\n            return this;\r\n        },\r\n        destroy:function(){\r\n            this._delete();\r\n            this._reset();\r\n            this._callback('Destroy');\r\n        }\r\n    })\r\n})\r\n\n/**\r\n * @author Aniu[2017-02-27 23:46]\r\n * @update Aniu[2017-02-27 23:46]\r\n * @version 1.0.1\r\n * @description 路由\r\n */\r\n\r\nNui[define]('src/components/router',['src/core/component', 'src/core/template', 'src/core/events'], function(component, template, events){\r\n    var statics = {\r\n        _paths:{},\r\n        _init:function(){\r\n            var self = this;\r\n            Nui.doc.on('click', '.nui-router-back', function(){\r\n                return self.back()\r\n            }).on('click', '.nui-router-forward', function(){\r\n                return self.forward()\r\n            })\r\n        },\r\n        _setpaths:function(rule, paths){\r\n            if(!this._paths[rule]){\r\n                this._paths[rule] = paths\r\n            }\r\n        },\r\n        _replace:function(hash){\r\n                        //IE8-中 A标签href属性会被添加上域名，将其移除\r\n            return hash.replace(location.protocol+'//'+location.host, '')\r\n                        //移除空白\r\n                       .replace(/\\s+/g, '')\r\n                       //移除 #!前缀\r\n                       .replace(/^\\#\\!?/, '')\r\n                       //开头添加斜杠\r\n                       .replace(/^([^\\/])/, '/$1')\r\n                       //移除末尾斜杠\r\n                       .replace(/\\/$/, '');\r\n        },\r\n        _getWrapper:function(container){\r\n            return $('<div class=\"nui-router-wrapper\"></div>').appendTo(container)\r\n        },\r\n        _split:function(url){\r\n            var ret = {\r\n                url:url,\r\n                params:{}\r\n            }\r\n            var match = url.match(/\\?[^\\/\\s]+$/);\r\n            if(match){\r\n                var params = match[0];\r\n                ret.url = url.replace(params, '');\r\n                params = params.replace('?', '').split('&');\r\n                Nui.each(params, function(v, k){\r\n                    var arr = v.split('=');\r\n                    ret.params[arr[0]] = arr[1]\r\n                })\r\n            }\r\n            return ret;\r\n        },\r\n        _change:function(){\r\n            var self = this;\r\n            delete self._active;\r\n            if(!$.isEmptyObject(self._paths)){\r\n                var _hash = location.hash, ret = this._split(_hash), hash = self._replace(ret.url), query = ret.params;\r\n                Nui.each(self._paths, function(v){\r\n                    if(hash === v.path || hash.indexOf(v.path) === 0){\r\n                        var params = hash.replace(v.path, '').replace(/^\\//, '');\r\n                        var object = self.__instances[v.id], opts = object._options, param = {};\r\n                        params = params ? params.split('/') : [];\r\n                        if(params.length === v.params.length){\r\n                            var isRender = object._isRender === true;\r\n                            var unWrapper = object._isRender !== false && !object._wrapper;\r\n                            var _isRender = !object.loaded || isRender || unWrapper;\r\n                            delete object._isRender;\r\n\r\n                            if(unWrapper || (object._wrapper && isRender)){\r\n                                opts.data = $.extend(true, {}, object._defaultOptions.data);\r\n                            }\r\n\r\n                            Nui.each(v.params, function(val, key){\r\n                                param[val] = params[key]\r\n                            })\r\n\r\n                            Nui.each(query, function(val, key){\r\n                                param[val] = query[key]\r\n                            })\r\n\r\n                            self._active = {\r\n                                path:v.path+'/',\r\n                                url:hash+'/',\r\n                                params:param,\r\n                                query:query\r\n                            }\r\n\r\n                            opts.data = $.extend(true, opts.data, self._active);\r\n\r\n                            if(object._send && object._send.data && typeof opts.onData === 'function'){\r\n                                opts.onData.call(opts, object._send.data);\r\n                                delete object._send;\r\n                            }\r\n\r\n                            if(_isRender){\r\n                                if(opts.wrapper && !object._wrapper){\r\n                                    if(typeof opts.wrapper !== 'boolean'){\r\n                                        object._wrapper = object.container.children(opts.wrapper)\r\n                                    }\r\n                                    else{\r\n                                        object._wrapper = self._getWrapper(object.container)\r\n                                    }\r\n                                }\r\n                                else if(!self._wrapper){\r\n                                    self._wrapper = self._getWrapper(object.container)\r\n                                }\r\n                                component.destroy((object._wrapper||self._wrapper).off());\r\n                            }\r\n\r\n                            var wrapper = opts.element = object._wrapper || self._wrapper;\r\n                            \r\n                            if(typeof opts.onChange === 'function' && opts.onChange.call(opts) === false){\r\n                                return false\r\n                            }\r\n                                \r\n                            if(_isRender){\r\n                                var tmpl = opts.template;\r\n                                if(tmpl){\r\n                                    if(typeof tmpl === 'string'){\r\n                                        wrapper.html(template.render(tmpl, opts.data));\r\n                                    }\r\n                                    else{\r\n                                        wrapper.html(template.render.call(tmpl, tmpl.main, opts.data));\r\n                                    }\r\n                                }\r\n                                if(typeof opts.onInit === 'function'){\r\n                                    opts.onInit.call(opts);\r\n                                }\r\n                                events.call(opts);\r\n                                component.init(wrapper);\r\n                                object.loaded = true;\r\n                            }\r\n\r\n                            wrapper.show().siblings('.nui-router-wrapper').hide();\r\n                            if(typeof opts.onAfter === 'function'){\r\n                                opts.onAfter.call(opts)\r\n                            }\r\n                            self._initialize = true;\r\n                            if(Nui.bsie7){\r\n                                self._setHistory(_hash);\r\n                            }\r\n                            return false\r\n                        }\r\n                    }\r\n                })\r\n\r\n                if(!self._initialize){\r\n                    Nui.each(self.__instances, function(v){\r\n                        if(!self._isEntry && v._options.entry === true){\r\n                            self._isEntry = true;\r\n                            if(v.target){\r\n                                v._render(v.target.eq(0));\r\n                            }\r\n                            else if(v.path){\r\n                                v._render(v.path);\r\n                            }\r\n                            self._initialize = true;\r\n                            return false\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            self._oldhash = _hash;\r\n        },\r\n        _bindHashchange:function(){\r\n            var self = this;\r\n            if(Nui.bsie7){\r\n                var hashchange = function(ret){\r\n                    var hash = location.hash;\r\n                    if(self._oldhash !== hash){\r\n                        return !ret\r\n                    }\r\n                    return false\r\n                }\r\n                setInterval(function(){\r\n                    if(hashchange()){\r\n                        self._change()\r\n                    }\r\n                }, 100);\r\n                hashchange(true)\r\n            }\r\n            else{\r\n                Nui.win.on('hashchange', function(){\r\n                    self._change()\r\n                })\r\n            }\r\n        },\r\n        _$ready:null,\r\n        _$fn:null,\r\n        init:null,\r\n        start:function(){\r\n            if(!this._initialize){\r\n                this._change();\r\n            }\r\n        },\r\n        location:function(url, data, render){\r\n            var self = this;\r\n            if(url){\r\n                if(arguments.length <=2 && typeof data === 'boolean'){\r\n                    render = data;\r\n                    data = null;\r\n                }\r\n                var temp, _router, query = '';\r\n                var match = url.match(/\\?[^\\/\\s]+$/);\r\n                if(match){\r\n                    query = match[0]\r\n                }\r\n                url = this._replace(url.replace(/\\?[^\\/\\s]+$/, ''));\r\n                Nui.each(this._paths, function(val, rule){\r\n                    if(rule === url || (url.indexOf(val.path) === 0 &&\r\n                                        (temp = url.replace(new RegExp('^'+val.path), '').replace(/^\\//, '')) && \r\n                                        temp.split('/').length === val.params.length)){\r\n                        _router = self.__instances[val.id];\r\n                        return false\r\n                    }\r\n                })\r\n                if(_router){\r\n                    _router._send = {\r\n                        data:data\r\n                    }\r\n                    _router._isRender = render;\r\n                    _router._render(url + query)\r\n                }\r\n            }\r\n            else{\r\n                self.start()\r\n            }\r\n        },\r\n        active:function(){\r\n            return this._active\r\n        },\r\n        forward:function(index){\r\n            history.forward(index);\r\n            return false\r\n        },\r\n        back:function(index){\r\n            history.back(index);\r\n            return false\r\n        }\r\n    }\r\n\r\n    if(Nui.bsie7){\r\n        statics._history = [];\r\n        statics._setHistory = function(hash){\r\n            if(!this._isHistory){\r\n                Nui.each(this._history, function(val){\r\n                    val.active = false\r\n                });\r\n                this._history.push({\r\n                    hash:hash,\r\n                    active:true\r\n                })\r\n            }\r\n            this._isHistory = false;\r\n        },\r\n        Nui.each(['forward', 'back'], function(v){\r\n            var value = v==='forward' ? 1 : -1;\r\n            statics[v] = function(){\r\n                var self = this, len = self._history.length;\r\n                statics._isHistory = true;\r\n                Nui.each(self._history, function(val, i){\r\n                    var index = i + value;\r\n                    if(val.active){\r\n                        //历史记录在起始或者末尾时，调用原生的记录\r\n                        if(index === -1 || index === len){\r\n                            window.history[v]();\r\n                            return false\r\n                        }\r\n                        var _history = self._history[index];\r\n                        if(_history){\r\n                            location.hash = _history.hash;\r\n                            _history.active = true;\r\n                        }\r\n                        val.active = false;\r\n                        return false\r\n                    }\r\n                })\r\n                return false\r\n            }\r\n        })\r\n    }\r\n\r\n    return this.extend(component, {\r\n        _static:statics,\r\n        _options:{\r\n            path:'',\r\n            template:'',\r\n            container:null,\r\n            data:{},\r\n            entry:false,\r\n            wrapper:false,\r\n            level:2,\r\n            onBefore:null,\r\n            onChange:null,\r\n            onData:null,\r\n            onInit:null,\r\n            onAfter:null\r\n        },\r\n        _init:function(){\r\n            var self = this, router = self.constructor;\r\n            if(self._exec() && !router._bind){\r\n                router._bind = true;\r\n                router._bindHashchange();\r\n            }\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, router = self.constructor;\r\n            self.container = router._jquery(opts.container);\r\n            if(opts.path && self.container){\r\n                self.path = router._replace(opts.path);\r\n                var paths = self._getpath();\r\n                var len = paths.params.length;\r\n                if((!len && opts.level === 1) || opts.level !== 1){\r\n                    router._setpaths(paths.rule, paths)\r\n                }\r\n                if(len && opts.level > 0){\r\n                    var params = [], split = '/:', param, sub;\r\n                    while(param = paths.params.shift()){\r\n                        params.push(param);\r\n                        sub = params.join(split);\r\n                        router._setpaths(paths.rule+split+sub, $.extend({}, paths, {\r\n                            params:sub.split(split)\r\n                        }))\r\n                    }\r\n                }\r\n                if(self._getTarget()){\r\n                    self._event()\r\n                }\r\n                return self\r\n            }\r\n        },\r\n        _getpath:function(){\r\n            var self = this, path = self.path, opts = self._options, index = path.indexOf('/:');\r\n            var paths = {\r\n                id:self.__id,\r\n                params:[],\r\n                rule:path,\r\n                path:path\r\n            }\r\n            if(index !== -1){\r\n                paths.params = path.substr(index+2).split('/:');\r\n                self.path = paths.path = path.substr(0, index);\r\n                if(opts.level > 0){\r\n                    paths.rule = paths.path;\r\n                }\r\n            }\r\n            return paths\r\n        },\r\n        _render:function(url){\r\n            var self = this, opts = self._options, href = url instanceof jQuery ? url.attr('href') : url;\r\n            if(href){\r\n                var trigger = false;\r\n                var change = function(callback){\r\n                    trigger = true;\r\n                    var hash = '#!'+self.constructor._replace(href);\r\n                    if(typeof callback === 'function'){\r\n                        hash = callback(hash) || hash;\r\n                    }\r\n                    location.hash = hash\r\n                }\r\n                if(typeof opts.onBefore === 'function' && opts.onBefore.call(opts, change) === false){\r\n                    return false\r\n                }\r\n                if(!trigger){\r\n                    change()\r\n                }\r\n            }\r\n        },\r\n        _event:function(){\r\n            var self = this, opts = self._options;\r\n            self._on('click', Nui.doc, self.target, function(e, elem){\r\n                self._render(elem);\r\n                e.preventDefault()\r\n            })\r\n            return self\r\n        },\r\n        _reset:function(){\r\n            var self = this, router = self.constructor;\r\n            self._off();\r\n            Nui.each(router._paths, function(val, i){\r\n                if(val.id === self.__id){\r\n                    delete router._paths[i];\r\n                }\r\n            })\r\n            return self\r\n        },\r\n        option:null,\r\n        reset:null\r\n    })\r\n})\n/**\r\n * @author Aniu[2016-11-10 22:39]\r\n * @update Aniu[2016-11-10 22:39]\r\n * @version 1.0.1\r\n * @description 输入框占位符\r\n */\r\n\r\nNui[define]('src/components/placeholder',['src/core/component'], function(component){\r\n    return this.extend(component, {\r\n        _options:{\r\n            /**\r\n             * @func 输入框占位提示文本，若元素上含有placeholder属性将会覆盖该值\r\n             * @type <String>\r\n             */\r\n            text:'',\r\n            /**\r\n             * @func 是否启用动画形式展示\r\n             * @type <Boolean>\r\n             */\r\n            animate:false,\r\n            /**\r\n             * @func 输入框值是否可以和占位符相同\r\n             * @type <Boolean>\r\n             */\r\n            equal:false,\r\n            /**\r\n             * @func 销毁或者重置组件是否还原默认值\r\n             * @type <Boolean>\r\n             */\r\n            restore:true,\r\n            /**\r\n             * @func 占位符文本颜色\r\n             * @type <String>\r\n             */\r\n            color:'#ccc',\r\n            /**\r\n             * @func 调用value方法后执行回调\r\n             * @type <Function>\r\n             */\r\n            onChange:null\r\n        },\r\n        _template:{\r\n            list:'<%each style%><%$index%>:<%$value%>;<%/each%>',\r\n            wrap:'<strong class=\"<% className %>\" style=\"<%include \\'list\\'%>\" />',\r\n            elem:'<b style=\"<%include \\'list\\'%>\"><%text%></b>'\r\n        },\r\n        _exec:function(){\r\n            var self = this, opts = self._options, target = self._getTarget();\r\n            if(target){\r\n                var text = self._deftext = target.attr('placeholder');\r\n                if(!self._deftext && opts.text){\r\n                    target.attr('placeholder', text = opts.text)\r\n                }\r\n                if(self._val === undefined){\r\n                    self._val = Nui.trim(target.val());\r\n                }\r\n                if(self._text = Nui.trim(text)){\r\n                    self._create()\r\n                }\r\n            }\r\n        },\r\n        _create:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            if(opts.animate || (!opts.animate && !('placeholder' in document.createElement('input')))){\r\n                if(opts.animate){\r\n                    self.target.removeAttr('placeholder')\r\n                }\r\n                var data = self._tplData();\r\n                data.style = {\r\n                    'position':'relative',\r\n                    'display':'inline-block',\r\n                    'width':self.target.outerWidth()+'px',\r\n                    'overflow':'hidden',\r\n                    'cursor':'text'\r\n                }\r\n                self.target.wrap(self._tpl2html('wrap', data))\r\n                self.element = $(self._tpl2html('elem', {\r\n                        text:self._text,\r\n                        style:(function(){\r\n                            var height = self.target.outerHeight();\r\n                            var isText = self.target.is('textarea');\r\n                            return ({\r\n                                'display':Nui.trim(self.target.val()) ? 'none' : 'inline',\r\n                                'position':'absolute',\r\n                                'left':_class._getSize(self.target, 'l', 'padding')+_class._getSize(self.target, 'l')+'px',\r\n                                'top':_class._getSize(self.target, 't', 'padding')+_class._getSize(self.target, 't')+'px',\r\n                                'height':isText ? 'auto' : height+'px',\r\n                                'line-height':isText ? 'normal' : height+'px',\r\n                                'color':opts.color\r\n                            })\r\n                        })()\r\n                    })).insertAfter(self.target)\r\n\r\n                self._events()\r\n            }\r\n            else{\r\n                self._setStyle()\r\n            }\r\n        },\r\n        _setStyle:function(){\r\n            var self = this, opts = self._options;\r\n            self.className = '_placeholder-'+self.__id;\r\n            self.target.addClass(self.className);\r\n            if(!self.constructor.style){\r\n                self._createStyle()\r\n            }\r\n            self._createRules()\r\n        },\r\n        _createStyle:function(){\r\n            var self = this;\r\n            var style = document.createElement('style');\r\n            document.head.appendChild(style);\r\n            self.constructor.style = style.sheet\r\n        },\r\n        _createRules:function(){\r\n            var self = this;\r\n            var sheet = self.constructor.style;\r\n            var id = self.__id;\r\n            try{\r\n                sheet.deleteRule(id)\r\n            }\r\n            catch(e){}\r\n            Nui.each(['::-webkit-input-placeholder', ':-ms-input-placeholder', '::-moz-placeholder'], function(v){\r\n                var selector = '.'+self.className+v;\r\n                var rules = 'opacity:1; color:'+(self._options.color||'');\r\n                try{\r\n                    if('addRule' in sheet){\r\n                        sheet.addRule(selector, rules, id)\r\n                    }\r\n                    else if('insertRule' in sheet){\r\n                        sheet.insertRule(selector + '{' + rules + '}', id)\r\n                    }\r\n                }\r\n                catch(e){}\r\n            })\r\n        },\r\n        _events:function(){\r\n            var self = this, opts = self._options, _class = self.constructor;\r\n            var pleft = _class._getSize(self.target, 'l', 'padding') + _class._getSize(self.target, 'l');\r\n            self._on('click', self.element, function(){\r\n                self.target.focus()\r\n            })\r\n\r\n            self._on('focus', self.target, function(){\r\n                opts.animate && self.element.stop(true, false).animate({left:pleft+10, opacity:'0.5'});\r\n            })\r\n\r\n            self._on('blur change', self.target, function(e, elem){\r\n                self.value();\r\n            })\r\n\r\n            self._on('keyup keydown', self.target, function(e, elem){\r\n                Nui.trim(elem.val()) ? self.element.hide() : self.element.show()\r\n            })\r\n        },\r\n        _reset:function(){\r\n            var self = this;\r\n            self._off();\r\n            if(self.element){\r\n                self.element.remove();\r\n                self.target.unwrap();\r\n            }\r\n            if(self._options.restore === true){\r\n                self.target.val(self._val)\r\n            }\r\n            self.target.removeClass(self.className);\r\n            if(self._deftext){\r\n                self.target.attr('placeholder', self._deftext)\r\n            }\r\n            else{\r\n                self.target.removeAttr('placeholder')\r\n            }\r\n        },\r\n        value:function(val){\r\n            var _class = this.constructor, target = this.target;\r\n            var pleft = _class._getSize(target, 'l', 'padding') + _class._getSize(target, 'l');\r\n            var v = Nui.trim(!arguments.length ? target.val() : target.val(val).val());\r\n            if((!this._options.equal && v === this.text) || !v){\r\n                target.val('');\r\n                this.element && this.element.show();\r\n                if(this._options.animate){\r\n                    this.element.stop(true, false).animate({left:pleft, opacity:'1'})\r\n                }\r\n            }\r\n            else if(this.element){\r\n                this.element.hide()\r\n            }\r\n            this._callback('Change');\r\n        }\r\n    })\r\n})\r\n\nNui[define]('./script/demo',function(){\r\n\tvar renders = this.renders;\r\n\tvar require = this.require;\r\n\tvar placeholder = require('src/components/placeholder');\r\n\tvar router = require('src/components/router');\r\n\r\n\trequire.async('./a', function(a){\r\n\t\t//a.a()\r\n\t})\r\n\r\n\trouter({\r\n\t\ttarget:'#home',\r\n\t\tentry:true,\r\n\t\tpath:'/home/',\r\n\t\twrapper:'#aa',\r\n\t\tcontainer:'#main'\r\n\t})\r\n\tvar placeholder_opts = require('pages/components/router/script/options', true);\r\n\trouter({\r\n\t\ttarget:'#news, .news',\r\n\t\tentry:true,\r\n\t\tpath:'/news/:id/:title',\r\n\t\tcontainer:'#main',\r\n\t\tlevel:2,\r\n\t\ttemplate:{\r\n\t\t\tlist:'<ul>'+\r\n\t\t\t\t\t'<%each list%>'+\r\n\t\t\t\t\t'<li><a href=\"<%$value.url%>/<%$value.title%>\" class=\"news\"><%$value.title%></a></li>'+\r\n\t\t\t\t\t'<%/each%>'+\r\n\t\t\t\t'</ul>',\r\n\t\t\tdetail:'<div>'+\r\n\t\t\t\t\t\t'<h3><%params.title%></h3>'+\r\n\t\t\t\t\t\t'<p>这是<%params.title%>详情，id是<%params.id%>。<input type=\"text\" data-placeholder-options=\"'+ placeholder_opts.id +'\"></p>'+\r\n\t\t\t\t\t'</div>'\r\n\t\t},\r\n\t\tdata:{\r\n\t\t\tlist:[{\r\n\t\t\t\turl:'/news/1',\r\n\t\t\t\ttitle:'资讯1'\r\n\t\t\t},{\r\n\t\t\t\turl:'/news/2',\r\n\t\t\t\ttitle:'资讯2'\r\n\t\t\t}, {\r\n\t\t\t\turl:'/news/3',\r\n\t\t\t\ttitle:'资讯3'\r\n\t\t\t}]\r\n\t\t},\r\n\t\tonChange:function(){\r\n\t\t\tvar tpl = this.template, params = this.data.params;\r\n\t\t\tif(params.id && params.title){\r\n\t\t\t\t\r\n\t\t\t\ttpl.main = tpl.detail;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\ttpl.main = tpl.list;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonInit:function(){\r\n\t\t\t\r\n\t\t}\r\n\t})\r\n\r\n\trouter.start()\r\n})\n\n})('_module_1_define');"]}